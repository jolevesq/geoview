<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>GeoView Documentation</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="description" content="GeoView API Documentation" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, minimum-scale=1.0"
    />
    <link
      rel="stylesheet"
      href="//cdn.jsdelivr.net/npm/docsify@4/lib/themes/vue.css"
    />
  </head>
  <body>
    <div id="app"></div>
    <script>
      // Detect the base path dynamically
      const path = window.location.pathname;
      const docsIndex = path.lastIndexOf("/docs/");
      const basePath =
        docsIndex >= 0 ? path.substring(0, docsIndex + 6) : "/docs/";

      window.$docsify = {
        name: "GeoView",
        repo: "https://github.com/Canadian-Geospatial-Platform/geoview",
        basePath: basePath,
        loadSidebar: true,
        alias: {
          "/.*/_sidebar.md": basePath + "_sidebar.md",
        },
        subMaxLevel: 3,
        auto2top: true,
        search: {
          placeholder: "Search documentation...",
          noData: "No results found.",
          depth: 6,
        },
      };

      // Debug helpers
      console.log("Docsify basePath:", basePath);
      console.log("Sidebar URL:", basePath + "_sidebar.md");
      console.log("Full config:", window.$docsify);

      // Test sidebar accessibility
      fetch(basePath + "_sidebar.md")
        .then((r) => {
          console.log(
            "Sidebar fetch status:",
            r.status,
            r.ok ? "✓ OK" : "✗ FAILED"
          );
          return r.text();
        })
        .then((text) => console.log("Sidebar loaded, length:", text.length))
        .catch((err) => console.error("Sidebar fetch error:", err));
    </script>
    <!-- Docsify v4 -->
    <script src="//cdn.jsdelivr.net/npm/docsify@4"></script>
    <!-- Search plugin -->
    <script src="//cdn.jsdelivr.net/npm/docsify@4/lib/plugins/search.min.js"></script>
  </body>
</html>

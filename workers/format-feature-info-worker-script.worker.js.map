{"version":3,"file":"workers/format-feature-info-worker-script.worker.js","mappings":"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","sources":["webpack://geoview-core/../../common/temp/node_modules/.pnpm/comlink@4.4.2/node_modules/comlink/dist/esm/comlink.mjs","webpack://geoview-core/../../common/temp/node_modules/.pnpm/@babel+runtime@7.26.0/node_modules/@babel/runtime/helpers/esm/typeof.js","webpack://geoview-core/../../common/temp/node_modules/.pnpm/@babel+runtime@7.26.0/node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","webpack://geoview-core/../../common/temp/node_modules/.pnpm/@babel+runtime@7.26.0/node_modules/@babel/runtime/helpers/esm/toPrimitive.js","webpack://geoview-core/../../common/temp/node_modules/.pnpm/@babel+runtime@7.26.0/node_modules/@babel/runtime/helpers/esm/createClass.js","webpack://geoview-core/./src/core/workers/helper/logger-worker.ts","webpack://geoview-core/../../common/temp/node_modules/.pnpm/@babel+runtime@7.26.0/node_modules/@babel/runtime/helpers/esm/classCallCheck.js","webpack://geoview-core/./src/core/workers/format-feature-info-worker-script.ts"],"sourcesContent":["/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\nconst proxyMarker = Symbol(\"Comlink.proxy\");\nconst createEndpoint = Symbol(\"Comlink.endpoint\");\nconst releaseProxy = Symbol(\"Comlink.releaseProxy\");\nconst finalizer = Symbol(\"Comlink.finalizer\");\nconst throwMarker = Symbol(\"Comlink.thrown\");\nconst isObject = (val) => (typeof val === \"object\" && val !== null) || typeof val === \"function\";\n/**\n * Internal transfer handle to handle objects marked to proxy.\n */\nconst proxyTransferHandler = {\n    canHandle: (val) => isObject(val) && val[proxyMarker],\n    serialize(obj) {\n        const { port1, port2 } = new MessageChannel();\n        expose(obj, port1);\n        return [port2, [port2]];\n    },\n    deserialize(port) {\n        port.start();\n        return wrap(port);\n    },\n};\n/**\n * Internal transfer handler to handle thrown exceptions.\n */\nconst throwTransferHandler = {\n    canHandle: (value) => isObject(value) && throwMarker in value,\n    serialize({ value }) {\n        let serialized;\n        if (value instanceof Error) {\n            serialized = {\n                isError: true,\n                value: {\n                    message: value.message,\n                    name: value.name,\n                    stack: value.stack,\n                },\n            };\n        }\n        else {\n            serialized = { isError: false, value };\n        }\n        return [serialized, []];\n    },\n    deserialize(serialized) {\n        if (serialized.isError) {\n            throw Object.assign(new Error(serialized.value.message), serialized.value);\n        }\n        throw serialized.value;\n    },\n};\n/**\n * Allows customizing the serialization of certain values.\n */\nconst transferHandlers = new Map([\n    [\"proxy\", proxyTransferHandler],\n    [\"throw\", throwTransferHandler],\n]);\nfunction isAllowedOrigin(allowedOrigins, origin) {\n    for (const allowedOrigin of allowedOrigins) {\n        if (origin === allowedOrigin || allowedOrigin === \"*\") {\n            return true;\n        }\n        if (allowedOrigin instanceof RegExp && allowedOrigin.test(origin)) {\n            return true;\n        }\n    }\n    return false;\n}\nfunction expose(obj, ep = globalThis, allowedOrigins = [\"*\"]) {\n    ep.addEventListener(\"message\", function callback(ev) {\n        if (!ev || !ev.data) {\n            return;\n        }\n        if (!isAllowedOrigin(allowedOrigins, ev.origin)) {\n            console.warn(`Invalid origin '${ev.origin}' for comlink proxy`);\n            return;\n        }\n        const { id, type, path } = Object.assign({ path: [] }, ev.data);\n        const argumentList = (ev.data.argumentList || []).map(fromWireValue);\n        let returnValue;\n        try {\n            const parent = path.slice(0, -1).reduce((obj, prop) => obj[prop], obj);\n            const rawValue = path.reduce((obj, prop) => obj[prop], obj);\n            switch (type) {\n                case \"GET\" /* MessageType.GET */:\n                    {\n                        returnValue = rawValue;\n                    }\n                    break;\n                case \"SET\" /* MessageType.SET */:\n                    {\n                        parent[path.slice(-1)[0]] = fromWireValue(ev.data.value);\n                        returnValue = true;\n                    }\n                    break;\n                case \"APPLY\" /* MessageType.APPLY */:\n                    {\n                        returnValue = rawValue.apply(parent, argumentList);\n                    }\n                    break;\n                case \"CONSTRUCT\" /* MessageType.CONSTRUCT */:\n                    {\n                        const value = new rawValue(...argumentList);\n                        returnValue = proxy(value);\n                    }\n                    break;\n                case \"ENDPOINT\" /* MessageType.ENDPOINT */:\n                    {\n                        const { port1, port2 } = new MessageChannel();\n                        expose(obj, port2);\n                        returnValue = transfer(port1, [port1]);\n                    }\n                    break;\n                case \"RELEASE\" /* MessageType.RELEASE */:\n                    {\n                        returnValue = undefined;\n                    }\n                    break;\n                default:\n                    return;\n            }\n        }\n        catch (value) {\n            returnValue = { value, [throwMarker]: 0 };\n        }\n        Promise.resolve(returnValue)\n            .catch((value) => {\n            return { value, [throwMarker]: 0 };\n        })\n            .then((returnValue) => {\n            const [wireValue, transferables] = toWireValue(returnValue);\n            ep.postMessage(Object.assign(Object.assign({}, wireValue), { id }), transferables);\n            if (type === \"RELEASE\" /* MessageType.RELEASE */) {\n                // detach and deactive after sending release response above.\n                ep.removeEventListener(\"message\", callback);\n                closeEndPoint(ep);\n                if (finalizer in obj && typeof obj[finalizer] === \"function\") {\n                    obj[finalizer]();\n                }\n            }\n        })\n            .catch((error) => {\n            // Send Serialization Error To Caller\n            const [wireValue, transferables] = toWireValue({\n                value: new TypeError(\"Unserializable return value\"),\n                [throwMarker]: 0,\n            });\n            ep.postMessage(Object.assign(Object.assign({}, wireValue), { id }), transferables);\n        });\n    });\n    if (ep.start) {\n        ep.start();\n    }\n}\nfunction isMessagePort(endpoint) {\n    return endpoint.constructor.name === \"MessagePort\";\n}\nfunction closeEndPoint(endpoint) {\n    if (isMessagePort(endpoint))\n        endpoint.close();\n}\nfunction wrap(ep, target) {\n    const pendingListeners = new Map();\n    ep.addEventListener(\"message\", function handleMessage(ev) {\n        const { data } = ev;\n        if (!data || !data.id) {\n            return;\n        }\n        const resolver = pendingListeners.get(data.id);\n        if (!resolver) {\n            return;\n        }\n        try {\n            resolver(data);\n        }\n        finally {\n            pendingListeners.delete(data.id);\n        }\n    });\n    return createProxy(ep, pendingListeners, [], target);\n}\nfunction throwIfProxyReleased(isReleased) {\n    if (isReleased) {\n        throw new Error(\"Proxy has been released and is not useable\");\n    }\n}\nfunction releaseEndpoint(ep) {\n    return requestResponseMessage(ep, new Map(), {\n        type: \"RELEASE\" /* MessageType.RELEASE */,\n    }).then(() => {\n        closeEndPoint(ep);\n    });\n}\nconst proxyCounter = new WeakMap();\nconst proxyFinalizers = \"FinalizationRegistry\" in globalThis &&\n    new FinalizationRegistry((ep) => {\n        const newCount = (proxyCounter.get(ep) || 0) - 1;\n        proxyCounter.set(ep, newCount);\n        if (newCount === 0) {\n            releaseEndpoint(ep);\n        }\n    });\nfunction registerProxy(proxy, ep) {\n    const newCount = (proxyCounter.get(ep) || 0) + 1;\n    proxyCounter.set(ep, newCount);\n    if (proxyFinalizers) {\n        proxyFinalizers.register(proxy, ep, proxy);\n    }\n}\nfunction unregisterProxy(proxy) {\n    if (proxyFinalizers) {\n        proxyFinalizers.unregister(proxy);\n    }\n}\nfunction createProxy(ep, pendingListeners, path = [], target = function () { }) {\n    let isProxyReleased = false;\n    const proxy = new Proxy(target, {\n        get(_target, prop) {\n            throwIfProxyReleased(isProxyReleased);\n            if (prop === releaseProxy) {\n                return () => {\n                    unregisterProxy(proxy);\n                    releaseEndpoint(ep);\n                    pendingListeners.clear();\n                    isProxyReleased = true;\n                };\n            }\n            if (prop === \"then\") {\n                if (path.length === 0) {\n                    return { then: () => proxy };\n                }\n                const r = requestResponseMessage(ep, pendingListeners, {\n                    type: \"GET\" /* MessageType.GET */,\n                    path: path.map((p) => p.toString()),\n                }).then(fromWireValue);\n                return r.then.bind(r);\n            }\n            return createProxy(ep, pendingListeners, [...path, prop]);\n        },\n        set(_target, prop, rawValue) {\n            throwIfProxyReleased(isProxyReleased);\n            // FIXME: ES6 Proxy Handler `set` methods are supposed to return a\n            // boolean. To show good will, we return true asynchronously ¯\\_(ツ)_/¯\n            const [value, transferables] = toWireValue(rawValue);\n            return requestResponseMessage(ep, pendingListeners, {\n                type: \"SET\" /* MessageType.SET */,\n                path: [...path, prop].map((p) => p.toString()),\n                value,\n            }, transferables).then(fromWireValue);\n        },\n        apply(_target, _thisArg, rawArgumentList) {\n            throwIfProxyReleased(isProxyReleased);\n            const last = path[path.length - 1];\n            if (last === createEndpoint) {\n                return requestResponseMessage(ep, pendingListeners, {\n                    type: \"ENDPOINT\" /* MessageType.ENDPOINT */,\n                }).then(fromWireValue);\n            }\n            // We just pretend that `bind()` didn’t happen.\n            if (last === \"bind\") {\n                return createProxy(ep, pendingListeners, path.slice(0, -1));\n            }\n            const [argumentList, transferables] = processArguments(rawArgumentList);\n            return requestResponseMessage(ep, pendingListeners, {\n                type: \"APPLY\" /* MessageType.APPLY */,\n                path: path.map((p) => p.toString()),\n                argumentList,\n            }, transferables).then(fromWireValue);\n        },\n        construct(_target, rawArgumentList) {\n            throwIfProxyReleased(isProxyReleased);\n            const [argumentList, transferables] = processArguments(rawArgumentList);\n            return requestResponseMessage(ep, pendingListeners, {\n                type: \"CONSTRUCT\" /* MessageType.CONSTRUCT */,\n                path: path.map((p) => p.toString()),\n                argumentList,\n            }, transferables).then(fromWireValue);\n        },\n    });\n    registerProxy(proxy, ep);\n    return proxy;\n}\nfunction myFlat(arr) {\n    return Array.prototype.concat.apply([], arr);\n}\nfunction processArguments(argumentList) {\n    const processed = argumentList.map(toWireValue);\n    return [processed.map((v) => v[0]), myFlat(processed.map((v) => v[1]))];\n}\nconst transferCache = new WeakMap();\nfunction transfer(obj, transfers) {\n    transferCache.set(obj, transfers);\n    return obj;\n}\nfunction proxy(obj) {\n    return Object.assign(obj, { [proxyMarker]: true });\n}\nfunction windowEndpoint(w, context = globalThis, targetOrigin = \"*\") {\n    return {\n        postMessage: (msg, transferables) => w.postMessage(msg, targetOrigin, transferables),\n        addEventListener: context.addEventListener.bind(context),\n        removeEventListener: context.removeEventListener.bind(context),\n    };\n}\nfunction toWireValue(value) {\n    for (const [name, handler] of transferHandlers) {\n        if (handler.canHandle(value)) {\n            const [serializedValue, transferables] = handler.serialize(value);\n            return [\n                {\n                    type: \"HANDLER\" /* WireValueType.HANDLER */,\n                    name,\n                    value: serializedValue,\n                },\n                transferables,\n            ];\n        }\n    }\n    return [\n        {\n            type: \"RAW\" /* WireValueType.RAW */,\n            value,\n        },\n        transferCache.get(value) || [],\n    ];\n}\nfunction fromWireValue(value) {\n    switch (value.type) {\n        case \"HANDLER\" /* WireValueType.HANDLER */:\n            return transferHandlers.get(value.name).deserialize(value.value);\n        case \"RAW\" /* WireValueType.RAW */:\n            return value.value;\n    }\n}\nfunction requestResponseMessage(ep, pendingListeners, msg, transfers) {\n    return new Promise((resolve) => {\n        const id = generateUUID();\n        pendingListeners.set(id, resolve);\n        if (ep.start) {\n            ep.start();\n        }\n        ep.postMessage(Object.assign({ id }, msg), transfers);\n    });\n}\nfunction generateUUID() {\n    return new Array(4)\n        .fill(0)\n        .map(() => Math.floor(Math.random() * Number.MAX_SAFE_INTEGER).toString(16))\n        .join(\"-\");\n}\n\nexport { createEndpoint, expose, finalizer, proxy, proxyMarker, releaseProxy, transfer, transferHandlers, windowEndpoint, wrap };\n//# sourceMappingURL=comlink.mjs.map\n","function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}\nexport { _typeof as default };","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nfunction toPropertyKey(t) {\n  var i = toPrimitive(t, \"string\");\n  return \"symbol\" == _typeof(i) ? i : i + \"\";\n}\nexport { toPropertyKey as default };","import _typeof from \"./typeof.js\";\nfunction toPrimitive(t, r) {\n  if (\"object\" != _typeof(t) || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != _typeof(i)) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}\nexport { toPrimitive as default };","import toPropertyKey from \"./toPropertyKey.js\";\nfunction _defineProperties(e, r) {\n  for (var t = 0; t < r.length; t++) {\n    var o = r[t];\n    o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, toPropertyKey(o.key), o);\n  }\n}\nfunction _createClass(e, r, t) {\n  return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", {\n    writable: !1\n  }), e;\n}\nexport { _createClass as default };","/**\n * Represents the log levels available for logging.\n */\nexport type WorkerLogLevel = 'info' | 'warning' | 'error' | 'debug' | 'trace';\n\n/**\n * WorkerLogger class for handling logging in a worker context.\n *\n * This logger allows for centralized logging from workers back to the main thread,\n * maintaining a consistent logging interface across the application.\n */\nclass WorkerLogger {\n  #prefix: string;\n\n  /**\n   * Creates an instance of WorkerLogger.\n   * @param {string} [prefix=''] - The prefix to be added to all log messages.\n   */\n  constructor(prefix: string = '') {\n    this.#prefix = prefix;\n  }\n\n  /**\n   * Internal method to send log messages to the main thread.\n   * @private\n   * @param {WorkerLogLevel} level - The log level of the message.\n   * @param {...unknown[]} args - The message and any additional arguments to log.\n   */\n  #log(level: WorkerLogLevel, ...args: unknown[]): void {\n    const message = this.#prefix ? [this.#prefix, ...args] : args;\n    // Send the log message to the main thread\n    // eslint-disable-next-line no-restricted-globals\n    self.postMessage({\n      type: 'log',\n      level,\n      message,\n    });\n  }\n\n  /**\n   * Logs an informational message.\n   * @param {...unknown[]} args - The message and any additional arguments to log.\n   */\n  logInfo(...args: unknown[]): void {\n    this.#log('info', ...args);\n  }\n\n  /**\n   * Logs a warning message.\n   * @param {...unknown[]} args - The message and any additional arguments to log.\n   */\n  logWarning(...args: unknown[]): void {\n    this.#log('warning', ...args);\n  }\n\n  /**\n   * Logs an error message.\n   * @param {...unknown[]} args - The message and any additional arguments to log.\n   */\n  logError(...args: unknown[]): void {\n    this.#log('error', ...args);\n  }\n\n  /**\n   * Logs a debug message.\n   * @param {...unknown[]} args - The message and any additional arguments to log.\n   */\n  logDebug(...args: unknown[]): void {\n    this.#log('debug', ...args);\n  }\n\n  /**\n   * Logs a trace message.\n   * @param {...unknown[]} args - The message and any additional arguments to log.\n   */\n  logTrace(...args: unknown[]): void {\n    this.#log('trace', ...args);\n  }\n}\n\n/**\n * Creates and returns a new WorkerLogger instance.\n * @param {string} [prefix] - Optional prefix for all log messages from this logger.\n * @returns {WorkerLogger} A new WorkerLogger instance.\n */\nexport const createWorkerLogger = (prefix?: string): WorkerLogger => new WorkerLogger(prefix);\n","function _classCallCheck(a, n) {\n  if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\");\n}\nexport { _classCallCheck as default };","import { expose } from 'comlink';\n\nimport Feature from 'ol/Feature';\nimport { createWorkerLogger } from '@/core/workers/helper/logger-worker';\n// import { OgcWmsLayerEntryConfig } from '@/core/utils/config/validation-classes/raster-validation-classes/ogc-wms-layer-entry-config';\n// import { EsriDynamicLayerEntryConfig } from '@/core/utils/config/validation-classes/raster-validation-classes/esri-dynamic-layer-entry-config';\n// import { VectorLayerEntryConfig } from '@/core/utils/config/validation-classes/vector-layer-entry-config';\n// import { TypeFeatureInfoEntry } from '@/geo/map/map-schema-types';\n// import { getFeatureCanvas } from '@/geo/utils/renderer/geoview-renderer';\n// import { AbstractGVLayer } from '@/geo/layer/gv-layers/abstract-gv-layer';\n// import { codedValueType, rangeDomainType, TypeOutfieldsType } from '@/api/config/types/map-schema-types';\nimport { TypeJsonObject } from '../types/global-types';\n\n// Initialize the worker logger\nconst logger = createWorkerLogger('format-feature-info-worker');\n\n/**\n * Converts the feature information to an array of TypeFeatureInfoEntry[] | undefined | null.\n * @param {Feature[]} features - The array of features to convert.\n * @param {AbstractGVLayer} layer - The layer.\n * @returns {Promise<TypeFeatureInfoEntry[] | undefined | null>} The Array of feature information.\n */\n// async function formatFeatureInfoResult(features: Feature[], layer: AbstractGVLayer): Promise<TypeFeatureInfoEntry[] | undefined | null> {\n//   const layerConfig = layer.getLayerConfig() as OgcWmsLayerEntryConfig | EsriDynamicLayerEntryConfig | VectorLayerEntryConfig;\n//   const outfields = layerConfig.source?.featureInfo?.outfields;\n\n//   // Loop on the features to build the array holding the promises for their canvas\n//   const promisedAllCanvasFound: Promise<{ feature: Feature; canvas: HTMLCanvasElement }>[] = [];\n//   features.forEach((featureNeedingItsCanvas) => {\n//     promisedAllCanvasFound.push(\n//       new Promise((resolveCanvas) => {\n//         // GV: Callback function was added by PR #1997 and removed by #2590\n//         // The PR added an AsyncSemaphore with a callback on geoview renderer to be able to fetch an image with a dataurl from the kernel function geoview-renderer.getFeatureCanvas()\n\n//         // GV: Call the function with layerConfig.legendFilterIsOff = true to force the feature to get is canvas\n//         // GV: If we don't, it will create canvas only for visible elements and because tables are stored feature will never get its canvas\n//         getFeatureCanvas(featureNeedingItsCanvas, layer.getStyle()!, layerConfig.filterEquation, true, true)\n//           .then((canvas) => {\n//             resolveCanvas({ feature: featureNeedingItsCanvas, canvas });\n//           })\n//           .catch((error) => {\n//             // Log\n//             logger.logError('getFeatureCanvas in featureNeedingItsCanvas loop in formatFeatureInfoResult in AbstractGVLayer', error);\n//           });\n//       })\n//     );\n//   });\n\n//   // Hold a dictionary built on the fly for the field domains\n//   const dictFieldDomains: { [fieldName: string]: codedValueType | rangeDomainType | null } = {};\n//   // Hold a dictionary build on the fly for the field types\n//   const dictFieldTypes: { [fieldName: string]: TypeOutfieldsType } = {};\n\n//   // Loop on the promised feature infos\n//   let featureKeyCounter = 0;\n//   let fieldKeyCounter = 0;\n//   const queryResult: TypeFeatureInfoEntry[] = [];\n//   const arrayOfFeatureInfo = await Promise.all(promisedAllCanvasFound);\n//   arrayOfFeatureInfo.forEach(({ feature, canvas }) => {\n//     let extent;\n//     if (feature.getGeometry()) extent = feature.getGeometry()!.getExtent();\n\n//     const featureInfoEntry: TypeFeatureInfoEntry = {\n//       // feature key for building the data-grid\n//       featureKey: featureKeyCounter++,\n//       geoviewLayerType: layerConfig.geoviewLayerConfig.geoviewLayerType,\n//       extent,\n//       geometry: feature,\n//       featureIcon: canvas.toDataURL(),\n//       fieldInfo: {},\n//       nameField: layerConfig.source?.featureInfo?.nameField || null,\n//     };\n\n//     const featureFields = feature.getKeys();\n//     featureFields.forEach((fieldName) => {\n//       if (fieldName !== 'geometry') {\n//         // Calculate the field domain if not already calculated\n//         if (!(fieldName in dictFieldDomains)) {\n//           // Calculate it\n//           dictFieldDomains[fieldName] = layer.getFieldDomain(fieldName);\n//         }\n//         const fieldDomain = dictFieldDomains[fieldName];\n\n//         // Calculate the field type if not already calculated\n//         if (!(fieldName in dictFieldTypes)) {\n//           dictFieldTypes[fieldName] = layer.getFieldType(fieldName);\n//         }\n//         const fieldType = dictFieldTypes[fieldName];\n//         const fieldEntry = outfields?.find((outfield) => outfield.name === fieldName || outfield.alias === fieldName);\n//         if (fieldEntry) {\n//           featureInfoEntry.fieldInfo[fieldEntry.name] = {\n//             fieldKey: fieldKeyCounter++,\n//             value:\n//               // If fieldName is the alias for the entry, we will not get a value, so we try the fieldEntry name.\n//               layer.getFieldValue(feature, fieldName, fieldEntry!.type as 'string' | 'number' | 'date') ||\n//               layer.getFieldValue(feature, fieldEntry.name, fieldEntry!.type as 'string' | 'number' | 'date'),\n//             dataType: fieldEntry!.type,\n//             alias: fieldEntry!.alias,\n//             domain: fieldDomain,\n//           };\n//         } else if (!outfields) {\n//           featureInfoEntry.fieldInfo[fieldName] = {\n//             fieldKey: fieldKeyCounter++,\n//             value: layer.getFieldValue(feature, fieldName, fieldType),\n//             dataType: fieldType,\n//             alias: fieldName,\n//             domain: fieldDomain,\n//           };\n//         }\n//       }\n//     });\n\n//     queryResult.push(featureInfoEntry);\n//   });\n\n//   return queryResult;\n// }\n\n/**\n * The main worker object containing methods for initialization and processing.\n */\nconst worker = {\n  /**\n   * Initializes the worker.\n   */\n  init(): void {\n    try {\n      logger.logTrace('FormatFeatureInfoWorker initialized');\n    } catch {\n      logger.logError('FormatFeatureInfoWorker failed to initialize');\n    }\n  },\n\n  //  /**\n  //  * Processes a feature info formatting request.\n  //  * @param {Feature[]} features - The array of features to convert.\n  //  * @param {AbstractGVLayer} layer - The layer.\n  //  * @returns {Promise<TypeFeatureInfoEntry[] | undefined | null>} The Array of feature information.\n  //  */\n  //  process(features: Feature[], layer: AbstractGVLayer): Promise<TypeFeatureInfoEntry[] | undefined | null> {\n  //   try {\n  //     logger.logTrace('Starting feature formatting');\n  //     const formattedFeatureInfo = formatFeatureInfoResult(features, layer);\n  //     logger.logTrace('Formatting completed');\n  //     return formattedFeatureInfo;\n  //   } catch (error) {\n  //     logger.logError('Feature formatting failed', error);\n  //     throw error;\n  //   }\n  // },\n\n  /**\n   * Processes a feature info formatting request.\n   * @param {Feature[]} features - The array of features to convert.\n   * @param {AbstractGVLayer} layer - The layer.\n   * @returns {Promise<TypeFeatureInfoEntry[] | undefined | null>} The Array of feature information.\n   */\n  process(features: Feature[]): Promise<TypeJsonObject> {\n    try {\n      logger.logTrace('Starting feature formatting');\n      // const formattedFeatureInfo = formatFeatureInfoResult(features);\n      logger.logTrace('Formatting completed');\n\n      const feats = [\n        {\n          featureKey: 0,\n          geoviewLayerType: 'point',\n          extent: undefined,\n          geometry: 'point',\n          featureIcon: 'icon',\n          fieldInfo: { test: 'test' },\n          nameField: null,\n        },\n      ];\n      logger.logTrace('Formatting completed', features);\n\n      return new Promise(() => {\n        // eslint-disable-next-line no-promise-executor-return\n        return feats;\n      });\n    } catch (error) {\n      logger.logError('Feature formatting failed', error);\n      throw error;\n    }\n  },\n};\n\n// Expose the worker methods to be accessible from the main thread\nexpose(worker);\nexport default {} as typeof Worker & { new (): Worker };\n"],"names":["proxyMarker","Symbol","createEndpoint","releaseProxy","finalizer","throwMarker","isObject","val","proxyTransferHandler","canHandle","serialize","obj","port1","port2","MessageChannel","expose","deserialize","port","start","ep","target","pendingListeners","Map","addEventListener","ev","data","id","resolver","get","delete","createProxy","wrap","transferHandlers","value","serialized","Error","isError","message","name","stack","Object","assign","globalThis","allowedOrigins","callback","origin","allowedOrigin","RegExp","test","isAllowedOrigin","console","warn","type","path","argumentList","map","fromWireValue","returnValue","parent","slice","reduce","prop","rawValue","apply","proxy","transfers","transferCache","set","transfer","undefined","Promise","resolve","catch","then","wireValue","transferables","toWireValue","postMessage","removeEventListener","closeEndPoint","error","TypeError","endpoint","constructor","isMessagePort","close","throwIfProxyReleased","isReleased","releaseEndpoint","requestResponseMessage","proxyCounter","WeakMap","proxyFinalizers","FinalizationRegistry","newCount","isProxyReleased","Proxy","_target","unregister","unregisterProxy","clear","length","r","p","toString","bind","_thisArg","rawArgumentList","last","processArguments","construct","register","registerProxy","processed","v","arr","Array","prototype","concat","handler","serializedValue","msg","fill","Math","floor","random","Number","MAX_SAFE_INTEGER","join","_typeof","o","iterator","toPropertyKey","t","i","e","toPrimitive","call","String","_defineProperties","enumerable","configurable","writable","defineProperty","key","WorkerLogger","prefix","arguments","a","n","_classCallCheck","_WorkerLogger_brand","_classPrivateFieldInitSpec","_prefix","_classPrivateFieldSet","this","_assertClassBrand2","_len","args","_key","_assertClassBrand","_log","_assertClassBrand3","_len2","_key2","_assertClassBrand4","_len3","_key3","_assertClassBrand5","_len4","_key4","_assertClassBrand6","_len5","_key5","level","_len6","_key6","_classPrivateFieldGet","self","logger","init","logTrace","_unused","logError","process","features","feats","featureKey","geoviewLayerType","extent","geometry","featureIcon","fieldInfo","nameField"],"sourceRoot":""}
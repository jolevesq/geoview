/*! Package:geoview-time-slider: 1.0.0 - "1f8704d11d6982445d5115bc515354be12f97073" - 2025-06-13T18:45:48.633Z */
"use strict";(self.webpackChunkgeoview_core=self.webpackChunkgeoview_core||[]).push([[405],{9498:(e,t,i)=>{i.a(e,(async(e,n)=>{try{i.d(t,{b:()=>v});var r=i(2085),a=i(61222),l=i(50062),o=i(69273),s=i(73854),c=i(50472),d=i(71376),u=i(53439),f=i(19587),p=i(74086),g=i(20635),h=i(97282),m=e([a,l,o,s,c,d,g]);function v(e){var t=e.mapId,i=e.configObj,n=window.cgpv.reactUtilities,m=n.useCallback,v=n.useMemo,y=n.useEffect,x=(0,o.wE)(),L=(0,l.ky)(),P=(0,l.h4)(),j=(0,l.Gg)().setSelectedLayerPath,w=(0,s.Yo)(),S=m((function(e){u.vF.logTraceUseCallback("TIME-SLIDER-PANEL - handleLayerList"),j(e.layerPath)}),[j]),b=function(e){if(e.filtering){var t=e.values,i=(0,r.A)(e.displayPattern,2),n=i[0],a=i[1];return 1===e.values.length?p.P.formatDatePattern(t[0],"day",a):"".concat(p.P.formatDatePattern(t[0],n,a)," / ").concat(p.P.formatDatePattern(t[1],n,a))}return null},k=v((function(){u.vF.logTraceUseMemo("TIME-SLIDER-PANEL - memoLayersList",L);return x.map((function(e){return{layerPath:e,layer:c.K.findLayerByPath(w,e),timeSliderLayerInfo:L[e]}})).filter((function(e){return e.layer&&e.timeSliderLayerInfo})).map((function(e){var i,n,r,a;return{layerName:null===(i=c.K.findLayerByPath(w,e.layerPath))||void 0===i?void 0:i.layerName,layerPath:e.layerPath,layerFeatures:b(e.timeSliderLayerInfo),tooltip:(r=e.timeSliderLayerInfo,a=(null===(n=c.K.findLayerByPath(w,e.layerPath))||void 0===n?void 0:n.layerName)||"",(0,h.jsxs)(d.Box,{sx:{display:"flex",alignContent:"center","& svg ":{width:"0.75em",height:"0.75em"}},children:[a,r.filtering&&": ".concat(b(r))]})),layerStatus:"loaded",queryStatus:"processed",layerUniqueId:"".concat(t,"-").concat(f.DF.TIME_SLIDER,"-").concat(e.layerPath)}}))}),[w,L,x,t]);y((function(){u.vF.logTraceUseEffect("TIME-SLIDER-PANEL - memoLayersList",k,P),P&&!k.map((function(e){return e.layerPath})).includes(P)&&j("")}),[k,P,j]);var T=m((function(e){e&&j("")}),[j]);return(0,h.jsx)(a.PE,{selectedLayerPath:P,onLayerListClicked:S,layerList:k,onGuideIsOpen:T,guideContentIds:["timeSlider"],children:P&&L&&P in L?(0,h.jsx)(g.p,{config:i,layerPath:P},P):null})}[a,l,o,s,c,d,g]=m.then?(await m)():m,n()}catch(y){n(y)}}))},20635:(e,t,i)=>{i.a(e,(async(e,n)=>{try{i.d(t,{p:()=>x});var r=i(88686),a=i(2085),l=i(71376),o=i(50062),s=i(73854),c=i(50472),d=i(17759),u=i(65212),f=i(53439),p=i(74086),g=i(40185),h=i(97282),m=e([l,o,s,c,d,u]);function v(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function y(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?v(Object(i),!0).forEach((function(t){(0,r.A)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):v(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function x(e){var t;f.vF.logTraceRender("geoview-time-slider/time-slider",e);var i=window.cgpv,n=e.config,r=e.layerPath,m=i.reactUtilities,v=i.ui,x=v.useTheme,L=m.useState,P=m.useRef,j=m.useEffect,w=m.useCallback,S=v.elements,b=S.Grid,k=S.Slider,T=S.Typography,M=S.Checkbox,A=S.Tooltip,D=S.IconButton,I=S.LockIcon,E=S.LockOpenIcon,C=S.ArrowLeftIcon,z=S.PlayArrowIcon,O=S.PauseIcon,V=S.ArrowRightIcon,F=S.SwitchRightIcon,R=S.SwitchLeftIcon,N=S.FormControl,B=S.InputLabel,U=S.NativeSelect,G=x(),H=(0,g.S)(G),Y=L(!1),K=(0,a.A)(Y,2),W=K[0],q=K[1],J=P(),_=P(),Z=P(),$=(0,o.Gg)(),Q=$.setTitle,X=$.setDefaultValue,ee=$.setDescription,te=$.setValues,ie=$.setLocked,ne=$.setReversed,re=$.setDelay,ae=$.setStep,le=$.setFiltering,oe=(0,u.t)(),se=(0,o.ky)()[r],ce=se.title,de=se.description,ue=se.defaultValue,fe=se.discreteValues,pe=se.step,ge=se.range,he=se.minAndMax,me=se.filtering,ve=se.singleHandle,ye=se.values,xe=se.delay,Le=se.locked,Pe=se.reversed,je=se.displayPattern,we=(0,s.Yo)(),Se=null===(t=c.K.findLayerByPath(we,r))||void 0===t?void 0:t.layerName,be=ge.map((function(e){return"number"!=typeof e?p.P.convertToMilliseconds(e):e})),ke=[];if(ge.length<4&&fe){var Te=(p.P.convertToMilliseconds(ge[ge.length-1])-p.P.convertToMilliseconds(ge[0]))/4;ke=[he[0],he[0]+Te,he[0]+2*Te,he[0]+3*Te,he[1]]}else ke=ge.length<6||ve?be:[he[0],p.P.convertToMilliseconds(ge[Math.round(ge.length/4)]),p.P.convertToMilliseconds(ge[Math.round(ge.length/2)]),p.P.convertToMilliseconds(ge[Math.round(3*ge.length/4)]),he[1]];for(var Me=[],Ae=0;Ae<ke.length;Ae++)Me.push({value:ke[Ae],label:void 0!==je[1]?p.P.formatDatePattern(ke[Ae],void 0,je[1]):p.P.formatDatePattern(ke[Ae],je[0],je[1])});var De=w((function(e){var t="forward"===e,i=t?1:-1;if(!ve||fe)if(ve){var n=pe||(he[1]-he[0])/20,l=ye[0]+n*i;te(r,[l>he[1]?he[0]:l<he[0]?he[1]:l])}else{var o=(0,a.A)(ye,2),s=o[0],c=o[1];if(c-s===he[1]-he[0])return Z.current=(he[1]-he[0])/10,void te(r,t?[s,s+Z.current]:[c-Z.current,c]);Z.current||(Z.current=c-s);var d=Z.current*i;if(Le&&Pe){if(s+=d,t&&s>=c||!t&&s<he[0])s=(0,a.A)(he,1)[0]}else if(Le){if(t&&c===he[1]&&(c=s),(c+=d)>he[1])c=(0,a.A)(he,2)[1];else!t&&c<s&&(c=s);if(!t&&c===s)c=(0,a.A)(he,2)[1]}else if(t){if(s<_.current&&c===_.current?s=_.current:s+=d,s>=he[1])s=(0,a.A)(he,1)[0];if((c=s+Z.current)>he[1])c=(0,a.A)(he,2)[1];c>_.current&&s<_.current&&(c=_.current)}else{if(c>_.current&&s===_.current?c=_.current:c+=d,c<=he[0])c=(0,a.A)(he,2)[1];if((s=c-Z.current)<he[0])s=(0,a.A)(he,1)[0];s<_.current&&c>_.current&&(s=_.current)}te(r,[s,c])}else{var u=be.indexOf(ye[0]),f=u===(t?be.length-1:0)?t?0:be.length-1:u+i;te(r,[be[f]])}}),[fe,r,Le,he,Pe,te,ve,pe,be,ye]),Ie=w((function(){De("back")}),[De]),Ee=w((function(){De("forward")}),[De]);j((function(){var e;f.vF.logTraceUseEffect("TIME-SLIDER - mount");var t=null==n||null===(e=n.sliders)||void 0===e?void 0:e.find((function(e){return e.layerPaths.includes(r)}));void 0===ce&&Q(r,(null==t?void 0:t.title)||""),void 0===de&&ee(r,(null==t?void 0:t.description)||""),void 0===Le&&ie(r,void 0!==(null==t?void 0:t.locked)&&(null==t?void 0:t.locked)),void 0===Pe&&ne(r,void 0!==(null==t?void 0:t.reversed)&&(null==t?void 0:t.reversed)),void 0===ue&&X(r,(null==t?void 0:t.defaultValue)||"")}),[]),j((function(){var e;f.vF.logTraceUseEffect("TIME-SLIDER - config layerPath",n,r);var t=null==n||null===(e=n.sliders)||void 0===e?void 0:e.find((function(e){return e.layerPaths.includes(r)}));null!=t&&t.defaultValue&&(Array.isArray(null==t?void 0:t.defaultValue)?te(r,[p.P.convertToMilliseconds(null==t?void 0:t.defaultValue[0]),p.P.convertToMilliseconds(null==t?void 0:t.defaultValue[1])]):ge.includes(null==t?void 0:t.defaultValue)?te(r,[p.P.convertToMilliseconds(null==t?void 0:t.defaultValue)]):te(r,[p.P.convertToMilliseconds(ge[0])]))}),[n,r,ge,le,te]),j((function(){f.vF.logTraceUseEffect("TIME-SLIDER - values filtering",ye,me),W&&(J.current=Pe?window.setTimeout(Ie,xe):window.setTimeout(Ee,xe))}),[ye,me,Pe,Le]),j((function(){f.vF.logTraceUseEffect("TIME-SLIDER - isPlaying",W),W&&(Pe?Ie():Ee())}),[W]);var Ce=w((function(){_.current=Pe?ye[1]:ye[0],Ie()}),[Ie,Pe,ye]),ze=w((function(){var e=(0,a.A)(ye,1);_.current=e[0],Ee()}),[Ee,ye]),Oe=w((function(){clearTimeout(J.current),ie(r,!Le)}),[r,Le,ie]),Ve=w((function(){clearTimeout(J.current),_.current=Pe?ye[1]:ye[0],q(!W)}),[W,Pe,ye]),Fe=w((function(){clearTimeout(J.current),ne(r,!Pe),W&&(Pe?Ie():Ee())}),[W,r,Ie,Ee,Pe,ne]),Re=w((function(e){re(r,e.target.value)}),[r,re]),Ne=w((function(e){ae(r,Number(e.target.value))}),[r,ae]),Be=w((function(e,t){le(r,t),t||(clearInterval(J.current),q(!1))}),[r,le]),Ue=w((function(e){f.vF.logTraceUseCallback("TIME-SLIDER - handleSliderChange",r),clearTimeout(J.current),q(!1),Z.current=void 0,te(r,e)}),[r,te]),Ge=w((function(e){return f.vF.logTraceUseCallback("TIME-SLIDER - handleLabelFormat",je),p.P.formatDatePattern(ye[0],je[0],je[1]),p.P.formatDatePattern(e,je[0],je[1])}),[je,ye]);function He(){return Pe?Le?(0,d.getLocalizedMessage)(oe,"timeSlider.slider.unlockRight"):(0,d.getLocalizedMessage)(oe,"timeSlider.slider.lockRight"):Le?(0,d.getLocalizedMessage)(oe,"timeSlider.slider.unlockLeft"):(0,d.getLocalizedMessage)(oe,"timeSlider.slider.lockLeft")}return(0,h.jsx)(b,{children:(0,h.jsxs)(l.Box,{sx:{padding:"10px 10px"},children:[(0,h.jsxs)(b,{container:!0,sx:y(y({},H.rightPanelBtnHolder),{},{flexWrap:"nowrap"}),children:[(0,h.jsx)(b,{size:{xs:9},children:(0,h.jsxs)(T,{component:"div",sx:y(y({},H.panelHeaders),{},{paddingLeft:"20px",paddingTop:"10px"}),children:["".concat(ce||Se),void 0===je[0]&&" (".concat(p.P.formatDate(ue,"YYYY-MM-DD"),")")]})}),(0,h.jsx)(b,{size:{xs:3},children:(0,h.jsx)(l.Box,{sx:{textAlign:"right",marginRight:"25px"},children:(0,h.jsx)(A,{title:me?(0,d.getLocalizedMessage)(oe,"timeSlider.slider.disableFilter"):(0,d.getLocalizedMessage)(oe,"timeSlider.slider.enableFilter"),placement:"top",enterDelay:1e3,children:(0,h.jsx)(M,{checked:me,onChange:Be})})})})]}),(0,h.jsx)(b,{size:{xs:12},children:(0,h.jsx)(l.Box,{sx:{textAlign:"center",paddingTop:"20px"},children:(0,h.jsx)(k,{style:{width:"80%",color:"primary"},min:he[0],max:he[1],value:ye,marks:Me,step:fe?pe||.1:null,onChangeCommitted:Ue,onValueLabelFormat:Ge},ye[1]?ye[1]+ye[0]:ye[0])})}),(0,h.jsx)(b,{size:{xs:12},children:(0,h.jsxs)(l.Box,{sx:{textAlign:"center",paddingTop:"20px"},children:[!ve&&(0,h.jsx)(D,{className:"buttonOutline","aria-label":He(),tooltip:He(),tooltipPlacement:"top",onClick:Oe,children:Le?(0,h.jsx)(I,{}):(0,h.jsx)(E,{})}),(0,h.jsx)(D,{className:"buttonOutline","aria-label":(0,d.getLocalizedMessage)(oe,"timeSlider.slider.back"),tooltip:(0,d.getLocalizedMessage)(oe,"timeSlider.slider.back"),tooltipPlacement:"top",disabled:W||!me,onClick:Ce,children:(0,h.jsx)(C,{})}),(0,h.jsx)(D,{className:"buttonOutline","aria-label":W?(0,d.getLocalizedMessage)(oe,"timeSlider.slider.pauseAnimation"):(0,d.getLocalizedMessage)(oe,"timeSlider.slider.playAnimation"),tooltip:W?(0,d.getLocalizedMessage)(oe,"timeSlider.slider.pauseAnimation"):(0,d.getLocalizedMessage)(oe,"timeSlider.slider.playAnimation"),tooltipPlacement:"top",disabled:!me,onClick:Ve,children:W?(0,h.jsx)(O,{}):(0,h.jsx)(z,{})}),(0,h.jsx)(D,{className:"buttonOutline","aria-label":(0,d.getLocalizedMessage)(oe,"timeSlider.slider.forward"),tooltip:(0,d.getLocalizedMessage)(oe,"timeSlider.slider.forward"),tooltipPlacement:"top",disabled:W||!me,onClick:ze,children:(0,h.jsx)(V,{})}),(0,h.jsx)(D,{className:"buttonOutline","aria-label":(0,d.getLocalizedMessage)(oe,"timeSlider.slider.changeDirection"),tooltip:(0,d.getLocalizedMessage)(oe,"timeSlider.slider.changeDirection"),tooltipPlacement:"top",onClick:Fe,children:Pe?(0,h.jsx)(F,{}):(0,h.jsx)(R,{})}),(0,h.jsx)(D,{className:"buttonOutline","aria-label":(0,d.getLocalizedMessage)(oe,"timeSlider.slider.forward"),title:(0,d.getLocalizedMessage)(oe,"timeSlider.slider.forward"),disabled:W||!me,onClick:ze,children:(0,h.jsx)(V,{})}),(0,h.jsx)(D,{className:"buttonOutline","aria-label":(0,d.getLocalizedMessage)(oe,"timeSlider.slider.changeDirection"),title:(0,d.getLocalizedMessage)(oe,"timeSlider.slider.changeDirection"),onClick:Fe,children:Pe?(0,h.jsx)(F,{}):(0,h.jsx)(R,{})}),(0,h.jsx)(l.Box,{component:"span",sx:{paddingLeft:"10px"},children:(0,h.jsxs)(N,{sx:{width:"100px"},children:[(0,h.jsx)(B,{variant:"standard",children:(0,d.getLocalizedMessage)(oe,"timeSlider.slider.timeDelay")}),(0,h.jsxs)(U,{defaultValue:xe,inputProps:{name:"timeDelay",onChange:Re},children:[(0,h.jsx)("option",{value:500,children:"0.5s"}),(0,h.jsx)("option",{value:750,children:"0.75s"}),(0,h.jsx)("option",{value:1e3,children:"1.0s"}),(0,h.jsx)("option",{value:1500,children:"1.5s"}),(0,h.jsx)("option",{value:2e3,children:"2.0s"}),(0,h.jsx)("option",{value:3e3,children:"3.0s"}),(0,h.jsx)("option",{value:5e3,children:"5.0s"})]})]})}),ve&&fe&&(0,h.jsx)(l.Box,{component:"span",sx:{paddingLeft:"10px"},children:(0,h.jsxs)(N,{sx:{width:"100px"},children:[(0,h.jsx)(B,{variant:"standard",children:(0,d.getLocalizedMessage)(oe,"timeSlider.slider.stepValue")}),(0,h.jsxs)(U,{defaultValue:pe,inputProps:{name:"timeStep",onChange:Ne},children:[(0,h.jsx)("option",{value:36e5,children:(0,d.getLocalizedMessage)(oe,"timeSlider.slider.hour")}),(0,h.jsx)("option",{value:864e5,children:(0,d.getLocalizedMessage)(oe,"timeSlider.slider.day")}),(0,h.jsx)("option",{value:6048e5,children:(0,d.getLocalizedMessage)(oe,"timeSlider.slider.week")}),(0,h.jsx)("option",{value:2592e6,children:(0,d.getLocalizedMessage)(oe,"timeSlider.slider.month")}),(0,h.jsx)("option",{value:31536e6,children:(0,d.getLocalizedMessage)(oe,"timeSlider.slider.year")})]})]})})]})}),de&&(0,h.jsx)(b,{size:{xs:12},children:(0,h.jsx)(T,{component:"div",sx:{px:"20px",py:"5px"},children:de})})]})})}[l,o,s,c,d,u]=m.then?(await m)():m,n()}catch(L){n(L)}}))},40185:(e,t,i)=>{i.d(t,{S:()=>n});var n=function(e){return{panelHeaders:{fontSize:e.palette.geoViewFontSize.lg,fontWeight:"600",marginBottom:"20px"},rightPanelBtnHolder:{marginTop:"20px",marginBottom:"9px",boxShadow:"0px 12px 9px -13px #E0E0E0"}}}},58938:e=>{e.exports={sliders:[]}},66844:e=>{e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","title":"GeoView Time Slider Config Schema","type":"object","version":1,"comments":"Configuration for GeoView time slider package.","additionalProperties":false,"properties":{"sliders":{"type":"array","items":{"type":"object","properties":{"title":{"type":"string","default":"Time slider title","description":"The title to display"},"description":{"type":"string","default":"Time slider description","description":"The description to use."},"locked":{"type":"boolean","default":false,"description":"Lock handle"},"reversed":{"type":"boolean","default":false,"description":"Reverse direction of the slider animation"},"defaultValue":{"type":"string","default":false,"description":"Initial value on slider"}}}}},"required":["sliders"]}')},74484:(e,t,i)=>{i.a(e,(async(e,t)=>{try{var n=i(79828),r=i(73674),a=i(29073),l=i(41615),o=i(3046),s=i(80860),c=i(39661),d=i(25020),u=i(71376),f=i(7701),p=i(10240),g=i(60296),h=i(9498),m=i(66844),v=i(58938),y=i(97282),x=e([d,u,p,g,h]);function j(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(j=function(){return!!e})()}function w(e,t,i,n){var r=(0,o.A)((0,l.A)(1&n?e.prototype:e),t,i);return 2&n&&"function"==typeof r?function(e){return r.apply(i,e)}:r}function S(e,t){b(e,t),t.add(e)}function b(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function k(e,t,i){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:i;throw new TypeError("Private element is not present on this object")}[d,u,p,g,h]=x.then?(await x)():x;var L=new WeakSet,P=function(e){function t(){var e,i,r,o;(0,n.A)(this,t);for(var s=arguments.length,c=new Array(s),d=0;d<s;d++)c[d]=arguments[d];return i=this,r=t,o=[].concat(c),r=(0,l.A)(r),S(e=(0,a.A)(i,j()?Reflect.construct(r,o||[],(0,l.A)(i).constructor):r.apply(i,o)),L),e}return(0,s.A)(t,e),(0,r.A)(t,[{key:"schema",value:function(){return m}},{key:"defaultConfig",value:function(){return(0,c.N)(v)}},{key:"defaultTranslations",value:function(){return{en:{timeSlider:{title:"Time Slider",panel:{noLayers:"No layers with temporal data"},slider:{unlockRight:"Unlock right handle",unlockLeft:"Unlock left handle",lockRight:"Lock right handle",lockLeft:"Lock left handle",disableFilter:"Disable Time Filtering",enableFilter:"Enable Time Filtering",pauseAnimation:"Pause animation",playAnimation:"Play animation",back:"Back",forward:"Forward",changeDirection:"Change animation direction",timeDelay:"Animation delay",stepValue:"Step value",hour:"Hour",day:"Day",week:"Week",month:"Month",year:"Year"}}},fr:{timeSlider:{title:"Curseur Temporel",panel:{noLayers:"Pas de couches avec des données temporelles"},slider:{unlockRight:"Déverrouiller la poignée droite",unlockLeft:"Déverrouiller la poignée gauche",lockRight:"Verrouiller la poignée droite",lockLeft:"Verrouiller la poignée gauche",disableFilter:"Désactiver le filtrage temporel",enableFilter:"Activer le filtrage temporel",pauseAnimation:"Pause de l'animation",playAnimation:"Jouer l'animation",back:"Retour",forward:"En avant",changeDirection:"Changer la direction de l'animation",timeDelay:"Délai d'animation",stepValue:"Valeur du saut",hour:"Heure",day:"Jour",week:"Semaine",month:"Mois",year:"Année"}}}}}},{key:"getConfig",value:function(){return w(t,"getConfig",this,3)([])}},{key:"onCreateContentProps",value:function(){return{id:"time-slider",value:this.value,label:"timeSlider.title",icon:(0,y.jsx)(u.TimeSliderIcon,{}),content:(0,y.jsx)(h.b,{mapId:this.pluginProps.mapId,configObj:this.getConfig()})}}},{key:"onAdd",value:function(){var e=this;this.mapViewer().mapLayersLoaded?this.initTimeSliderPlugin():this.mapViewer().onMapLayersLoaded((function(){e.initTimeSliderPlugin()})),w(t,"onAdd",this,3)([])}},{key:"initTimeSliderPlugin",value:function(){var e=this,t=this.mapViewer().layer.getLayerEntryConfigIds(),i=k(L,this,T).call(this,t);i&&i.forEach((function(t){var i=e.mapViewer().layer.getGeoviewLayer(t);if(!(i instanceof d.Z))throw new g.v6(t,null==i?void 0:i.getLayerName());var n=i.getLayerConfig();p.t.checkInitTimeSliderLayerAndApplyFilters(e.pluginProps.mapId,i,n)}))}}])}(f.b);function T(e){var t=this;return e.filter((function(e){var i=t.mapViewer().layer.getGeoviewLayer(e);if(i instanceof d.Z)return i.getTemporalDimension()}))}window.geoviewPlugins=window.geoviewPlugins||{},window.geoviewPlugins["time-slider"]=P,t()}catch(M){t(M)}}))}},e=>{var t;t=74484,e(e.s=t)}]);
//# sourceMappingURL=geoview-time-slider.js.map
/*! Package:geoview-test-suite: 2.0.2 - "afa6cb91ef1d248d2443f6fd5876fc403259ca2f" - 2025-12-03T18:34:22.244Z */
"use strict";(self.webpackChunkgeoview_core=self.webpackChunkgeoview_core||[]).push([[733],{10512:(e,t,r)=>{r.a(e,async(e,n)=>{try{r.d(t,{d:()=>A});var a=r(80171),i=r(64477),o=r(43549),s=r(51310),u=r(54074),c=r(75509),p=r(50124),f=r.n(p),l=r(95168),h=r(17562),d=e([l]),y=d.then?(await d)():d;function v(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(v=function(){return!!e})()}function E(e,t,r){S(e,t),t.set(e,r)}function S(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function L(e,t){return e.get(w(e,t))}function w(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}l=y[0];var g=new WeakMap,A=function(e){function t(e,r){var n,a,o,c,p,f,h;return(0,i.A)(this,t),a=this,o=t,c=[e,r],o=(0,u.A)(o),E(n=(0,s.A)(a,v()?Reflect.construct(o,c||[],(0,u.A)(a).constructor):o.apply(a,c)),g,void 0),p=g,f=n,h=new l.q(e,r),p.set(w(p,f),h),n.addTester(L(g,n)),n}return(0,c.A)(t,e),(0,o.A)(t,[{key:"getName",value:function(){return"Map Varia Test Suite"}},{key:"getDescriptionAsHtml",value:function(){return"Test Suite to perform various map related tests."}},{key:"onLaunchTestSuite",value:(r=(0,a.A)(f().mark(function e(){var t,r,n,a;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=L(g,this).testMapState(),r=L(g,this).testMapZoom(5,500),e.next=1,r;case 1:return n=L(g,this).testSwitchProjectionAndExtent(3978,3857,1),a=L(g,this).testGeometryGroupZIndex(),e.abrupt("return",Promise.all([t,r,n,a]));case 2:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})}]);var r}(h.e);n()}catch(I){n(I)}})},17562:(e,t,r)=>{r.d(t,{e:()=>B});var n=r(64477),a=r(43549),i=r(51310),o=r(54074),s=r(75509),u=r(10379),c=r(80171),p=r(50124),f=r.n(p),l=r(89778),h=r(24469);function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach(function(t){(0,u.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function g(e,t,r){A(e,t),t.set(e,r)}function A(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function v(e,t){return e.get(E(e,t))}function E(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}var S=new WeakMap,L=new WeakMap,w=new WeakMap,I=new WeakMap,_=new WeakMap,T=new WeakSet,O=function(){return(0,a.A)(function e(){var t,r;(0,n.A)(this,e),A(t=this,r=T),r.add(t),g(this,S,[]),g(this,L,[]),g(this,w,[]),g(this,I,[]),g(this,_,[])},[{key:"getTestsTotal",value:function(){return v(S,this).reduce(function(e,t){return e+t.getTestsTotal()},0)}},{key:"getTestsRunning",value:function(){return v(S,this).reduce(function(e,t){return e+t.getTestsRunning()},0)}},{key:"getTestsDone",value:function(){return v(S,this).reduce(function(e,t){return e+t.getTestsDone()},0)}},{key:"getTestsDoneSuccess",value:function(){return v(S,this).reduce(function(e,t){return e+t.getTestsDoneSuccess()},0)}},{key:"getTestsDoneFailed",value:function(){return v(S,this).reduce(function(e,t){return e+t.getTestsDoneFailed()},0)}},{key:"getTestsDoneAll",value:function(){return v(S,this).every(function(e){return e.getTestsDoneAll()})}},{key:"getTestsDoneAllSuccess",value:function(){return this.getTestsDoneAll()&&v(S,this).every(function(e){return e.getTestsDoneAllSuccess()})}},{key:"addTester",value:function(e){v(S,this).push(e),e.onStarted(E(T,this,m).bind(this)),e.onStepUpdated(E(T,this,R).bind(this)),e.onSuccess(E(T,this,C).bind(this)),e.onFailure(E(T,this,k).bind(this))}},{key:"launchTestSuite",value:(e=(0,c.A)(f().mark(function e(){return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.getTestsRunning()>0)){e.next=1;break}throw new h.sH("The Test Suite is already running, please wait to prevent errors.");case 1:return e.next=2,this.onCanExecuteTestSuite();case 2:if(e.sent){e.next=3;break}throw new h.tL;case 3:return e.abrupt("return",this.onLaunchTestSuite());case 4:case"end":return e.stop()}},e,this)})),function(){return e.apply(this,arguments)})},{key:"resetTestSuite",value:function(){if(this.getTestsRunning()>0)throw new h.sH("The Test Suite is running, please wait to prevent errors.");v(S,this).forEach(function(e){return e.resetTests()})}},{key:"onCanExecuteTestSuite",value:function(){return Promise.resolve(!0)}},{key:"onTestStarted",value:function(e){l.A.onEvent(v(L,this),e)}},{key:"offTestStarted",value:function(e){l.A.offEvent(v(L,this),e)}},{key:"onTestUpdated",value:function(e){l.A.onEvent(v(w,this),e)}},{key:"offTestUpdated",value:function(e){l.A.offEvent(v(w,this),e)}},{key:"onSuccess",value:function(e){l.A.onEvent(v(I,this),e)}},{key:"offSuccess",value:function(e){l.A.offEvent(v(I,this),e)}},{key:"onFailure",value:function(e){l.A.onEvent(v(_,this),e)}},{key:"offFailure",value:function(e){l.A.offEvent(v(_,this),e)}}]);var e}();function m(e,t){E(T,this,M).call(this,y(y({},t),{},{tester:e}))}function R(e,t){E(T,this,V).call(this,y(y({},t),{},{tester:e}))}function C(e,t){E(T,this,N).call(this,y(y({},t),{},{tester:e}))}function k(e,t){E(T,this,D).call(this,y(y({},t),{},{tester:e}))}function M(e){l.A.emitEvent(this,v(L,this),e)}function V(e){l.A.emitEvent(this,v(w,this),e)}function N(e){l.A.emitEvent(this,v(I,this),e)}function D(e){l.A.emitEvent(this,v(_,this),e)}function F(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(F=function(){return!!e})()}function U(e,t,r){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.set(e,r)}function G(e,t){return e.get(b(e,t))}function x(e,t,r){return e.set(b(e,t),r),r}function b(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}var W=new WeakMap,P=new WeakMap,B=function(e){function t(e,r){var a,s,u,c;return(0,n.A)(this,t),s=this,u=t,u=(0,o.A)(u),U(a=(0,i.A)(s,F()?Reflect.construct(u,c||[],(0,o.A)(s).constructor):u.apply(s,c)),W,void 0),U(a,P,void 0),x(W,a,e),x(P,a,r),a}return(0,s.A)(t,e),(0,a.A)(t,[{key:"getApi",value:function(){return G(W,this)}},{key:"getMapViewer",value:function(){return G(P,this)}},{key:"getMapId",value:function(){return G(P,this).mapId}}])}(O)},22781:(e,t,r)=>{r.a(e,async(e,n)=>{try{r.d(t,{c:()=>I});var a=r(80171),i=r(64477),o=r(43549),s=r(50124),u=r.n(s),c=r(89778),p=r(73906),f=r(54039),l=r(97077),h=e([p,f]);function _(e,t,r){T(e,t),t.set(e,r)}function T(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function O(e,t,r){return e.set(R(e,t),r),r}function m(e,t){return e.get(R(e,t))}function R(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}[p,f]=h.then?(await h)():h;var d=new WeakMap,y=new WeakMap,g=new WeakMap,A=new WeakMap,v=new WeakMap,E=new WeakMap,S=new WeakMap,L=new WeakMap,w=new WeakSet,I=function(){return(0,o.A)(function e(){var t,r;(0,i.A)(this,e),T(t=this,r=w),r.add(t),_(this,d,[]),_(this,y,[]),_(this,g,[]),_(this,A,[]),_(this,v,[]),_(this,E,[]),_(this,S,[]),_(this,L,[])},[{key:"getTestsTotal",value:function(){return m(E,this).length}},{key:"getTestsRunning",value:function(){return m(S,this).length}},{key:"getTestsDone",value:function(){return m(L,this).length}},{key:"getTestsDoneSuccess",value:function(){return m(L,this).filter(function(e){return"success"===e.getStatus()}).length}},{key:"getTestsDoneFailed",value:function(){return this.getTestsDone()-this.getTestsDoneSuccess()}},{key:"getTestsDoneAll",value:function(){return this.getTestsDone()===this.getTestsTotal()}},{key:"getTestsDoneAllSuccess",value:function(){return this.getTestsDoneAll()&&m(E,this).every(function(e){return"success"===e.getStatus()})}},{key:"resetTests",value:function(){O(E,this,[]),O(S,this,[]),O(L,this,[])}},{key:"test",value:function(e,t,r,n){return R(w,this,C).call(this,e,t,r,n)}},{key:"testError",value:function(e,t,r,n,a){return R(w,this,M).call(this,e,t,r,n,a)}},{key:"onCreatingTest",value:function(e){var t=new f.V(e);return t.onStepChanged(R(w,this,F).bind(this)),t}},{key:"onPerformingTest",value:function(e){p.vF.logDebug("Testing ".concat(e.getTitle(),"...")),m(E,this).push(e),R(w,this,N).call(this,e),e.setStatus("running"),e.addStep("Running test...","major"),R(w,this,U).call(this,{test:e})}},{key:"onPerformingTestAssertions",value:function(e){e.setStatus("verifying"),e.addStep("Verifying assertions...","major")}},{key:"onPerformingTestStepChanged",value:function(e,t){R(w,this,G).call(this,{test:e,event:t})}},{key:"onPerformingTestSuccess",value:function(e,t){e.setStatus("success"),R(w,this,x).call(this,{test:e,result:t})}},{key:"onPerformingTestFailure",value:function(e,t,r){var n=e.getStatus(),a=t instanceof Error?t:new Error(String(t));e.setStatus("failed"),(!r||"failed"!==n)&&(e.setError(a),R(w,this,b).call(this,{test:e,error:a}))}},{key:"onPerformingTestFinalization",value:function(e,t){t&&e.addStep("Cleaning up...","major")}},{key:"onPerformingTestDone",value:function(e){R(w,this,D).call(this,e),e.addStep("Done","major","success"===e.getStatus()?"green":"red"),R(w,this,W).call(this,{test:e})}},{key:"onStarted",value:function(e){c.A.onEvent(m(d,this),e)}},{key:"offStarted",value:function(e){c.A.offEvent(m(d,this),e)}},{key:"onStepUpdated",value:function(e){c.A.onEvent(m(y,this),e)}},{key:"offStepUpdated",value:function(e){c.A.offEvent(m(y,this),e)}},{key:"onSuccess",value:function(e){c.A.onEvent(m(g,this),e)}},{key:"offSuccess",value:function(e){c.A.offEvent(m(g,this),e)}},{key:"onFailure",value:function(e){c.A.onEvent(m(A,this),e)}},{key:"offFailure",value:function(e){c.A.offEvent(m(A,this),e)}},{key:"onDone",value:function(e){c.A.onEvent(m(v,this),e)}},{key:"offDone",value:function(e){c.A.offEvent(m(v,this),e)}}])}();function C(e,t,r,n){return k.apply(this,arguments)}function k(){return(k=(0,a.A)(u().mark(function e(t,r,n,a){var i,o,s,c;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.onCreatingTest(t),e.prev=1,this.onPerformingTest(i),e.next=2,r(i);case 2:return o=e.sent,i.setResult(o),this.onPerformingTestAssertions(i),e.next=3,n(i,o);case 3:this.onPerformingTestSuccess(i,o),e.next=5;break;case 4:e.prev=4,s=e.catch(1),this.onPerformingTestFailure(i,s,!1);case 5:return e.prev=5,this.onPerformingTestFinalization(i,a),e.next=6,null==a?void 0:a(i);case 6:e.next=8;break;case 7:e.prev=7,c=e.catch(5),this.onPerformingTestFailure(i,c,!0);case 8:return this.onPerformingTestDone(i),e.abrupt("return",i);case 9:case"end":return e.stop()}},e,this,[[1,4],[5,7]])}))).apply(this,arguments)}function M(e,t,r,n,a){return V.apply(this,arguments)}function V(){return(V=(0,a.A)(u().mark(function e(t,r,n,a,i){var o,s,c,p,h;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(o=this.onCreatingTest(t)).setType("true-negative"),e.prev=1,this.onPerformingTest(o),s=void 0,e.prev=2,e.next=3,n(o);case 3:e.next=5;break;case 4:e.prev=4,c=e.catch(2),s=(0,l.Wk)(c),o.setResult(s);case 5:return this.onPerformingTestAssertions(o),o.addStep("Verifying the Error obtained is of the correct class type..."),f.V.assertIsErrorInstance(s,r),e.next=6,null==a?void 0:a(o,s);case 6:this.onPerformingTestSuccess(o,s),e.next=8;break;case 7:e.prev=7,p=e.catch(1),this.onPerformingTestFailure(o,p,!1);case 8:return e.prev=8,this.onPerformingTestFinalization(o,i),e.next=9,null==i?void 0:i(o);case 9:e.next=11;break;case 10:e.prev=10,h=e.catch(8),this.onPerformingTestFailure(o,h,!0);case 11:return this.onPerformingTestDone(o),e.abrupt("return",o);case 12:case"end":return e.stop()}},e,this,[[1,7],[2,4],[8,10]])}))).apply(this,arguments)}function N(e){m(S,this).push(e)}function D(e){var t=m(S,this).findIndex(function(t){return t.id===e.id});-1!==t&&m(S,this).splice(t,1),m(L,this).push(e)}function F(e,t){this.onPerformingTestStepChanged(e,t)}function U(e){c.A.emitEvent(this,m(d,this),e)}function G(e){c.A.emitEvent(this,m(y,this),e)}function x(e){c.A.emitEvent(this,m(g,this),e)}function b(e){c.A.emitEvent(this,m(A,this),e)}function W(e){c.A.emitEvent(this,m(v,this),e)}n()}catch(P){n(P)}})},24469:(e,t,r)=>{r.d(t,{DQ:()=>_,DR:()=>w,NM:()=>v,O3:()=>I,Ol:()=>E,QR:()=>R,UJ:()=>m,h5:()=>A,k6:()=>g,kY:()=>L,nQ:()=>T,sH:()=>h,tL:()=>d,xA:()=>l,z5:()=>O,zy:()=>S});var n=r(55940),a=r(43549),i=r(64477),o=r(51310),s=r(54074),u=r(75509),c=r(46990);function p(e,t,r){return t=(0,s.A)(t),(0,o.A)(e,f()?Reflect.construct(t,r||[],(0,s.A)(e).constructor):t.apply(e,r))}function f(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(f=function(){return!!e})()}var l=function(e){function t(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Test failed";return(0,i.A)(this,t),(e=p(this,t,[r])).name="TestError",Error.captureStackTrace&&Error.captureStackTrace(e,t),Object.setPrototypeOf(e,t.prototype),e}return(0,u.A)(t,e),(0,a.A)(t)}((0,c.A)(Error)),h=function(e){function t(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"The Test Suite is currently running.";return(0,i.A)(this,t),(e=p(this,t,[r])).name="TestSuiteRunningError",Error.captureStackTrace&&Error.captureStackTrace(e,t),Object.setPrototypeOf(e,t.prototype),e}return(0,u.A)(t,e),(0,a.A)(t)}((0,c.A)(Error)),d=function(e){function t(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"The Test Suite cannot be executed.";return(0,i.A)(this,t),(e=p(this,t,[r])).name="TestSuiteCannotExecuteError",Error.captureStackTrace&&Error.captureStackTrace(e,t),Object.setPrototypeOf(e,t.prototype),e}return(0,u.A)(t,e),(0,a.A)(t)}((0,c.A)(Error)),y=function(e){function t(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Assertion failed",n=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0;return(0,i.A)(this,t),(e=p(this,t,[r])).actual=n,e.expected=a,e.name="AssertionError",Error.captureStackTrace&&Error.captureStackTrace(e,t),Object.setPrototypeOf(e,t.prototype),e}return(0,u.A)(t,e),(0,a.A)(t)}((0,c.A)(Error)),g=function(e){function t(e,r){var n;return(0,i.A)(this,t),(n=p(this,t,["Value is '".concat(e,"', expected was '").concat(r,"'."),e,r])).name="AssertionValueError",Error.captureStackTrace&&Error.captureStackTrace(n,t),Object.setPrototypeOf(n,t.prototype),n}return(0,u.A)(t,e),(0,a.A)(t)}(y),A=function(e){function t(e){var r;return(0,i.A)(this,t),(r=p(this,t,["Value is not an array, got '".concat((0,n.A)(e),"'."),e,"Array"])).name="AssertionValueNotAnArrayError",Error.captureStackTrace&&Error.captureStackTrace(r,t),Object.setPrototypeOf(r,t.prototype),r}return(0,u.A)(t,e),(0,a.A)(t)}(y),v=function(e){function t(e){var r;return(0,i.A)(this,t),(r=p(this,t,["Value for '".concat(e,"' was undefined."),void 0,void 0])).name="AssertionUndefinedError",Error.captureStackTrace&&Error.captureStackTrace(r,t),Object.setPrototypeOf(r,t.prototype),r}return(0,u.A)(t,e),(0,a.A)(t)}(y),E=function(e){function t(e,r){var n;return(0,i.A)(this,t),(n=p(this,t,["Value for '".concat(e,"' was defined."),r,void 0])).name="AssertionDefinedError",Error.captureStackTrace&&Error.captureStackTrace(n,t),Object.setPrototypeOf(n,t.prototype),n}return(0,u.A)(t,e),(0,a.A)(t)}(y),S=function(e){function t(e,r){var n;return(0,i.A)(this,t),(n=p(this,t,["Value class instance is '".concat(e.constructor.name,"', expected was '").concat(r.name,"'."),e,r])).name="AssertionWrongInstanceError",Error.captureStackTrace&&Error.captureStackTrace(n,t),Object.setPrototypeOf(n,t.prototype),n}return(0,u.A)(t,e),(0,a.A)(t)}(y),L=function(e){function t(e){var r;return(0,i.A)(this,t),(r=p(this,t,["No error was thrown when an error '".concat(e.name,"' was expected."),void 0,e])).name="AssertionNoErrorThrownError",Error.captureStackTrace&&Error.captureStackTrace(r,t),Object.setPrototypeOf(r,t.prototype),r}return(0,u.A)(t,e),(0,a.A)(t)}(y),w=function(e){function t(e,r){var n;return(0,i.A)(this,t),(n=p(this,t,["Error '".concat(e.message,"' instance is '").concat(e.constructor.name,"', expected was '").concat(r.name,"'."),e,r])).name="AssertionWrongErrorInstanceError",Error.captureStackTrace&&Error.captureStackTrace(n,t),Object.setPrototypeOf(n,t.prototype),n}return(0,u.A)(t,e),(0,a.A)(t)}(y),I=function(e){function t(e,r){var n;return(0,i.A)(this,t),(n=p(this,t,["Array length is ".concat(e,", expected was ").concat(r),e,r])).name="AssertionArrayLengthError",Error.captureStackTrace&&Error.captureStackTrace(n,t),Object.setPrototypeOf(n,t.prototype),n}return(0,u.A)(t,e),(0,a.A)(t)}(y),_=function(e){function t(e,r){var n;return(0,i.A)(this,t),(n=p(this,t,["Array length is ".concat(e,", expected was at least ").concat(r),e,r])).name="AssertionArrayLengthMinimalError",Error.captureStackTrace&&Error.captureStackTrace(n,t),Object.setPrototypeOf(n,t.prototype),n}return(0,u.A)(t,e),(0,a.A)(t)}(y),T=function(e){function t(e,r){var n;return(0,i.A)(this,t),(n=p(this,t,["Array does not include ".concat(r),e,r])).name="AssertionArrayIncludingError",Error.captureStackTrace&&Error.captureStackTrace(n,t),Object.setPrototypeOf(n,t.prototype),n}return(0,u.A)(t,e),(0,a.A)(t)}(y),O=function(e){function t(e,r){var n;return(0,i.A)(this,t),(n=p(this,t,["Array includes ".concat(r),e,r])).name="AssertionArrayExcludingError",Error.captureStackTrace&&Error.captureStackTrace(n,t),Object.setPrototypeOf(n,t.prototype),n}return(0,u.A)(t,e),(0,a.A)(t)}(y),m=function(e){function t(e,r,n,a,o){var s;return(0,i.A)(this,t),(s=p(this,t,["The 2 provided arrays differ at position index ".concat(n,", expected value was '").concat(a,"' but found '").concat(o,"'."),r,e])).name="AssertionArraysNotEqualError",Error.captureStackTrace&&Error.captureStackTrace(s,t),Object.setPrototypeOf(s,t.prototype),s}return(0,u.A)(t,e),(0,a.A)(t)}(y),R=function(e){function t(e,r,n){var a;(0,i.A)(this,t),a=p(this,t,["JSON objects have different property/values than expected.",r,n]);var o=e.map(function(e){return"- ".concat(e)}).join("\n");return e&&(a.message+=" Mismatches are:\n".concat(o,".")),a.name="AssertionJSONObjectError",Error.captureStackTrace&&Error.captureStackTrace(a,t),Object.setPrototypeOf(a,t.prototype),a}return(0,u.A)(t,e),(0,a.A)(t)}(y)},31930:(e,t,r)=>{r.a(e,async(e,n)=>{try{r.d(t,{M:()=>j});var a=r(80171),i=r(10379),o=r(64477),s=r(43549),u=r(51310),c=r(54074),p=r(75509),f=r(50124),l=r.n(f),h=r(51294),d=r(54039),y=r(78887),g=r(9767),A=r(75338),v=r(49763),E=r(63357),S=r(57888),L=r(6813),w=r(67478),I=r(22938),_=r(7542),T=r(96338),O=r(95726),m=r(11381),R=r(37466),C=r(88833),k=r(94558),M=r(81473),V=r(84876),N=r(63207),D=r(64686),F=r(91675),U=r(77646),G=r(29266),x=r(44506),b=r(81288),W=r(17893),P=r(73906),B=e([h,d,y,g,A,v,E,S,L,w,I,_,T,O,m,R,C,k,M,V,N,D,F,U,G,x,b,W,P]);function Y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(r),!0).forEach(function(t){(0,i.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function K(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(K=function(){return!!e})()}[h,d,y,g,A,v,E,S,L,w,I,_,T,O,m,R,C,k,M,V,N,D,F,U,G,x,b,W,P]=B.then?(await B)():B;var j=function(e){function t(){return(0,o.A)(this,t),e=this,r=t,n=arguments,r=(0,c.A)(r),(0,u.A)(e,K()?Reflect.construct(r,n||[],(0,c.A)(e).constructor):r.apply(e,n));var e,r,n}return(0,p.A)(t,e),(0,s.A)(t,[{key:"getName",value:function(){return"ConfigTester"}},{key:"testEsriDynamicWithHistoricalFloodEvents",value:function(){var e=t.HISTORICAL_FLOOD_URL_MAP_SERVER;return this.testEsriDynamic("Test an Esri Dynamic with Historical Flood Events",e,{metadataAccessPath:e,listOfLayerEntryConfig:[{layerEntryProps:{layerName:t.HISTORICAL_FLOOD_LAYER_NAME}}]},C.q)}},{key:"testEsriDynamicWithCESI",value:function(){var e=t.CESI_MAP_SERVER;return this.testEsriDynamic("Test an Esri Dynamic with CESI",e,{metadataAccessPath:e,listOfLayerEntryConfig:[{layerEntryProps:{layerName:t.CESI_GROUP_0_LAYER_NAME}}]},k.x)}},{key:"testEsriDynamic",value:function(e,t,r,n){var a="gvLayerId",i="gvLayerName",o=z(z({},r),{},{geoviewLayerId:a,geoviewLayerName:i,geoviewLayerType:"esriDynamic"});return this.test(e,function(e){return e.addStep("Initializing config on url: "+t),g.z.initGeoviewLayerConfig(a,i,t)},function(e,t){e.addStep("Verifying expected config..."),d.V.assertJsonObject(t,o),e.addStep("Verifying 1st layer entry config...");var r=t.listOfLayerEntryConfig[0];d.V.assertIsInstance(r,n)})}},{key:"testEsriDynamicBadUrl",value:function(){var e=h.N.BAD_URL;return this.testError("Test an EsriDynamic config with a bad url...",y.cv,function(){var t=(0,a.A)(l().mark(function t(r){return l().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r.addStep("Creating the GeoView Layer Configuration..."),t.next=1,g.z.initGeoviewLayerConfig("gvLayerId","gvLayerName",e);case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())}},{key:"testEsriFeatureWithTorontoNeighbourhoods",value:function(){var e=t.FEATURE_SERVER_TORONTO_NEIGHBOURHOODS_URL;return this.testEsriFeature("Test an Esri Feature with Toronto Neighbourhoods",e,{metadataAccessPath:e,listOfLayerEntryConfig:[{layerEntryProps:{layerId:"0",layerName:t.FEATURE_SERVER_TORONTO_NEIGHBOURHOODS_LAYER_NAME}}]})}},{key:"testEsriFeatureWithHistoricalFloodEvents",value:function(){var e=t.HISTORICAL_FLOOD_URL_FEATURE_SERVER,r=t.HISTORICAL_FLOOD_URL_MAP_SERVER;return this.testEsriFeature("Test an Esri Feature with Historical Flood Events",e,{metadataAccessPath:r,listOfLayerEntryConfig:[{layerEntryProps:{layerId:"0",layerName:t.HISTORICAL_FLOOD_LAYER_NAME}}]})}},{key:"testEsriFeatureWithForestIndustry",value:function(){var e=t.FOREST_INDUSTRY_FEATURE_SERVER,r=t.FOREST_INDUSTRY_MAP_SERVER;return this.testEsriFeature("Test an Esri Feature with Forest Industry",e,{metadataAccessPath:r,listOfLayerEntryConfig:[{layerEntryProps:{layerId:"0",layerName:t.FOREST_INDUSTRY_LAYER_NAME}}]})}},{key:"testEsriFeature",value:function(e,t,r){var n="gvLayerId",a="gvLayerName",i=z(z({},r),{},{geoviewLayerId:n,geoviewLayerName:a,geoviewLayerType:"esriFeature"});return this.test(e,function(e){return e.addStep("Initializing config on url: "+t),A.U.initGeoviewLayerConfig(n,a,t)},function(e,t){e.addStep("Verifying expected config..."),d.V.assertJsonObject(t,i),e.addStep("Verifying 1st layer entry config...");var r=t.listOfLayerEntryConfig[0];d.V.assertIsInstance(r,R.h)})}},{key:"testEsriFeatureBadUrl",value:function(){var e=h.N.BAD_URL;return this.testError("Test an EsriFeature config with a bad url...",y.cv,function(){var t=(0,a.A)(l().mark(function t(r){return l().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r.addStep("Creating the GeoView Layer Configuration..."),t.next=1,A.U.initGeoviewLayerConfig("gvLayerId","gvLayerName",e);case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())}},{key:"testEsriImageWithElevation",value:function(){var e=t.IMAGE_SERVER_ELEVATION_URL;return this.testEsriImage("Test Esri Image with Elevation",e,{metadataAccessPath:e,listOfLayerEntryConfig:[{layerEntryProps:{layerId:t.IMAGE_SERVER_ELEVATION_LAYER_ID}}]})}},{key:"testEsriImage",value:function(e,t,r){var n="gvLayerId",a="gvLayerName",i=z(z({},r),{},{geoviewLayerId:n,geoviewLayerName:a,geoviewLayerType:"esriImage"});return this.test(e,function(e){return e.addStep("Initializing config on url: "+t),v.$.initGeoviewLayerConfig(n,a,t)},function(e,t){e.addStep("Verifying expected config..."),d.V.assertJsonObject(t,i),e.addStep("Verifying 1st layer entry config...");var r=t.listOfLayerEntryConfig[0];d.V.assertIsInstance(r,m.Q)})}},{key:"testEsriImageBadUrl",value:function(){var e=h.N.BAD_URL;return this.testError("Test an EsriImage config with a bad url...",y.cv,function(){var t=(0,a.A)(l().mark(function t(r){return l().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r.addStep("Creating the GeoView Layer Configuration..."),t.next=1,v.$.initGeoviewLayerConfig("gvLayerId","gvLayerName",e);case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())}},{key:"testWMSLayerWithOWSMundialis",value:function(){var e=t.OWS_MUNDIALIS,r="gvLayerId",n="OpenStreetMap WMS",a={geoviewLayerId:r,geoviewLayerType:"ogcWms",geoviewLayerName:n};return this.test("Test a WMS with OWS Mundialis",function(t){return t.addStep("Initializing config on url: "+e),E.G.initGeoviewLayerConfig(r,n,e,false)},function(e,t){e.addStep("Verifying expected config..."),d.V.assertJsonObject(t,a),e.addStep("Verifying 11 layer entries in the config..."),d.V.assertIsArrayLengthEqual(t.listOfLayerEntryConfig,11),e.addStep("Verifying 1st layer entry config...");var r=t.listOfLayerEntryConfig[0];d.V.assertIsInstance(r,M.Q),d.V.assertIsEqual(r.layerId,"OSM-WMS")})}},{key:"testWMSLayerWithDatacubeMSI",value:function(){var e=h.N.DATACUBE_MSI,t="gvLayerId",r="Layers / Couches",n={geoviewLayerId:t,geoviewLayerType:"ogcWms",geoviewLayerName:r};return this.test("Test a WMS with Datacube MSI",function(n){return n.addStep("Initializing config on url: "+e),E.G.initGeoviewLayerConfig(t,r,e,false)},function(e,t){e.addStep("Verifying expected config..."),d.V.assertJsonObject(t,n),e.addStep("Verifying 2 layer entries in the config..."),d.V.assertIsArrayLengthEqual(t.listOfLayerEntryConfig,2),e.addStep("Verifying 1st layer entry...");var r=t.listOfLayerEntryConfig[0];d.V.assertIsInstance(r,M.Q),d.V.assertIsEqual(r.layerId,h.N.DATACUBE_MSI_LAYER_NAME_MSI),e.addStep("Verifying 2nd layer entry...");var a=t.listOfLayerEntryConfig[1];d.V.assertIsInstance(a,M.Q),d.V.assertIsEqual(a.layerId,h.N.DATACUBE_MSI_LAYER_NAME_MSI_OR_MORE)})}},{key:"testWMSBadUrl",value:function(){var e=h.N.BAD_URL;return this.testError("Test a WMS config with a bad url...",y.rQ,function(){var t=(0,a.A)(l().mark(function t(r){return l().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r.addStep("Creating the GeoView Layer Configuration..."),t.next=1,E.G.initGeoviewLayerConfig("gvLayerId","gvLayerName",e,!1);case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())}},{key:"testWFSLayerWithGeometCurrentConditions",value:function(){var e=h.N.GEOMET_URL,t="gvLayerId",r="Current Conditions",n={geoviewLayerId:t,geoviewLayerType:"ogcWfs",geoviewLayerName:r};return this.test("Test a WFS with Geomet Current Conditions",function(n){return n.addStep("Initializing config on url: "+e),S.d.initGeoviewLayerConfig(t,r,e)},function(e,t){e.addStep("Verifying expected config..."),d.V.assertJsonObject(t,n),e.addStep("Verifying 92 layer entries in the config..."),d.V.assertIsArrayLengthEqual(t.listOfLayerEntryConfig,92),e.addStep("Verifying Current Conditions in the list...");var r=t.listOfLayerEntryConfig.find(function(e){return e.layerId===h.N.GEOMET_URL_CURRENT_COND_LAYER_ID});d.V.assertIsDefined("listOfLayerEntryConfig with Current Conditions",r),e.addStep("Verifying layer entry is of the right type..."),d.V.assertIsInstance(r,V.q)})}},{key:"testWFSBadUrl",value:function(){var e=h.N.BAD_URL;return this.testError("Test a WFS config with a bad url...",y.cv,function(){var t=(0,a.A)(l().mark(function t(r){return l().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r.addStep("Creating the GeoView Layer Configuration..."),t.next=1,S.d.initGeoviewLayerConfig("gvLayerId","gvLayerName",e);case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())}},{key:"testWFSOkayUrlNoCap",value:function(){var e=h.N.FAKE_URL_ALWAYS_RETURNING_RESPONSE_INSTEAD_OF_NETWORK_ERROR;return this.testError("Test a WFS config with a okay url but no capabilities...",y.rQ,function(){var t=(0,a.A)(l().mark(function t(r){return l().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r.addStep("Creating the GeoView Layer Configuration..."),t.next=1,S.d.initGeoviewLayerConfig("gvLayerId","gvLayerName",e);case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())}},{key:"testGeojsonWithMetadataMeta",value:function(){var e=h.N.GEOJSON_METADATA_META,t="gvLayerId",r="GeojsonLayer",n={geoviewLayerId:t,geoviewLayerType:"GeoJSON",geoviewLayerName:r};return this.test("Test a Geojson with metadata.meta file",function(n){return n.addStep("Initializing config on url: "+e),L.k.initGeoviewLayerConfig(t,r,e)},function(e,t){e.addStep("Verifying expected config..."),d.V.assertJsonObject(t,n),e.addStep("Verifying 1 layer entry in the config..."),d.V.assertIsArrayLengthEqual(t.listOfLayerEntryConfig,1),e.addStep("Verifying layer id in the list..."),d.V.assertIsEqual(t.listOfLayerEntryConfig[0].layerId,h.N.GEOJSON_METADATA_META_FILE),e.addStep("Verifying layer entry is of the right type..."),d.V.assertIsInstance(t.listOfLayerEntryConfig[0],N.d)})}},{key:"testGeoJSONBadUrlExpectSkip",value:function(){var e=h.N.BAD_URL;return this.test("Test a GeoJSON config with a bad url expecting a skip...",function(){var t=(0,a.A)(l().mark(function t(r){return l().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r.addStep("Creating the GeoView Layer Configuration..."),t.next=1,L.k.initGeoviewLayerConfig("gvLayerId","gvLayerName",e);case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),function(e){e.addStep("At this point, the metadata was skipped and that's as intended...")})}},{key:"testGeoJSONBadUrlExpectError",value:function(){return this.testError("Test a GeoJSON config with a bad url expecting a fail...",y.cv,function(){var e=(0,a.A)(l().mark(function e(t){return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.addStep("Creating the GeoView Layer Configuration..."),e.next=1,L.k.initGeoviewLayerConfig("gvLayerId","gvLayerName","https://badurl/oops/metadata.meta");case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())}},{key:"testCSVWithStationList",value:function(){var e=h.N.CSV_STATION_LIST,t="gvLayerId",r="CSVLayer",n={geoviewLayerId:t,geoviewLayerType:"CSV",geoviewLayerName:r};return this.test("Test a CSV with CSV file",function(n){return n.addStep("Initializing config on url: "+e),w.p.initGeoviewLayerConfig(t,r,e)},function(e,t){e.addStep("Verifying expected config..."),d.V.assertJsonObject(t,n),e.addStep("Verifying 1 layer entry in the config..."),d.V.assertIsArrayLengthEqual(t.listOfLayerEntryConfig,1),e.addStep("Verifying layer id in the list..."),d.V.assertIsEqual(t.listOfLayerEntryConfig[0].layerId,h.N.CSV_STATION_LIST_FILE),e.addStep("Verifying layer entry is of the right type..."),d.V.assertIsInstance(t.listOfLayerEntryConfig[0],D.A)})}},{key:"testCSVBadUrlExpectSkip",value:function(){var e=h.N.BAD_URL;return this.test("Test a CSV config with a bad url expecting a skip...",function(){var t=(0,a.A)(l().mark(function t(r){return l().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r.addStep("Creating the GeoView Layer Configuration..."),t.next=1,w.p.initGeoviewLayerConfig("gvLayerId","gvLayerName",e);case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),function(e){e.addStep("At this point, the metadata was skipped and that's as intended...")})}},{key:"testOGCFeatureWithPygeoapi",value:function(){var e=h.N.PYGEOAPI_B6RYUVAKK5,t="gvLayerId",r="OGCLayer",n={geoviewLayerId:t,geoviewLayerType:"ogcFeature",geoviewLayerName:r};return this.test("Test an OGC Feature with Pygeoapi",function(n){return n.addStep("Initializing config on url: "+e),I.k.initGeoviewLayerConfig(t,r,e)},function(e,t){e.addStep("Verifying expected config..."),d.V.assertJsonObject(t,n),e.addStep("Verifying 2 layer entry in the config..."),d.V.assertIsArrayLengthEqual(t.listOfLayerEntryConfig,2),e.addStep("Verifying layer id in the list..."),d.V.assertIsEqual(t.listOfLayerEntryConfig[0].layerId,h.N.PYGEOAPI_B6RYUVAKK5_LAKES),e.addStep("Verifying layer entry is of the right type..."),d.V.assertIsInstance(t.listOfLayerEntryConfig[0],F.j)})}},{key:"testOGCFeatureBadUrl",value:function(){var e=h.N.BAD_URL;return this.testError("Test an OGC Feature config with a bad url...",y.cv,function(){var t=(0,a.A)(l().mark(function t(r){return l().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r.addStep("Creating the GeoView Layer Configuration..."),t.next=1,I.k.initGeoviewLayerConfig("gvLayerId","gvLayerName",e);case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())}},{key:"testWKBWithSouthAfrica",value:function(){var e=h.N.WKB_SOUTH_AFRICA,t="gvLayerId",r="WKBLayer",n={geoviewLayerId:t,geoviewLayerType:"WKB",geoviewLayerName:r};return this.test("Test a WKB with South Africa",function(n){return n.addStep("Initializing config on url: "+e),_.F.initGeoviewLayerConfig(t,r,e)},function(e,t){e.addStep("Verifying expected config..."),d.V.assertJsonObject(t,n),e.addStep("Verifying 1 layer entry in the config..."),d.V.assertIsArrayLengthEqual(t.listOfLayerEntryConfig,1),e.addStep("Verifying layer id in the list..."),d.V.assertIsEqual(t.listOfLayerEntryConfig[0].layerId,h.N.WKB_SOUTH_AFRICA),e.addStep("Verifying layer entry is of the right type..."),d.V.assertIsInstance(t.listOfLayerEntryConfig[0],U.E)})}},{key:"testWKBBadUrlExpectFail",value:function(){return this.testError("Test a WKB config with a bad url...",y.cv,function(){var e=(0,a.A)(l().mark(function e(t){return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.addStep("Creating the GeoView Layer Configuration..."),e.next=1,_.F.initGeoviewLayerConfig("gvLayerId","gvLayerName","https://badurl/oops/metadata.meta");case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())}},{key:"testKMLWithTornado",value:function(){var e=h.N.KML_TORNADO,t="gvLayerId",r="KMLLayer",n={geoviewLayerId:t,geoviewLayerType:"KML",geoviewLayerName:r};return this.test("Test a KML with Tornado file",function(n){return n.addStep("Initializing config on url: "+e),T.z.initGeoviewLayerConfig(t,r,e)},function(e,t){e.addStep("Verifying expected config..."),d.V.assertJsonObject(t,n),e.addStep("Verifying 1 layer entry in the config..."),d.V.assertIsArrayLengthEqual(t.listOfLayerEntryConfig,1),e.addStep("Verifying layer id in the list..."),d.V.assertIsEqual(t.listOfLayerEntryConfig[0].layerId,h.N.KML_TORNADO_FILE),e.addStep("Verifying layer entry is of the right type..."),d.V.assertIsInstance(t.listOfLayerEntryConfig[0],G.o)})}},{key:"testKMLBadUrlExpectSkip",value:function(){var e=h.N.BAD_URL;return this.test("Test a KML config with a bad url expecting a skip...",function(){var t=(0,a.A)(l().mark(function t(r){return l().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r.addStep("Creating the GeoView Layer Configuration..."),t.next=1,T.z.initGeoviewLayerConfig("gvLayerId","gvLayerName",e);case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),function(e){e.addStep("At this point, the metadata was skipped and that's as intended...")})}},{key:"testGeoTIFFWithVegetation",value:function(){var e=h.N.GEOTIFF_VEGETATION,t="gvLayerId",r="GeoTIFFLayer",n={geoviewLayerId:t,geoviewLayerType:"GeoTIFF",geoviewLayerName:r};return this.test("Test a GeoTIFF with Vegetation",function(n){return n.addStep("Initializing config on url: "+e),O.D.initGeoviewLayerConfig(t,r,e)},function(e,t){e.addStep("Verifying expected config..."),d.V.assertJsonObject(t,n),e.addStep("Verifying 1 layer entry in the config..."),d.V.assertIsArrayLengthEqual(t.listOfLayerEntryConfig,1),e.addStep("Verifying layer id in the list..."),d.V.assertIsEqual(t.listOfLayerEntryConfig[0].layerId,h.N.GEOTIFF_VEGETATION_FILE),e.addStep("Verifying layer entry is of the right type..."),d.V.assertIsInstance(t.listOfLayerEntryConfig[0],x.w)})}},{key:"testGeoTIFFBadUrlExpectSkip",value:function(){var e=h.N.BAD_URL;return this.test("Test a GeoTIFF config with a bad url expecting a skip...",function(){var t=(0,a.A)(l().mark(function t(r){return l().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r.addStep("Creating the GeoView Layer Configuration..."),t.next=1,O.D.initGeoviewLayerConfig("gvLayerId","gvLayerName",e);case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),function(e){e.addStep("At this point, the metadata was skipped and that's as intended...")})}},{key:"testStandaloneGeocoreWithAirborne",value:function(){var e=h.N.AIRBORNE_RADIOACTIVITY_UUID,t={config:{geoviewLayerId:h.N.AIRBORNE_RADIOACTIVITY_UUID,geoviewLayerType:"esriDynamic",geoviewLayerName:h.N.AIRBORNE_RADIOACTIVITY_LAYER_GROUP_NAME},geocharts:(0,i.A)({},h.N.AIRBORNE_RADIOACTIVITY_UUID_WITH_SUFFIX,{layers:[],chart:"line"})};return this.test("Test Geocore with Airborne",function(){return b.h.createLayerConfigFromUUID(e,"en",void 0,void 0)},function(e,r){e.addStep("Verifying expected geoview geocore config..."),d.V.assertJsonObject(r,t)})}},{key:"testSettingsCascadeToSublayers",value:function(){var e=this,t=h.N.INITIAL_SETTINGS_CONFIG,r={highlight:!1,zoom:!1},n={highlight:!1,remove:!1,zoom:!1},a={highlight:!0,remove:!1,zoom:!1};return this.test("Test Settings Cascade to Sublayers",function(){var r=W.TSw.initializeMapConfig(e.getMapId(),[t],function(t,r){var n=(0,W.Jv8)("en",t,r);P.vF.logWarning("- Map ".concat(e.getMapId(),": ").concat(n)),e.getMapViewer().notifications.showError(t,r)});if(!r||!r[0])throw new Error("Failed to initialize map config");return r[0]},function(e,t){var i,o,s;e.addStep("Verifying geoview layer controls..."),d.V.assertJsonObject(null===(i=t.initialSettings)||void 0===i?void 0:i.controls,r),e.addStep("Verifying group layer controls..."),d.V.assertJsonObject(null===(o=t.listOfLayerEntryConfig)||void 0===o?void 0:o[0].getInitialSettings().controls,n),e.addStep("Verifying child layer controls..."),d.V.assertJsonObject(null===(s=t.listOfLayerEntryConfig)||void 0===s||null===(s=s[0].listOfLayerEntryConfig)||void 0===s?void 0:s[0].getInitialSettings().controls,a)})}}])}(h.N);n()}catch(H){n(H)}})},34624:(e,t,r)=>{r.a(e,async(e,n)=>{try{r.d(t,{A:()=>d});var a=r(64477),i=r(43549),o=r(51310),s=r(54074),u=r(75509),c=r(17562),p=r(31930),f=e([p]),l=f.then?(await f)():f;function y(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(y=function(){return!!e})()}function g(e,t,r){A(e,t),t.set(e,r)}function A(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function v(e,t){return e.get(E(e,t))}function E(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}p=l[0];var h=new WeakMap,d=function(e){function t(e,r){var n,i,u,c,f,l,d;return(0,a.A)(this,t),i=this,u=t,c=[e,r],u=(0,s.A)(u),g(n=(0,o.A)(i,y()?Reflect.construct(u,c||[],(0,s.A)(i).constructor):u.apply(i,c)),h,void 0),f=h,l=n,d=new p.M(e,r),f.set(E(f,l),d),n.addTester(v(h,n)),n}return(0,u.A)(t,e),(0,i.A)(t,[{key:"getName",value:function(){return"Config Test Suite"}},{key:"getDescriptionAsHtml",value:function(){return"Test Suite to perform various layer config related tests."}},{key:"onLaunchTestSuite",value:function(){var e=v(h,this).testEsriDynamicWithHistoricalFloodEvents(),t=v(h,this).testEsriDynamicWithCESI(),r=v(h,this).testEsriDynamicBadUrl(),n=v(h,this).testEsriFeatureWithTorontoNeighbourhoods(),a=v(h,this).testEsriFeatureWithHistoricalFloodEvents(),i=v(h,this).testEsriFeatureWithForestIndustry(),o=v(h,this).testEsriFeatureBadUrl(),s=v(h,this).testEsriImageWithElevation(),u=v(h,this).testEsriImageBadUrl(),c=v(h,this).testWMSLayerWithOWSMundialis(),p=v(h,this).testWMSLayerWithDatacubeMSI(),f=v(h,this).testWMSBadUrl(),l=v(h,this).testWFSLayerWithGeometCurrentConditions(),d=v(h,this).testWFSBadUrl(),y=v(h,this).testWFSOkayUrlNoCap(),g=v(h,this).testOGCFeatureWithPygeoapi(),A=v(h,this).testOGCFeatureBadUrl(),E=v(h,this).testGeojsonWithMetadataMeta(),S=v(h,this).testGeoJSONBadUrlExpectSkip(),L=v(h,this).testGeoJSONBadUrlExpectError(),w=v(h,this).testCSVWithStationList(),I=v(h,this).testCSVBadUrlExpectSkip(),_=v(h,this).testWKBWithSouthAfrica(),T=v(h,this).testWKBBadUrlExpectFail(),O=v(h,this).testKMLWithTornado(),m=v(h,this).testKMLBadUrlExpectSkip(),R=v(h,this).testGeoTIFFWithVegetation(),C=v(h,this).testGeoTIFFBadUrlExpectSkip(),k=v(h,this).testStandaloneGeocoreWithAirborne(),M=v(h,this).testSettingsCascadeToSublayers();return Promise.all([e,t,r,n,a,i,o,s,u,c,p,f,l,d,y,g,A,E,S,L,w,I,_,T,O,m,R,C,k,M])}}])}(c.e);n()}catch(S){n(S)}})},41265:(e,t,r)=>{r.a(e,async(e,n)=>{try{r.d(t,{V:()=>C});var a=r(80171),i=r(64477),o=r(43549),s=r(51310),u=r(54074),c=r(75509),p=r(50124),f=r.n(p),l=r(54039),h=r(51294),d=r(78887),y=r(9767),g=r(85516),A=r(24231),v=r(75338),E=r(49763),S=r(63357),L=r(57888),w=r(6813),I=r(95726),_=r(67478),T=r(22938),O=r(7542),m=r(96338),R=e([l,h,d,y,g,A,v,E,S,L,w,I,_,T,O,m]);function k(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(k=function(){return!!e})()}[l,h,d,y,g,A,v,E,S,L,w,I,_,T,O,m]=R.then?(await R)():R;var C=function(e){function t(){return(0,i.A)(this,t),e=this,r=t,n=arguments,r=(0,u.A)(r),(0,s.A)(e,k()?Reflect.construct(r,n||[],(0,u.A)(e).constructor):r.apply(e,n));var e,r,n}return(0,c.A)(t,e),(0,o.A)(t,[{key:"getName",value:function(){return"LayerTester"}},{key:"testAddEsriDynamicHistoFloodEvents",value:function(){var e=this,r=(0,g.generateId)(),n=h.N.HISTORICAL_FLOOD_URL_MAP_SERVER,i=r+"/"+h.N.HISTORICAL_FLOOD_URL_LAYER_ID;return this.test("Test Adding Esri Dynamic Histo Flood Events on map...",function(){var o=(0,a.A)(f().mark(function a(o){var s;return f().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return o.addStep("Creating the GeoView Layer Configuration..."),s=y.z.createGeoviewLayerConfig(r,"Esri Dynamic Histo Flood Events",n,!1,[{id:h.N.HISTORICAL_FLOOD_URL_LAYER_ID}]),a.next=1,t.helperStepAddLayerOnMap(o,e.getMapViewer(),s);case 1:return a.abrupt("return",t.helperStepCheckLayerAtLayerPath(o,e.getMapViewer(),i));case 2:case"end":return a.stop()}},a)}));return function(e){return o.apply(this,arguments)}}(),function(r){return t.helperStepAssertLayerExists(r,e.getMapViewer(),i)},function(r){t.helperFinalizeStepRemoveLayerAndAssert(r,e.getMapViewer(),i)})}},{key:"testAddEsriDynamicBadUrl",value:function(){var e=this,r=(0,g.generateId)(),n=h.N.BAD_URL,i=r+"/"+h.N.HISTORICAL_FLOOD_URL_LAYER_ID;return this.testError("Test Adding Esri Dynamic with bad url...",d.cv,function(){var i=(0,a.A)(f().mark(function a(i){var o;return f().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return i.addStep("Creating the GeoView Layer Configuration..."),o=y.z.createGeoviewLayerConfig(r,"Esri Dynamic Histo Flood Events",n,!1,[{id:h.N.HISTORICAL_FLOOD_URL_LAYER_ID}]),a.next=1,t.helperStepAddLayerOnMap(i,e.getMapViewer(),o);case 1:case"end":return a.stop()}},a)}));return function(e){return i.apply(this,arguments)}}(),void 0,function(r){t.helperFinalizeStepRemoveLayerConfigAndAssert(r,e.getMapViewer(),i)})}},{key:"testAddEsriDynamicWithRasterLayersViaGeocore",value:function(){var e=this,r=h.N.ESRI_DYNAMIC_LABOUR_FORCE_UUID,n=r+"/"+h.N.ESRI_DYNAMIC_LABOUR_FORCE_GROUP,i=r+"/"+h.N.ESRI_DYNAMIC_LABOUR_FORCE_PETROLEUM,o=r+"/"+h.N.ESRI_DYNAMIC_LABOUR_FORCE_MINERALS,s=r+"/"+h.N.ESRI_DYNAMIC_LABOUR_FORCE_FORESTRY,u=r+"/"+h.N.ESRI_DYNAMIC_LABOUR_FORCE_FISHERIES,c=r+"/"+h.N.ESRI_DYNAMIC_LABOUR_FORCE_AGRICULTURE,p=r+"/"+h.N.ESRI_DYNAMIC_LABOUR_FORCE_CANECUMENE;return this.test("Test Adding Esri Dynamic with Raster Layers via Geocore...",function(){var n=(0,a.A)(f().mark(function n(a){return f().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a.addStep("Creating the GeoView Layer Configuration..."),n.next=1,t.helperStepAddLayerOnMapFromUUID(a,e.getMapViewer(),r);case 1:return n.next=2,t.helperStepCheckLayerAtLayerPath(a,e.getMapViewer(),i);case 2:return n.next=3,t.helperStepCheckLayerAtLayerPath(a,e.getMapViewer(),o);case 3:return n.next=4,t.helperStepCheckLayerAtLayerPath(a,e.getMapViewer(),s);case 4:return n.next=5,t.helperStepCheckLayerAtLayerPath(a,e.getMapViewer(),u);case 5:return n.next=6,t.helperStepCheckLayerAtLayerPath(a,e.getMapViewer(),c);case 6:return n.abrupt("return",t.helperStepCheckLayerAtLayerPath(a,e.getMapViewer(),p));case 7:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}(),function(r){return t.helperStepAssertLayerExists(r,e.getMapViewer(),i),t.helperStepAssertLayerExists(r,e.getMapViewer(),o),t.helperStepAssertLayerExists(r,e.getMapViewer(),s),t.helperStepAssertLayerExists(r,e.getMapViewer(),u),t.helperStepAssertLayerExists(r,e.getMapViewer(),c),t.helperStepAssertLayerExists(r,e.getMapViewer(),p)},function(r){t.helperFinalizeStepRemoveLayerAndAssert(r,e.getMapViewer(),n)})}},{key:"testAddEsriFeatureForestIndustry",value:function(){var e=this,r=(0,g.generateId)(),n=h.N.FOREST_INDUSTRY_MAP_SERVER,i=r+"/"+h.N.FOREST_INDUSTRY_LAYER_ID;return this.test("Test Adding Esri Feature Forest Industry on map...",function(){var o=(0,a.A)(f().mark(function a(o){var s;return f().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return o.addStep("Creating the GeoView Layer Configuration..."),s=v.U.createGeoviewLayerConfig(r,"Esri Feature Forest Industry",n,!1,[{id:h.N.FOREST_INDUSTRY_LAYER_ID}]),a.next=1,t.helperStepAddLayerOnMap(o,e.getMapViewer(),s);case 1:return a.abrupt("return",t.helperStepCheckLayerAtLayerPath(o,e.getMapViewer(),i));case 2:case"end":return a.stop()}},a)}));return function(e){return o.apply(this,arguments)}}(),function(r){return t.helperStepAssertLayerExists(r,e.getMapViewer(),i)},function(r){t.helperFinalizeStepRemoveLayerAndAssert(r,e.getMapViewer(),i)})}},{key:"testAddEsriFeatureBadUrl",value:function(){var e=this,r=(0,g.generateId)(),n=h.N.BAD_URL,i=r+"/"+h.N.FOREST_INDUSTRY_LAYER_ID;return this.testError("Test Adding Esri Feature with bad url...",d.cv,function(){var i=(0,a.A)(f().mark(function a(i){var o;return f().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return i.addStep("Creating the GeoView Layer Configuration..."),o=v.U.createGeoviewLayerConfig(r,"Esri Feature Forest Industry",n,!1,[{id:h.N.FOREST_INDUSTRY_LAYER_ID}]),a.next=1,t.helperStepAddLayerOnMap(i,e.getMapViewer(),o);case 1:case"end":return a.stop()}},a)}));return function(e){return i.apply(this,arguments)}}(),void 0,function(r){t.helperFinalizeStepRemoveLayerConfigAndAssert(r,e.getMapViewer(),i)})}},{key:"testAddEsriImageWithElevation",value:function(){var e=this,r=(0,g.generateId)(),n=h.N.IMAGE_SERVER_ELEVATION_URL,i=r+"/"+h.N.IMAGE_SERVER_ELEVATION_LAYER_ID;return this.test("Test Adding Esri Image Elevation on map...",function(){var o=(0,a.A)(f().mark(function a(o){var s;return f().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return o.addStep("Creating the GeoView Layer Configuration..."),s=E.$.createGeoviewLayerConfigSimple(r,"Esri Image Elevation",n,!1),a.next=1,t.helperStepAddLayerOnMap(o,e.getMapViewer(),s);case 1:return a.abrupt("return",t.helperStepCheckLayerAtLayerPath(o,e.getMapViewer(),i));case 2:case"end":return a.stop()}},a)}));return function(e){return o.apply(this,arguments)}}(),function(r){return t.helperStepAssertLayerExists(r,e.getMapViewer(),i)},function(r){t.helperFinalizeStepRemoveLayerAndAssert(r,e.getMapViewer(),i)})}},{key:"testAddEsriImageWithUSA",value:function(){var e=this,r=(0,g.generateId)(),n=h.N.IMAGE_SERVER_USA_URL,i=r+"/base-group",o=r+"/base-group/"+h.N.IMAGE_SERVER_USA_LAYER_ID_CITIES,s=r+"/base-group/"+h.N.IMAGE_SERVER_USA_LAYER_ID_ROADS;return this.test("Test Adding Esri Image USA on map...",function(){var i=(0,a.A)(f().mark(function a(i){var u;return f().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return i.addStep("Creating the GeoView Layer Configuration..."),u=E.$.createGeoviewLayerConfig(r,"Esri Image USA",n,!1,[{id:h.N.IMAGE_SERVER_USA_LAYER_ID_CITIES,layerName:"Cities"},{id:h.N.IMAGE_SERVER_USA_LAYER_ID_ROADS,layerName:"Roads"}]),a.next=1,t.helperStepAddLayerOnMap(i,e.getMapViewer(),u);case 1:return a.next=2,t.helperStepCheckLayerAtLayerPath(i,e.getMapViewer(),o);case 2:return a.abrupt("return",t.helperStepCheckLayerAtLayerPath(i,e.getMapViewer(),s));case 3:case"end":return a.stop()}},a)}));return function(e){return i.apply(this,arguments)}}(),function(r){return t.helperStepAssertLayerExists(r,e.getMapViewer(),o),t.helperStepAssertLayerExists(r,e.getMapViewer(),s)},function(r){t.helperFinalizeStepRemoveLayerAndAssert(r,e.getMapViewer(),i)})}},{key:"testAddEsriImageBadUrl",value:function(){var e=this,r=(0,g.generateId)(),n=h.N.BAD_URL+"/"+h.N.IMAGE_SERVER_ELEVATION_LAYER_ID+"/ImageServer",i=r+"/"+h.N.IMAGE_SERVER_ELEVATION_LAYER_ID;return this.testError("Test Adding Esri Image with bad url...",d.cv,function(){var i=(0,a.A)(f().mark(function a(i){var o;return f().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return i.addStep("Creating the GeoView Layer Configuration..."),o=E.$.createGeoviewLayerConfigSimple(r,"Esri Image Elevation",n,!1),a.next=1,t.helperStepAddLayerOnMap(i,e.getMapViewer(),o);case 1:case"end":return a.stop()}},a)}));return function(e){return i.apply(this,arguments)}}(),void 0,function(r){t.helperFinalizeStepRemoveLayerConfigAndAssert(r,e.getMapViewer(),i)})}},{key:"testAddWMSLayerWithOWSMundialis",value:function(){var e=this,r=(0,g.generateId)(),n=h.N.OWS_MUNDIALIS,i=r+"/"+h.N.OWS_MUNDIALIS_LAYER_ID,o=!1;return this.test("Test Adding WMS Mundialis on map...",function(){var s=(0,a.A)(f().mark(function a(s){var u;return f().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return s.addStep("Creating the GeoView Layer Configuration..."),u=S.G.createGeoviewLayerConfig(r,"OWS Mundialis",n,"mapserver",!1,[{id:h.N.OWS_MUNDIALIS_LAYER_ID}],!1),a.next=1,t.helperStepAddLayerOnMap(s,e.getMapViewer(),u);case 1:return a.abrupt("return",t.helperStepCheckLayerAtLayerPath(s,e.getMapViewer(),i,o));case 2:case"end":return a.stop()}},a)}));return function(e){return s.apply(this,arguments)}}(),function(r){return t.helperStepAssertLayerExists(r,e.getMapViewer(),i,o)},function(r){t.helperFinalizeStepRemoveLayerAndAssert(r,e.getMapViewer(),i)})}},{key:"testAddWMSLayerWithDatacubeMSI",value:function(){var e=this,r=(0,g.generateId)(),n=h.N.DATACUBE_MSI,i=r+"/"+h.N.DATACUBE_MSI_LAYER_NAME_MSI_OR_MORE,o=!1;return this.test("Test Adding WMS Datacube MSI on map...",function(){var s=(0,a.A)(f().mark(function a(s){var u;return f().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return s.addStep("Creating the GeoView Layer Configuration..."),u=S.G.createGeoviewLayerConfig(r,"Datacube MSI",n,"mapserver",!1,[{id:h.N.DATACUBE_MSI_LAYER_NAME_MSI_OR_MORE}],!1),a.next=1,t.helperStepAddLayerOnMap(s,e.getMapViewer(),u);case 1:return a.abrupt("return",t.helperStepCheckLayerAtLayerPath(s,e.getMapViewer(),i,o));case 2:case"end":return a.stop()}},a)}));return function(e){return s.apply(this,arguments)}}(),function(r){return t.helperStepAssertLayerExists(r,e.getMapViewer(),i,o)},function(r){t.helperFinalizeStepRemoveLayerAndAssert(r,e.getMapViewer(),i)})}},{key:"testAddWMSLayerWithDatacubeRingOfFire",value:function(){var e=this,r=(0,g.generateId)(),n=h.N.DATACUBE_RING_FIRE,i=r+"/"+h.N.DATACUBE_RING_FIRE_LAYER_ID_HALIFAX,o=!1;return this.test("Test Adding WMS Datacube Ring of Fire XML Halifax on map...",function(){var s=(0,a.A)(f().mark(function a(s){var u;return f().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return s.addStep("Creating the GeoView Layer Configuration..."),u=S.G.createGeoviewLayerConfig(r,"Halifax",n,"mapserver",!1,[{id:h.N.DATACUBE_RING_FIRE_LAYER_ID_HALIFAX}],!1),a.next=1,t.helperStepAddLayerOnMap(s,e.getMapViewer(),u);case 1:return a.abrupt("return",t.helperStepCheckLayerAtLayerPath(s,e.getMapViewer(),i,o));case 2:case"end":return a.stop()}},a)}));return function(e){return s.apply(this,arguments)}}(),function(r){return t.helperStepAssertLayerExists(r,e.getMapViewer(),i,o)},function(r){t.helperFinalizeStepRemoveLayerAndAssert(r,e.getMapViewer(),i)})}},{key:"testAddWMSBadUrl",value:function(){var e=this,r=(0,g.generateId)(),n=h.N.BAD_URL,i=r+"/"+h.N.DATACUBE_MSI_LAYER_NAME_MSI_OR_MORE;return this.testError("Test Adding WMS with bad url...",d.rQ,function(){var i=(0,a.A)(f().mark(function a(i){var o;return f().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return i.addStep("Creating the GeoView Layer Configuration..."),o=S.G.createGeoviewLayerConfig(r,"Datacube MSI",n,"mapserver",!1,[{id:h.N.DATACUBE_MSI_LAYER_NAME_MSI_OR_MORE}],!1),a.next=1,t.helperStepAddLayerOnMap(i,e.getMapViewer(),o);case 1:case"end":return a.stop()}},a)}));return function(e){return i.apply(this,arguments)}}(),void 0,function(r){t.helperFinalizeStepRemoveLayerConfigAndAssert(r,e.getMapViewer(),i)})}},{key:"testAddWFSLayerWithWithGeometCurrentConditions",value:function(){var e=this,r=(0,g.generateId)(),n=h.N.GEOMET_URL,i=r+"/"+h.N.GEOMET_URL_CURRENT_COND_LAYER_ID;return this.test("Test Adding WFS with Geomet Current Conditions layer on map...",function(){var o=(0,a.A)(f().mark(function a(o){var s;return f().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return o.addStep("Creating the GeoView Layer Configuration..."),s=L.d.createGeoviewLayerConfig(r,"Current Conditions",n,!1,"all",[{id:h.N.GEOMET_URL_CURRENT_COND_LAYER_ID}]),a.next=1,t.helperStepAddLayerOnMap(o,e.getMapViewer(),s);case 1:return a.abrupt("return",t.helperStepCheckLayerAtLayerPath(o,e.getMapViewer(),i));case 2:case"end":return a.stop()}},a)}));return function(e){return o.apply(this,arguments)}}(),function(r){return t.helperStepAssertLayerExists(r,e.getMapViewer(),i)},function(r){t.helperFinalizeStepRemoveLayerAndAssert(r,e.getMapViewer(),i)})}},{key:"testAddWFSBadUrl",value:function(){var e=this,r=(0,g.generateId)(),n=h.N.BAD_URL,i=r+"/"+h.N.GEOMET_URL_CURRENT_COND_LAYER_ID;return this.testError("Test Adding WFS with bad url...",d.cv,function(){var i=(0,a.A)(f().mark(function a(i){var o;return f().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return i.addStep("Creating the GeoView Layer Configuration..."),o=L.d.createGeoviewLayerConfig(r,"Current Conditions",n,!1,"all",[{id:h.N.GEOMET_URL_CURRENT_COND_LAYER_ID}]),a.next=1,t.helperStepAddLayerOnMap(i,e.getMapViewer(),o);case 1:case"end":return a.stop()}},a)}));return function(e){return i.apply(this,arguments)}}(),void 0,function(r){t.helperFinalizeStepRemoveLayerConfigAndAssert(r,e.getMapViewer(),i)})}},{key:"testAddWFSOkayUrlNoCap",value:function(){var e=this,r=(0,g.generateId)(),n=h.N.FAKE_URL_ALWAYS_RETURNING_RESPONSE_INSTEAD_OF_NETWORK_ERROR,i=r+"/"+h.N.GEOMET_URL_CURRENT_COND_LAYER_ID;return this.testError("Test Adding WFS with okay url no capabilities...",d.rQ,function(){var i=(0,a.A)(f().mark(function a(i){var o;return f().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return i.addStep("Creating the GeoView Layer Configuration..."),o=L.d.createGeoviewLayerConfig(r,"Current Conditions",n,!1,"all",[{id:h.N.GEOMET_URL_CURRENT_COND_LAYER_ID}]),a.next=1,t.helperStepAddLayerOnMap(i,e.getMapViewer(),o);case 1:case"end":return a.stop()}},a)}));return function(e){return i.apply(this,arguments)}}(),void 0,function(r){t.helperFinalizeStepRemoveLayerConfigAndAssert(r,e.getMapViewer(),i)})}},{key:"testAddGeoJSONWithMetadataPolygons",value:function(){var e=this,r=(0,g.generateId)(),n=h.N.GEOJSON_METADATA_META,i=r+"/"+h.N.GEOJSON_POLYGONS;return this.test("Test Adding GeoJSON with Metadata layer on map...",function(){var o=(0,a.A)(f().mark(function a(o){var s;return f().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return o.addStep("Creating the GeoView Layer Configuration..."),s=w.k.createGeoviewLayerConfig(r,"Polygons JSON",n,!1,[{id:h.N.GEOJSON_POLYGONS}]),a.next=1,t.helperStepAddLayerOnMap(o,e.getMapViewer(),s);case 1:return a.abrupt("return",t.helperStepCheckLayerAtLayerPath(o,e.getMapViewer(),i));case 2:case"end":return a.stop()}},a)}));return function(e){return o.apply(this,arguments)}}(),function(r){return t.helperStepAssertLayerExists(r,e.getMapViewer(),i)},function(r){t.helperFinalizeStepRemoveLayerAndAssert(r,e.getMapViewer(),i)})}},{key:"testAddGeoJSONBadUrl",value:function(){var e=this,r=(0,g.generateId)(),n=h.N.BAD_URL,i=r+"/"+h.N.GEOJSON_POLYGONS;return this.testError("Test Adding GeoJSON with bad url...",d.wl,function(){var o=(0,a.A)(f().mark(function a(o){var s;return f().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return o.addStep("Creating the GeoView Layer Configuration..."),s=w.k.createGeoviewLayerConfig(r,"Polygons JSON",n,!1,[{id:h.N.GEOJSON_POLYGONS}]),a.next=1,t.helperStepAddLayerOnMap(o,e.getMapViewer(),s);case 1:return a.next=2,t.helperStepCheckLayerAtLayerPath(o,e.getMapViewer(),i);case 2:case"end":return a.stop()}},a)}));return function(e){return o.apply(this,arguments)}}(),void 0,function(r){t.helperFinalizeStepRemoveLayerConfigAndAssert(r,e.getMapViewer(),i)})}},{key:"testAddGeotiffLayerWithDatacubeVegetation",value:function(){var e=this,r=(0,g.generateId)(),n=h.N.GEOTIFF_VEGETATION,i=r+"/"+h.N.GEOTIFF_VEGETATION_FILE,o=!1;return this.test("Test Adding GeoTIFF Datacube Vegetation on map...",function(){var s=(0,a.A)(f().mark(function a(s){var u;return f().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return s.addStep("Creating the GeoView Layer Configuration..."),u=I.D.createGeoviewLayerConfig(r,"Datacube Vegetation",n,!1,[{id:h.N.GEOTIFF_VEGETATION_FILE}]),a.next=1,t.helperStepAddLayerOnMap(s,e.getMapViewer(),u);case 1:return a.abrupt("return",t.helperStepCheckLayerAtLayerPath(s,e.getMapViewer(),i,o));case 2:case"end":return a.stop()}},a)}));return function(e){return s.apply(this,arguments)}}(),function(r){return t.helperStepAssertLayerExists(r,e.getMapViewer(),i,o)},function(r){t.helperFinalizeStepRemoveLayerAndAssert(r,e.getMapViewer(),i)})}},{key:"testAddGeoTIFFWithBadUrl",value:function(){var e=this,r=(0,g.generateId)(),n=h.N.BAD_URL,i=r+"/"+h.N.GEOTIFF_VEGETATION_FILE;return this.testError("Test Adding GeoTIFF with bad url...",d.wl,function(){var o=(0,a.A)(f().mark(function a(o){var s;return f().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return o.addStep("Creating the GeoView Layer Configuration..."),s=I.D.createGeoviewLayerConfig(r,"GeoTIFF Vegetation",n,!1,[{id:h.N.GEOTIFF_VEGETATION_FILE}]),a.next=1,t.helperStepAddLayerOnMap(o,e.getMapViewer(),s);case 1:return a.next=2,t.helperStepCheckLayerAtLayerPath(o,e.getMapViewer(),i);case 2:case"end":return a.stop()}},a)}));return function(e){return o.apply(this,arguments)}}(),void 0,function(r){t.helperFinalizeStepRemoveLayerConfigAndAssert(r,e.getMapViewer(),i)})}},{key:"testAddCSVWithStationList",value:function(){var e=this,r=(0,g.generateId)(),n=h.N.CSV_STATION_LIST,i=r+"/"+h.N.CSV_STATION_LIST_FILE;return this.test("Test Adding a CSV with Station List layer on map...",function(){var o=(0,a.A)(f().mark(function a(o){var s;return f().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return o.addStep("Creating the GeoView Layer Configuration..."),s=_.p.createGeoviewLayerConfig(r,"Station List CSV",n,!1,[{id:h.N.CSV_STATION_LIST_FILE}]),a.next=1,t.helperStepAddLayerOnMap(o,e.getMapViewer(),s);case 1:return a.abrupt("return",t.helperStepCheckLayerAtLayerPath(o,e.getMapViewer(),i));case 2:case"end":return a.stop()}},a)}));return function(e){return o.apply(this,arguments)}}(),function(r){return t.helperStepAssertLayerExists(r,e.getMapViewer(),i)},function(r){t.helperFinalizeStepRemoveLayerAndAssert(r,e.getMapViewer(),i)})}},{key:"testAddCSVWithBadUrl",value:function(){var e=this,r=(0,g.generateId)(),n=h.N.BAD_URL,i=r+"/"+h.N.CSV_STATION_LIST_FILE;return this.testError("Test Adding CSV with bad url...",d.wl,function(){var o=(0,a.A)(f().mark(function a(o){var s;return f().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return o.addStep("Creating the GeoView Layer Configuration..."),s=_.p.createGeoviewLayerConfig(r,"Station List CSV",n,!1,[{id:h.N.CSV_STATION_LIST_FILE}]),a.next=1,t.helperStepAddLayerOnMap(o,e.getMapViewer(),s);case 1:return a.next=2,t.helperStepCheckLayerAtLayerPath(o,e.getMapViewer(),i);case 2:case"end":return a.stop()}},a)}));return function(e){return o.apply(this,arguments)}}(),void 0,function(r){t.helperFinalizeStepRemoveLayerConfigAndAssert(r,e.getMapViewer(),i)})}},{key:"testAddOGCFeatureWithPygeoapi",value:function(){var e=this,r=(0,g.generateId)(),n=h.N.PYGEOAPI_B6RYUVAKK5,i=r+"/"+h.N.PYGEOAPI_B6RYUVAKK5_LAKES,o=h.N.PYGEOAPI_B6RYUVAKK5_LAKES;return this.test("Test Adding an OGC Feature with Pygeoapi layer on map...",function(){var s=(0,a.A)(f().mark(function a(s){var u;return f().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return s.addStep("Creating the GeoView Layer Configuration..."),u=T.k.createGeoviewLayerConfig(r,o,n,!1,[{id:h.N.PYGEOAPI_B6RYUVAKK5_LAKES}]),a.next=1,t.helperStepAddLayerOnMap(s,e.getMapViewer(),u);case 1:return a.abrupt("return",t.helperStepCheckLayerAtLayerPath(s,e.getMapViewer(),i));case 2:case"end":return a.stop()}},a)}));return function(e){return s.apply(this,arguments)}}(),function(r){return t.helperStepAssertLayerExists(r,e.getMapViewer(),i)},function(r){t.helperFinalizeStepRemoveLayerAndAssert(r,e.getMapViewer(),i)})}},{key:"testAddOGCFeatureWithBadUrl",value:function(){var e=this,r=(0,g.generateId)(),n=h.N.BAD_URL,i=r+"/"+h.N.PYGEOAPI_B6RYUVAKK5_LAKES,o=h.N.PYGEOAPI_B6RYUVAKK5_LAKES;return this.testError("Test Adding OGC Feature with bad url...",d.cv,function(){var i=(0,a.A)(f().mark(function a(i){var s;return f().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return i.addStep("Creating the GeoView Layer Configuration..."),s=T.k.createGeoviewLayerConfig(r,o,n,!1,[{id:h.N.PYGEOAPI_B6RYUVAKK5_LAKES}]),a.next=1,t.helperStepAddLayerOnMap(i,e.getMapViewer(),s);case 1:case"end":return a.stop()}},a)}));return function(e){return i.apply(this,arguments)}}(),void 0,function(r){t.helperFinalizeStepRemoveLayerConfigAndAssert(r,e.getMapViewer(),i)})}},{key:"testAddWKBWithSouthAfrica",value:function(){var e=this,r=(0,g.generateId)(),n=h.N.WKB_SOUTH_AFRICA,i=r+"/"+h.N.WKB_SOUTH_AFRICA,o=!1;return this.test("Test Adding a WKB with South Africa layer on map...",function(){var s=(0,a.A)(f().mark(function a(s){var u;return f().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return s.addStep("Creating the GeoView Layer Configuration..."),u=O.F.createGeoviewLayerConfig(r,"WKB South Africa",n,!1,[{id:h.N.WKB_SOUTH_AFRICA}]),a.next=1,t.helperStepAddLayerOnMap(s,e.getMapViewer(),u);case 1:return a.abrupt("return",t.helperStepCheckLayerAtLayerPath(s,e.getMapViewer(),i,o));case 2:case"end":return a.stop()}},a)}));return function(e){return s.apply(this,arguments)}}(),function(r){return t.helperStepAssertLayerExists(r,e.getMapViewer(),i,o)},function(r){t.helperFinalizeStepRemoveLayerAndAssert(r,e.getMapViewer(),i)})}},{key:"testAddWKBWithBadUrl",value:function(){var e=this,r=(0,g.generateId)(),n=h.N.BAD_URL,i=r+"/"+h.N.WKB_SOUTH_AFRICA,o=h.N.WKB_SOUTH_AFRICA;return this.testError("Test Adding WKB with bad url...",d.wl,function(){var s=(0,a.A)(f().mark(function a(s){var u;return f().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return s.addStep("Creating the GeoView Layer Configuration..."),u=O.F.createGeoviewLayerConfig(r,o,n,!1,[{id:h.N.WKB_SOUTH_AFRICA}]),a.next=1,t.helperStepAddLayerOnMap(s,e.getMapViewer(),u);case 1:return a.next=2,t.helperStepCheckLayerAtLayerPath(s,e.getMapViewer(),i);case 2:case"end":return a.stop()}},a)}));return function(e){return s.apply(this,arguments)}}(),void 0,function(r){t.helperFinalizeStepRemoveLayerConfigAndAssert(r,e.getMapViewer(),i)})}},{key:"testAddKMLWithTornado",value:function(){var e=this,r=(0,g.generateId)(),n=h.N.KML_TORNADO,i=r+"/"+h.N.KML_TORNADO_FILE,o=!1;return this.test("Test Adding a KML with Tornado layer on map...",function(){var s=(0,a.A)(f().mark(function a(s){var u;return f().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return s.addStep("Creating the GeoView Layer Configuration..."),u=m.z.createGeoviewLayerConfig(r,"KML Tornado",n,!1,[{id:h.N.KML_TORNADO_FILE}]),a.next=1,t.helperStepAddLayerOnMap(s,e.getMapViewer(),u);case 1:return a.abrupt("return",t.helperStepCheckLayerAtLayerPath(s,e.getMapViewer(),i,o));case 2:case"end":return a.stop()}},a)}));return function(e){return s.apply(this,arguments)}}(),function(r){return t.helperStepAssertLayerExists(r,e.getMapViewer(),i,o)},function(r){t.helperFinalizeStepRemoveLayerAndAssert(r,e.getMapViewer(),i)})}},{key:"testAddKMLWithBadUrl",value:function(){var e=this,r=(0,g.generateId)(),n=h.N.BAD_URL,i=r+"/"+h.N.KML_TORNADO_FILE,o=h.N.KML_TORNADO_FILE;return this.testError("Test Adding KML with bad url...",d.wl,function(){var s=(0,a.A)(f().mark(function a(s){var u;return f().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return s.addStep("Creating the GeoView Layer Configuration..."),u=m.z.createGeoviewLayerConfig(r,o,n,!1,[{id:h.N.KML_TORNADO_FILE}]),a.next=1,t.helperStepAddLayerOnMap(s,e.getMapViewer(),u);case 1:return a.next=2,t.helperStepCheckLayerAtLayerPath(s,e.getMapViewer(),i);case 2:case"end":return a.stop()}},a)}));return function(e){return s.apply(this,arguments)}}(),void 0,function(r){t.helperFinalizeStepRemoveLayerConfigAndAssert(r,e.getMapViewer(),i)})}},{key:"testInitialSettingsCascade",value:function(){var e=this,r=h.N.INITIAL_SETTINGS_CONFIG,n=!1,i=!1,o=!0;return this.test("Test initial settings cascade",function(){var n=(0,a.A)(f().mark(function n(a){return f().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=1,t.helperStepAddLayerOnMap(a,e.getMapViewer(),r);case 1:return n.abrupt("return",e.getMapViewer().createMapConfigFromMapState());case 2:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}(),function(e,t){var a,s,u,c,p=null==t||null===(a=t.map)||void 0===a?void 0:a.listOfGeoviewLayerConfig.find(function(e){return e.geoviewLayerId===r.geoviewLayerId});e.addStep("Verifying group layer highlight control..."),l.V.assertIsEqual(null==p||null===(s=p.initialSettings)||void 0===s||null===(s=s.controls)||void 0===s?void 0:s.highlight,n),e.addStep("Verifying group layer remove control..."),l.V.assertIsEqual(null==p||null===(u=p.listOfLayerEntryConfig)||void 0===u||null===(u=u[0])||void 0===u||null===(u=u.initialSettings)||void 0===u||null===(u=u.controls)||void 0===u?void 0:u.remove,i),e.addStep("Verifying child layer highlight control..."),l.V.assertIsEqual(null==p||null===(c=p.listOfLayerEntryConfig)||void 0===c||null===(c=c[0])||void 0===c||null===(c=c.listOfLayerEntryConfig)||void 0===c||null===(c=c[0])||void 0===c||null===(c=c.initialSettings)||void 0===c||null===(c=c.controls)||void 0===c?void 0:c.highlight,o)},function(r){t.helperFinalizeStepRemoveLayerConfigAndAssert(r,e.getMapViewer(),"geojsonLYR1/point-feature-group")})}}],[{key:"helperStepAddLayerOnMap",value:(p=(0,a.A)(f().mark(function e(t,r,n){var a;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.addStep("Adding the layer on the map..."),a=r.layer.addGeoviewLayer(n),t.addStep("Waiting for the layer to be added..."),e.next=1,a.promiseLayer;case 1:return a.layer.throwAggregatedLayerLoadErrors(),e.abrupt("return",a);case 2:case"end":return e.stop()}},e)})),function(e,t,r){return p.apply(this,arguments)})},{key:"helperStepAddLayerOnMapFromUUID",value:(n=(0,a.A)(f().mark(function e(t,r,n){var a;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.addStep("Adding the layer on the map..."),e.next=1,r.layer.addGeoviewLayerByGeoCoreUUID(n);case 1:return a=e.sent,t.addStep("Waiting for the layer to be added..."),e.next=2,null==a?void 0:a.promiseLayer;case 2:return null==a||a.layer.throwAggregatedLayerLoadErrors(),e.abrupt("return",a);case 3:case"end":return e.stop()}},e)})),function(e,t,r){return n.apply(this,arguments)})},{key:"helperStepCheckLayerAtLayerPath",value:(r=(0,a.A)(f().mark(function e(t,r,n){var a,i,o=arguments;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=!(o.length>3&&void 0!==o[3])||o[3],t.addStep("Find the layer ".concat(n," on the map...")),i=r.layer.getGeoviewLayer(n),t.addStep("Waiting for the layer to be loaded..."),e.next=1,i.waitLoadedOnce();case 1:return t.addStep("Wait for the legend to be fetched..."),e.next=2,i.waitLegendFetched();case 2:if(!a){e.next=3;break}return t.addStep("Wait for the style to be applied..."),e.next=3,i.waitStyleApplied();case 3:return e.abrupt("return",i);case 4:case"end":return e.stop()}},e)})),function(e,t,n){return r.apply(this,arguments)})},{key:"helperStepAssertLayerExists",value:function(e,t,r){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=A.K.getLegendLayerInfo(t.mapId,r);e.addStep("Verify the layer ".concat(r," has legend information...")),l.V.assertIsDefined("legendLayer",a),n&&this.helperStepAssertStyleApplied(e,t,r)}},{key:"helperStepAssertStyleApplied",value:function(e,t,r){var n=A.K.getLegendLayerInfo(t.mapId,r);e.addStep("Verify the icons were loaded for the layer..."),l.V.assertIsArrayLengthMinimal(null==n?void 0:n.icons,1);var a=n.icons[0],i=a.iconImage&&"no data"!==a.iconImage;l.V.assertIsEqual(i,!0)}},{key:"helperFinalizeStepRemoveLayerAndAssert",value:function(e,t,r){e.addStep("Checking the layer path ".concat(r," exists on the map...")),l.V.assertArrayIncludes(t.layer.getGeoviewLayerPaths(),r),e.addStep("Removing the layer ".concat(r," from the map...")),t.layer.removeLayerUsingPath(r),e.addStep("Check that the layer is indeed removed...");var n=A.K.getLegendLayers(t.mapId);l.V.assertArrayExcludes(n.map(function(e){return e.layerPath}),r)}},{key:"helperFinalizeStepRemoveLayerConfigAndAssert",value:function(e,t,r){e.addStep("Checking the geoview layer ".concat(r," exists on the map...")),l.V.assertIsDefined("layerEntryConfig "+r,t.layer.getLayerEntryConfigIfExists(r)),e.addStep("Removing the geoview layer ".concat(r," from the map...")),t.layer.removeLayerUsingPath(r),e.addStep("Validate that the layer is indeed gone..."),l.V.assertIsUndefined("layerEntryConfig "+r,t.layer.getLayerEntryConfigIfExists(r))}}]);var r,n,p}(h.N);n()}catch(M){n(M)}})},51294:(e,t,r)=>{r.a(e,async(e,n)=>{try{r.d(t,{N:()=>y});var a,i=r(64477),o=r(43549),s=r(51310),u=r(54074),c=r(75509),p=r(10379),f=r(22781),l=e([f]);function g(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(g=function(){return!!e})()}function A(e,t,r){v(e,t),t.set(e,r)}function v(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function E(e,t){return e.get(L(e,t))}function S(e,t,r){return e.set(L(e,t),r),r}function L(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}f=(l.then?(await l)():l)[0];var h=new WeakMap,d=new WeakMap,y=function(e){function t(e,r){var n,a,o,c;return(0,i.A)(this,t),a=this,o=t,o=(0,u.A)(o),A(n=(0,s.A)(a,g()?Reflect.construct(o,c||[],(0,u.A)(a).constructor):o.apply(a,c)),h,void 0),A(n,d,void 0),S(h,n,e),S(d,n,r),n}return(0,c.A)(t,e),(0,o.A)(t,[{key:"getApi",value:function(){return E(h,this)}},{key:"getMapViewer",value:function(){return E(d,this)}},{key:"getMapId",value:function(){return this.getMapViewer().mapId}}])}(f.c);a=y,(0,p.A)(y,"QUEBEC_LONLAT",[-71.356054449131,46.78077550041052]),(0,p.A)(y,"MANITOBA_CENTER_LONLAT",[-86.73558298224057,50.833271435899974]),(0,p.A)(y,"BAD_URL","https://badurl/oops"),(0,p.A)(y,"FAKE_URL_ALWAYS_RETURNING_RESPONSE_INSTEAD_OF_NETWORK_ERROR","https://maps.canada.ca/wmsproxy/ws/wmsproxy/executeFromProxy"),(0,p.A)(y,"AIRBORNE_RADIOACTIVITY_UUID","21b821cf-0f1c-40ee-8925-eab12d357668"),(0,p.A)(y,"AIRBORNE_RADIOACTIVITY_GROUP",a.AIRBORNE_RADIOACTIVITY_UUID+"/0"),(0,p.A)(y,"AIRBORNE_RADIOACTIVITY_UUID_WITH_SUFFIX",a.AIRBORNE_RADIOACTIVITY_UUID+"/0/1"),(0,p.A)(y,"AIRBORNE_RADIOACTIVITY_LAYER_GROUP_NAME","Airborne Radioactivity"),(0,p.A)(y,"HISTORICAL_FLOOD_URL_MAP_SERVER","https://maps-cartes.services.geo.ca/server_serveur/rest/services/NRCan/historical_flood_event_en/MapServer"),(0,p.A)(y,"HISTORICAL_FLOOD_URL_LAYER_ID","0"),(0,p.A)(y,"HISTORICAL_FLOOD_LAYER_NAME","Historical Flood Events"),(0,p.A)(y,"HISTORICAL_FLOOD_URL_FEATURE_SERVER",a.HISTORICAL_FLOOD_URL_MAP_SERVER+"/"+a.HISTORICAL_FLOOD_URL_LAYER_ID),(0,p.A)(y,"FOREST_INDUSTRY_MAP_SERVER","https://maps-cartes.services.geo.ca/server_serveur/rest/services/NRCan/forest_industry_hotspots_en/MapServer"),(0,p.A)(y,"FOREST_INDUSTRY_LAYER_ID","0"),(0,p.A)(y,"FOREST_INDUSTRY_LAYER_NAME","Location of mill facilities"),(0,p.A)(y,"FOREST_INDUSTRY_FEATURE_SERVER",a.FOREST_INDUSTRY_MAP_SERVER+"/"+a.FOREST_INDUSTRY_LAYER_ID),(0,p.A)(y,"ESRI_DYNAMIC_LABOUR_FORCE_UUID","ac2096a6-7b4a-464e-9e08-eca7873dd88c"),(0,p.A)(y,"ESRI_DYNAMIC_LABOUR_FORCE_GROUP","0"),(0,p.A)(y,"ESRI_DYNAMIC_LABOUR_FORCE_PETROLEUM","0/1"),(0,p.A)(y,"ESRI_DYNAMIC_LABOUR_FORCE_MINERALS","0/2"),(0,p.A)(y,"ESRI_DYNAMIC_LABOUR_FORCE_FORESTRY","0/3"),(0,p.A)(y,"ESRI_DYNAMIC_LABOUR_FORCE_FISHERIES","0/4"),(0,p.A)(y,"ESRI_DYNAMIC_LABOUR_FORCE_AGRICULTURE","0/5"),(0,p.A)(y,"ESRI_DYNAMIC_LABOUR_FORCE_CANECUMENE","0/6"),(0,p.A)(y,"CESI_MAP_SERVER","https://maps-cartes.ec.gc.ca/arcgis/rest/services/CESI/MapServer"),(0,p.A)(y,"CESI_GROUP_0_LAYER_NAME","Water quantity"),(0,p.A)(y,"FEATURE_SERVER_TORONTO_NEIGHBOURHOODS_URL","https://services.arcgis.com/V6ZHFr6zdgNZuVG0/ArcGIS/rest/services/Toronto_Neighbourhoods/FeatureServer"),(0,p.A)(y,"FEATURE_SERVER_TORONTO_NEIGHBOURHOODS_LAYER_NAME","Toronto_Neighbourhoods"),(0,p.A)(y,"IMAGE_SERVER_ELEVATION_URL","https://ws.geoservices.lrc.gov.on.ca/arcgis5/rest/services/Elevation/FRI_CHM_SPL/ImageServer"),(0,p.A)(y,"IMAGE_SERVER_ELEVATION_LAYER_ID","FRI_CHM_SPL"),(0,p.A)(y,"IMAGE_SERVER_USA_URL","https://sampleserver6.arcgisonline.com/ArcGIS/rest/services/USA/MapServer"),(0,p.A)(y,"IMAGE_SERVER_USA_LAYER_ID_CITIES","0"),(0,p.A)(y,"IMAGE_SERVER_USA_LAYER_ID_ROADS","1"),(0,p.A)(y,"OWS_MUNDIALIS","https://ows.mundialis.de/services/service"),(0,p.A)(y,"OWS_MUNDIALIS_LAYER_ID","Dark"),(0,p.A)(y,"DATACUBE_MSI","https://datacube.services.geo.ca/ows/msi"),(0,p.A)(y,"DATACUBE_MSI_LAYER_NAME_MSI","msi"),(0,p.A)(y,"DATACUBE_MSI_LAYER_NAME_MSI_OR_MORE","msi-94-or-more"),(0,p.A)(y,"DATACUBE_MSI_LAYERS_MSI_GET_CAP",a.DATACUBE_MSI+"?request=GetCapabilities&amp;service=wms&amp;version=1.3.0&amp;layers=msi"),(0,p.A)(y,"DATACUBE_RING_FIRE","https://datacube.services.geo.ca/web/aerial.xml"),(0,p.A)(y,"DATACUBE_RING_FIRE_LAYER_ID_HALIFAX","halifax"),(0,p.A)(y,"DATACUBE_RING_FIRE_LAYER_ID_VICTORIA","victoria"),(0,p.A)(y,"GEOMET_URL","https://geo.weather.gc.ca/geomet"),(0,p.A)(y,"GEOMET_URL_CURRENT_COND_LAYER_ID","ec-msc:CURRENT_CONDITIONS"),(0,p.A)(y,"GEOJSON_METADATA_META","https://canadian-geospatial-platform.github.io/geoview/public/datasets/geojson/metadata.meta"),(0,p.A)(y,"GEOJSON_METADATA_META_FILE","metadata.meta"),(0,p.A)(y,"GEOJSON_POLYGONS","polygons.json"),(0,p.A)(y,"CSV_STATION_LIST","https://canadian-geospatial-platform.github.io/geoview/public/datasets/csv-files/Station_List_Minus_HQ-MELCC.csv"),(0,p.A)(y,"CSV_STATION_LIST_FILE","Station_List_Minus_HQ-MELCC.csv"),(0,p.A)(y,"PYGEOAPI_B6RYUVAKK5","https://b6ryuvakk5.execute-api.us-east-1.amazonaws.com/dev"),(0,p.A)(y,"PYGEOAPI_B6RYUVAKK5_LAKES","lakes"),(0,p.A)(y,"WKB_SOUTH_AFRICA","0103000000010000000500000054E3A59BC4602540643BDF4F8D1739C05C8FC2F5284C4140EC51B81E852B34C0D578E926316843406F1283C0CAD141C01B2FDD2406012B40A4703D0AD79343C054E3A59BC4602540643BDF4F8D1739C0"),(0,p.A)(y,"KML_TORNADO","https://canadian-geospatial-platform.github.io/geoview/public/datasets/kml-files/CanadianNationalTornadoDatabase_1980-2009.kml"),(0,p.A)(y,"KML_TORNADO_FILE","CanadianNationalTornadoDatabase_1980-2009.kml"),(0,p.A)(y,"GEOTIFF_VEGETATION","https://datacube-prod-data-public.s3.ca-central-1.amazonaws.com/store/eo4ce/vegetation/vegetation-2020-fCOVER.tif"),(0,p.A)(y,"GEOTIFF_VEGETATION_FILE","vegetation-2020-fCOVER.tif"),(0,p.A)(y,"INITIAL_SETTINGS_CONFIG",{geoviewLayerId:"geojsonLYR1",geoviewLayerName:"GeoJSON Sample",metadataAccessPath:"./datasets/geojson/metadata.meta",geoviewLayerType:"GeoJSON",initialSettings:{controls:{highlight:!1,zoom:!1}},listOfLayerEntryConfig:[{entryType:"group",layerId:"point-feature-group",layerName:"Points & Icons",initialSettings:{controls:{remove:!1}},listOfLayerEntryConfig:[{layerId:"points_1.json",layerName:"Points 1",initialSettings:{controls:{highlight:!0}}}]}]}),n()}catch(w){n(w)}})},54039:(e,t,r)=>{r.a(e,async(e,n)=>{try{r.d(t,{V:()=>_});var a,i=r(76092),o=r(55940),s=r(64477),u=r(43549),c=r(24469),p=r(60746),f=r(89778),l=r(85516),h=e([l]),d=h.then?(await h)():h;function T(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=O(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function O(e,t){if(e){if("string"==typeof e)return m(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?m(e,t):void 0}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function R(e,t,r){C(e,t),t.set(e,r)}function C(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function k(e,t){return e.get(V(e,t))}function M(e,t,r){return e.set(V(e,t),r),r}function V(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}l=d[0];var y=new WeakMap,g=new WeakMap,A=new WeakMap,v=new WeakMap,E=new WeakMap,S=new WeakMap,L=new WeakMap,w=new WeakMap,I=new WeakSet,_=function(){function e(t){var r,n;(0,s.A)(this,e),C(r=this,n=I),n.add(r),R(this,y,void 0),R(this,g,"regular"),R(this,A,[]),R(this,v,"new"),R(this,E,void 0),R(this,S,void 0),R(this,L,[]),R(this,w,[]),this.id=(0,l.generateId)(),M(y,this,t)}return(0,u.A)(e,[{key:"getTitle",value:function(){return k(y,this)}},{key:"setTitle",value:function(e){M(y,this,e)}},{key:"getType",value:function(){return k(g,this)}},{key:"setType",value:function(e){M(g,this,e)}},{key:"getStatus",value:function(){return k(v,this)}},{key:"setStatus",value:function(e){M(v,this,e),V(I,this,D).call(this,{status:e})}},{key:"getSteps",value:function(){return k(A,this)}},{key:"getStepsAsHtml",value:function(){var e=this.getSteps();if(0===e.length)return"";var t,r='<ul style="font-size: small;">',n="",a=[],i=T(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;"major"===o.level?(n&&(a.length>0&&(n+="<ul>".concat(a.join(""),"</ul>")),r+="<li>".concat(n,"</li>"),a=[]),n='<strong><font style="color: '.concat(o.color,';">').concat(o.message,"</font></strong>")):a.push("<li>".concat(o.message,"</li>"))}}catch(e){i.e(e)}finally{i.f()}return n&&(a.length>0&&(n+="<ul>".concat(a.join(""),"</ul>")),r+="<li>".concat(n,"</li>")),r+="</ul>"}},{key:"addStep",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"regular",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"black";k(A,this).push(new p.p(e,t,r)),V(I,this,F).call(this,{step:e})}},{key:"getResult",value:function(){return k(E,this)}},{key:"setResult",value:function(e){M(E,this,e)}},{key:"getError",value:function(){return k(S,this)}},{key:"setError",value:function(e){M(S,this,e)}},{key:"onStatusChanged",value:function(e){f.A.onEvent(k(L,this),e)}},{key:"offStatusChanged",value:function(e){f.A.offEvent(k(L,this),e)}},{key:"onStepChanged",value:function(e){f.A.onEvent(k(w,this),e)}},{key:"offStepChanged",value:function(e){f.A.offEvent(k(w,this),e)}}],[{key:"assertIsEqual",value:function(e,t){if(e!==t)throw new c.k6(e,t)}},{key:"assertIsArrayEqual",value:function(e,t){if(!Array.isArray(e))throw new c.h5(e);if(!Array.isArray(t))throw new c.h5(t);if(e.length!==t.length)throw new c.O3(e.length,t.length);for(var r=0;r<e.length;r++)if(e[r]!==t[r])throw new c.UJ(e,t,r,t[r],e[r])}},{key:"assertIsDefined",value:function(e,t){if(null==t)throw new c.NM(e)}},{key:"assertIsUndefined",value:function(e,t){if(null!=t)throw new c.Ol(e,t)}},{key:"assertIsInstance",value:function(t,r){if(e.assertIsDefined("Object instance",t),!(t instanceof r))throw new c.zy(t,r)}},{key:"assertIsErrorInstance",value:function(e,t){if(!e)throw new c.kY(t);if(!(e instanceof t))throw new c.DR(e,t)}},{key:"assertIsArrayLengthEqual",value:function(e,t){if((null==e?void 0:e.length)!==t)throw new c.O3(null==e?void 0:e.length,t)}},{key:"assertIsArrayLengthMinimal",value:function(e,t){var r,n;if(!(null!==(r=null==e?void 0:e.length)&&void 0!==r?r:0>=t))throw new c.DQ(null!==(n=null==e?void 0:e.length)&&void 0!==n?n:0,t)}},{key:"assertArrayIncludes",value:function(e,t){if(!e.includes(t))throw new c.nQ(e,t)}},{key:"assertArrayExcludes",value:function(e,t){if(e.includes(t))throw new c.z5(e,t)}},{key:"assertJsonObject",value:function(t,r){if(t instanceof Promise)throw new c.xA("The JSON object to verify is a promise, are you missing an await in your test process?");var n=V(e,this,N).call(this,t,r);if(!n.ok)throw new c.QR(n.mismatches,t,r)}}])}();function N(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=[],s=function(e){return r?"".concat(r,".").concat(e):"".concat(e)};if("object"!==(0,o.A)(t)||null===t)return t!==e&&n.push("".concat(r,"  actual: ").concat(JSON.stringify(e),", expected: ").concat(JSON.stringify(t))),{ok:0===n.length,mismatches:n};if(Array.isArray(t)){if(!Array.isArray(e))return n.push("".concat(r,"  actual: ").concat((0,o.A)(e),", expected an array")),{ok:!1,mismatches:n};for(var u=0;u<t.length;u++){var c,p=t[u],f=!1,l=[],h=T(e);try{for(h.s();!(c=h.n()).done;){var d=c.value,y=V(a,this,N).call(this,d,p,"".concat(r,"[").concat(u,"]"));if(y.ok){f=!0;break}0===l.length&&(l=y.mismatches)}}catch(e){h.e(e)}finally{h.f()}f||n.push.apply(n,(0,i.A)(l))}return{ok:0===n.length,mismatches:n}}if("object"!==(0,o.A)(e)||null===e||Array.isArray(e))return n.push("".concat(r,"  actual: ").concat(JSON.stringify(e),", expected an object")),{ok:!1,mismatches:n};for(var g=0,A=Object.keys(t);g<A.length;g++){var v=A[g];if(v in e){var E=V(a,this,N).call(this,e[v],t[v],s(v));n.push.apply(n,(0,i.A)(E.mismatches))}else n.push("".concat(s(v),"  missing key, expected: ").concat(JSON.stringify(t[v])))}return{ok:0===n.length,mismatches:n}}function D(e){f.A.emitEvent(this,k(L,this),e)}function F(e){f.A.emitEvent(this,k(w,this),e)}a=_,n()}catch(U){n(U)}})},60746:(e,t,r)=>{r.d(t,{p:()=>i});var n=r(43549),a=r(64477),i=(0,n.A)(function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"regular",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"black";(0,a.A)(this,e),this.message=t,this.level=r,this.color=n})},65821:(e,t,r)=>{r.a(e,async(e,n)=>{try{r.d(t,{x:()=>v});var a=r(80171),i=r(64477),o=r(43549),s=r(51310),u=r(54074),c=r(75509),p=r(50124),f=r.n(p),l=r(24469),h=r(51294),d=r(73665),y=r(17562),g=e([h,d]);function E(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(E=function(){return!!e})()}function S(e,t,r){L(e,t),t.set(e,r)}function L(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function w(e,t){return e.get(I(e,t))}function I(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}[h,d]=g.then?(await g)():g;var A=new WeakMap,v=function(e){function t(e,r){var n,a,o,c,p,f,l;return(0,i.A)(this,t),a=this,o=t,c=[e,r],o=(0,u.A)(o),S(n=(0,s.A)(a,E()?Reflect.construct(o,c||[],(0,u.A)(a).constructor):o.apply(a,c)),A,void 0),p=A,f=n,l=new d.f(e,r),p.set(I(p,f),l),n.addTester(w(A,n)),n}return(0,c.A)(t,e),(0,o.A)(t,[{key:"getName",value:function(){return"Geochart Test Suite"}},{key:"getDescriptionAsHtml",value:function(){return"Test Suite to perform various Geochart related tests."}},{key:"onCanExecuteTestSuite",value:function(){var e;if(!((null===(e=this.getMapViewer().mapFeaturesConfig.footerBar)||void 0===e||null===(e=e.tabs)||void 0===e?void 0:e.core)||[]).includes("geochart"))throw new l.tL("To run this Test Suite, the geochart plugin has to be loaded in the footerBar tabs core array.");return Promise.resolve(!0)}},{key:"onLaunchTestSuite",value:(r=(0,a.A)(f().mark(function e(){var t,r;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=w(A,this).testGeochartOpenForLayerMapClick("geojsonLYR5/polygons.json",h.N.MANITOBA_CENTER_LONLAT),e.next=1,t;case 1:return r=w(A,this).testAddGeocoreLayerUUIDForGeochartAirborne(),e.abrupt("return",Promise.all([t,r]));case 2:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})}]);var r}(y.e);n()}catch(_){n(_)}})},73665:(e,t,r)=>{r.a(e,async(e,n)=>{try{r.d(t,{f:()=>S});var a=r(80171),i=r(10379),o=r(64477),s=r(43549),u=r(51310),c=r(54074),p=r(75509),f=r(50124),l=r.n(f),h=r(54039),d=r(51294),y=r(41265),g=r(85516),A=r(14613),v=r(26256),E=e([h,d,y,g,A,v]);function L(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(L=function(){return!!e})()}[h,d,y,g,A,v]=E.then?(await E)():E;var S=function(e){function t(){return(0,o.A)(this,t),e=this,r=t,n=arguments,r=(0,c.A)(r),(0,u.A)(e,L()?Reflect.construct(r,n||[],(0,c.A)(e).constructor):r.apply(e,n));var e,r,n}return(0,p.A)(t,e),(0,s.A)(t,[{key:"getName",value:function(){return"GeochartTester"}},{key:"testGeochartOpenForLayerMapClick",value:function(e,r){var n=this;return this.test("Test Geochart on layer ".concat(e,"..."),function(a){return t.helperStepLayerWithGeochart(a,n.getMapViewer(),e,r)},function(t){t.addStep("Verifying 'geochart' is the selected footer tab..."),h.V.assertIsEqual(v.d.getActiveFooterBarTab(n.getMapId()),"geochart"),t.addStep("Verifying "+e+" is the selected layer for the geochart..."),h.V.assertIsEqual(A.U.getSingleGeochartState(n.getMapId(),"selectedLayerPath"),e)})}},{key:"testAddGeocoreLayerUUIDForGeochartAirborne",value:function(){return this.testAddGeocoreLayerUUIDForGeochart(d.N.AIRBORNE_RADIOACTIVITY_UUID,d.N.AIRBORNE_RADIOACTIVITY_UUID_WITH_SUFFIX,d.N.AIRBORNE_RADIOACTIVITY_GROUP,d.N.QUEBEC_LONLAT,(0,i.A)({},d.N.AIRBORNE_RADIOACTIVITY_UUID_WITH_SUFFIX,{layers:[{layerId:d.N.AIRBORNE_RADIOACTIVITY_UUID_WITH_SUFFIX,propertyValue:"Location_Emplacement",propertyDisplay:"OBJECTID"}],chart:"line",query:{type:"esriRegular",url:"https://maps-cartes.services.geo.ca/server_serveur/rest/services/HC/airborne_radioactivity_en/MapServer/3",queryOptions:{whereClauses:[{field:"Location_Emplacement",prefix:"'",valueFrom:"Location_Emplacement",suffix:"'"}],orderByField:"CollectionStart_DebutPrelevement"}}}))}},{key:"testAddGeocoreLayerUUIDForGeochart",value:function(e,r,n,i,o){var s=this;return this.test("Test Geochart",function(){var n=(0,a.A)(l().mark(function n(a){var o;return l().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a.addStep("Adding the layer on the map for ".concat(e)),n.next=1,s.getMapViewer().layer.addGeoviewLayerByGeoCoreUUID(e);case 1:return o=n.sent,a.addStep("Adding the layer on the map..."),n.next=2,o.promiseLayer;case 2:return n.abrupt("return",t.helperStepLayerWithGeochart(a,s.getMapViewer(),r,i));case 3:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}(),function(e){e.addStep("Verifying expected geochart config...");var t=A.U.getSingleGeochartState(s.getMapId(),"geochartChartsConfig");h.V.assertJsonObject(t,o),e.addStep("Verifying 'geochart' is the selected footer tab..."),h.V.assertIsEqual(v.d.getActiveFooterBarTab(s.getMapId()),"geochart"),e.addStep("Verifying "+r+" is the selected layer for the geochart..."),h.V.assertIsEqual(A.U.getSingleGeochartState(s.getMapId(),"selectedLayerPath"),r)},function(e){y.V.helperFinalizeStepRemoveLayerAndAssert(e,s.getMapViewer(),n)})}}],[{key:"helperStepLayerWithGeochart",value:(r=(0,a.A)(l().mark(function e(t,r,n,a){var i;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.addStep("Getting the layer with the geochart ".concat(n,"...")),i=r.layer.getGeoviewLayer(n),t.addStep("Waiting for its layer 'loaded' status..."),e.next=1,i.waitLoadedOnce();case 1:return t.addStep("Perform query operation at given coordinates..."),e.next=2,r.layer.featureInfoLayerSet.queryLayers(a);case 2:return t.addStep("Setting active footerbar tab to geochart..."),v.d.setActiveFooterBarTab(r.mapId,"geochart"),t.addStep("Waiting on UI to refresh..."),e.next=3,(0,g.delay)(2e3);case 3:return t.addStep("Selecting the geochart for the added layer..."),A.U.setSelectedGeochartLayerPath(r.mapId,n),e.next=4,(0,g.delay)(1e3);case 4:return e.abrupt("return",i);case 5:case"end":return e.stop()}},e)})),function(e,t,n,a){return r.apply(this,arguments)})}]);var r}(d.N);n()}catch(w){n(w)}})},92403:(e,t,r)=>{r.a(e,async(e,t)=>{try{var n=r(80171),a=r(64477),i=r(43549),o=r(51310),s=r(54074),u=r(98615),c=r(75509),p=r(10379),f=r(50124),l=r.n(f),h=r(30538),d=r(75041),y=r(61680),g=r(89778),A=r(24469),v=r(10512),E=r(34624),S=r(65821),L=r(95637),w=e([d,y,v,E,S,L]);function k(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=M(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function M(e,t){if(e){if("string"==typeof e)return V(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?V(e,t):void 0}}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(Object(r),!0).forEach(function(t){(0,p.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function F(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(F=function(){return!!e})()}function U(e,t){x(e,t),t.add(e)}function G(e,t,r){x(e,t),t.set(e,r)}function x(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function b(e,t,r){return e.set(P(e,t),r),r}function W(e,t){return e.get(P(e,t))}function P(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}[d,y,v,E,S,L]=w.then?(await w)():w;var I=new WeakMap,_=new WeakMap,T=new WeakMap,O=new WeakMap,m=new WeakMap,R=new WeakSet,C=function(e){function t(){var e,r,n,i;(0,a.A)(this,t);for(var u=arguments.length,c=new Array(u),f=0;f<u;f++)c[f]=arguments[f];return r=this,n=t,i=[].concat(c),n=(0,s.A)(n),U(e=(0,o.A)(r,F()?Reflect.construct(n,i||[],(0,s.A)(r).constructor):n.apply(r,i)),R),(0,p.A)(e,"testSuites",[]),G(e,I,0),G(e,_,[]),G(e,T,[]),G(e,O,[]),G(e,m,[]),e}return(0,c.A)(t,e),(0,i.A)(t,[{key:"schema",value:function(){return{}}},{key:"defaultConfig",value:function(){return{}}},{key:"defaultTranslations",value:function(){return{}}},{key:"getConfig",value:function(){return(e=t,r="getConfig",n=this,a=3,i=(0,u.A)((0,s.A)(1&a?e.prototype:e),r,n),2&a&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([]);var e,r,n,a,i}},{key:"onAdd",value:function(){var e=this;if(!this.getConfig().suites||0===this.getConfig().suites.length)throw new y.$0(this.pluginId,this.mapViewer.mapId,"corePackagesConfig");this.getConfig().suites.forEach(function(t){if("suite-config"===t)e.addTestSuite(new E.A(window.cgpv.api,e.mapViewer));else if("suite-map"===t)e.addTestSuite(new v.d(window.cgpv.api,e.mapViewer));else if("suite-layer"===t)e.addTestSuite(new L.J(window.cgpv.api,e.mapViewer));else{if("suite-geochart"!==t)throw new y.$I(t,e.mapViewer.mapId);e.addTestSuite(new S.x(window.cgpv.api,e.mapViewer))}})}},{key:"onRemove",value:function(){}},{key:"addTestSuite",value:function(e){var t=this;this.testSuites.push(e),e.onTestStarted(function(e,r){P(R,t,B).call(t,D(D({},r),{},{suite:e}))}),e.onTestUpdated(function(e,r){P(R,t,j).call(t,D(D({},r),{},{suite:e}))}),e.onSuccess(function(e,r){P(R,t,Y).call(t,D(D({},r),{},{suite:e}))}),e.onFailure(function(e,r){P(R,t,z).call(t,D(D({},r),{},{suite:e}))})}},{key:"launchTestSuites",value:(r=(0,n.A)(l().mark(function e(){var t,r,n,a,i;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.getTestsRunning()>0)){e.next=1;break}throw new A.sH;case 1:this.resetTestSuites(),t=k(this.testSuites),e.prev=2,t.s();case 3:if((r=t.n()).done){e.next=6;break}return a=r.value,e.next=4,a.launchTestSuite();case 4:b(I,this,(n=W(I,this),++n));case 5:e.next=3;break;case 6:e.next=8;break;case 7:e.prev=7,i=e.catch(2),t.e(i);case 8:return e.prev=8,t.f(),e.finish(8);case 9:case"end":return e.stop()}},e,this,[[2,7,8,9]])})),function(){return r.apply(this,arguments)})},{key:"resetTestSuites",value:function(){if(this.getTestsRunning()>0)throw new A.sH;b(I,this,0),this.testSuites.forEach(function(e){e.resetTestSuite()})}},{key:"getDescriptionAsHtml",value:function(){return this.testSuites.map(function(e){return e.getDescriptionAsHtml()}).join("<br/>")}},{key:"getSuitesCompleted",value:function(){return W(I,this)}},{key:"getSuitesTotal",value:function(){return this.testSuites.length}},{key:"getSuitesDone",value:function(){return this.getSuitesCompleted()===this.getSuitesTotal()}},{key:"getTestsRunning",value:function(){return this.testSuites.reduce(function(e,t){return e+t.getTestsRunning()},0)}},{key:"getTestsDone",value:function(){return this.testSuites.reduce(function(e,t){return e+t.getTestsDone()},0)}},{key:"getTestsDoneSuccess",value:function(){return this.testSuites.reduce(function(e,t){return e+t.getTestsDoneSuccess()},0)}},{key:"getTestsDoneFailed",value:function(){return this.testSuites.reduce(function(e,t){return e+t.getTestsDoneFailed()},0)}},{key:"getTestsTotal",value:function(){return this.testSuites.reduce(function(e,t){return e+t.getTestsTotal()},0)}},{key:"getTestsDoneAll",value:function(){return this.testSuites.every(function(e){return e.getTestsDoneAll()})}},{key:"getTestsDoneAllAndSuiteDone",value:function(){return this.getSuitesDone()&&this.getTestsDoneAll()}},{key:"getTestsDoneAllSuccess",value:function(){return this.getTestsDoneAll()&&this.testSuites.every(function(e){return e.getTestsDoneAllSuccess()})}},{key:"getTestsDoneAllSuccessAndSuiteDone",value:function(){return this.getSuitesDone()&&this.getTestsDoneAllSuccess()}},{key:"onTestStarted",value:function(e){g.A.onEvent(W(_,this),e)}},{key:"offTestStarted",value:function(e){g.A.offEvent(W(_,this),e)}},{key:"onTestUpdated",value:function(e){g.A.onEvent(W(T,this),e)}},{key:"offTestUpdated",value:function(e){g.A.offEvent(W(T,this),e)}},{key:"onSuccess",value:function(e){g.A.onEvent(W(O,this),e)}},{key:"offSuccess",value:function(e){g.A.offEvent(W(O,this),e)}},{key:"onFailure",value:function(e){g.A.onEvent(W(m,this),e)}},{key:"offFailure",value:function(e){g.A.offEvent(W(m,this),e)}}]);var r}(d.G);function B(e){g.A.emitEvent(this,W(_,this),e)}function j(e){g.A.emitEvent(this,W(T,this),e)}function Y(e){g.A.emitEvent(this,W(O,this),e)}function z(e){g.A.emitEvent(this,W(m,this),e)}h===window.cgpv.reactUtilities.react&&(window.geoviewPlugins=window.geoviewPlugins||{},window.geoviewPlugins["test-suite"]=C),t()}catch(K){t(K)}})},95168:(e,t,r)=>{r.a(e,async(e,n)=>{try{r.d(t,{q:()=>E});var a=r(80171),i=r(64477),o=r(43549),s=r(51310),u=r(54074),c=r(75509),p=r(50124),f=r.n(p),l=r(24469),h=r(54039),d=r(51294),y=r(85516),g=r(21286),A=e([h,d,y,g]);function S(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(S=function(){return!!e})()}function L(e,t){w(e,t),t.add(e)}function w(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function I(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}[h,d,y,g]=A.then?(await A)():A;var v=new WeakSet,E=function(e){function t(){var e,r,n,a;(0,i.A)(this,t);for(var o=arguments.length,c=new Array(o),p=0;p<o;p++)c[p]=arguments[p];return r=this,n=t,a=[].concat(c),n=(0,u.A)(n),L(e=(0,s.A)(r,S()?Reflect.construct(n,a||[],(0,u.A)(r).constructor):n.apply(r,a)),v),e}return(0,c.A)(t,e),(0,o.A)(t,[{key:"getName",value:function(){return"MapTester"}},{key:"testMapState",value:function(){var e=this,t={currentProjection:I(v,this,_).call(this).map.viewSettings.projection};return this.test("Test projection",function(){return g.d.getMapState(e.getMapId())},function(e,r){e.addStep("Verifying expected projection config..."),h.V.assertJsonObject(r,t)})}},{key:"testMapZoom",value:function(e,t){var r=this,n=g.d.getMapState(this.getMapId()).currentZoom;return this.test("Test zoom",function(){var i=(0,a.A)(f().mark(function a(i){return f().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(n!==e){a.next=1;break}throw new l.xA("False precondition, map zoom was already at zoom destination ".concat(e));case 1:return i.addStep("Performing zoom..."),a.next=2,g.d.zoom(r.getMapId(),e,t);case 2:return i.addStep("Waiting for zoom to finish..."),a.next=3,(0,y.delay)(t+1e3);case 3:return a.abrupt("return",e);case 4:case"end":return a.stop()}},a)}));return function(e){return i.apply(this,arguments)}}(),function(e,t){e.addStep("Verifying expected zoom in the store..."),h.V.assertIsEqual(g.d.getMapState(r.getMapId()).currentZoom,t)},function(){var e=(0,a.A)(f().mark(function e(a){return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.addStep("Unzooms to the original zoom..."),e.next=1,g.d.zoom(r.getMapId(),n,t);case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())}},{key:"testSwitchProjectionAndExtent",value:(r=(0,a.A)(f().mark(function e(t,r,n){var i,o,s,u=this;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,g.d.zoomToInitialExtent(this.getMapId());case 1:return i=g.d.getMapState(this.getMapId()),o=i.mapExtent,s=i.currentProjection,e.abrupt("return",this.test("Test switch projection back and forth, zoom and zoom to initial extent",function(){var e=(0,a.A)(f().mark(function e(a){return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s!==r){e.next=1;break}throw new l.xA("False precondition, map projection was already at projection destination ".concat(r));case 1:return a.addStep("Performing projection switch to ".concat(r,"...")),e.next=2,g.d.setProjection(u.getMapId(),r);case 2:return a.addStep("Performing zoom to level ".concat(n,"...")),e.next=3,g.d.zoom(u.getMapId(),n,1e3);case 3:return a.addStep("Performing projection switch to original..."),e.next=4,g.d.setProjection(u.getMapId(),t);case 4:return a.addStep("Performing zomm to inital extent..."),e.next=5,g.d.zoomToInitialExtent(u.getMapId());case 5:return e.abrupt("return",g.d.getMapState(u.getMapId()).mapExtent);case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),function(e,t){e.addStep("Verifying expected map extent in the store..."),h.V.assertIsArrayEqual(o,t)}));case 2:case"end":return e.stop()}},e,this)})),function(e,t,n){return r.apply(this,arguments)})},{key:"testGeometryGroupZIndex",value:function(){var e=this,t="testZIndexGroup",r=[-75.6972,45.4215];return this.test("Test geometry group z-index get/set operations",function(n){n.addStep("Adding circle to test group..."),e.getMapViewer().layer.geometry.addCircle(r,{projection:4326,style:{radius:5,fillColor:"#ff0000",fillOpacity:.3,strokeColor:"#ff0000",strokeWidth:2}},"testCircle",t),n.addStep("Getting initial z-index...");var a=e.getMapViewer().layer.geometry.getGeometryGroupZIndex(t);n.addStep("Initial z-index: ".concat(a)),n.addStep("Setting z-index to 0..."),e.getMapViewer().layer.geometry.setGeometryGroupZIndex(t,0),n.addStep("Getting final z-index...");var i=e.getMapViewer().layer.geometry.getGeometryGroupZIndex(t);return n.addStep("Final z-index: ".concat(i)),{initialZIndex:a,finalZIndex:i}},function(e,t){e.addStep("Verifying initial z-index is undefined..."),h.V.assertIsEqual(t.initialZIndex,void 0),e.addStep("Verifying final z-index is 0..."),h.V.assertIsEqual(t.finalZIndex,0)},function(r){r.addStep("Cleaning up test geometry group..."),e.getMapViewer().layer.geometry.deleteGeometryGroup(t)})}}]);var r}(d.N);function _(){var e=g.d.getGeoViewMapConfig(this.getMapId());if(!e)throw new l.xA("Map config for map id ".concat(this.getMapId()," couldn't be read from store"));return e}n()}catch(T){n(T)}})},95637:(e,t,r)=>{r.a(e,async(e,n)=>{try{r.d(t,{J:()=>d});var a=r(64477),i=r(43549),o=r(51310),s=r(54074),u=r(75509),c=r(17562),p=r(41265),f=e([p]),l=f.then?(await f)():f;function y(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(y=function(){return!!e})()}function g(e,t,r){A(e,t),t.set(e,r)}function A(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function v(e,t){return e.get(E(e,t))}function E(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}p=l[0];var h=new WeakMap,d=function(e){function t(e,r){var n,i,u,c,f,l,d;return(0,a.A)(this,t),i=this,u=t,c=[e,r],u=(0,s.A)(u),g(n=(0,o.A)(i,y()?Reflect.construct(u,c||[],(0,s.A)(i).constructor):u.apply(i,c)),h,void 0),f=h,l=n,d=new p.V(e,r),f.set(E(f,l),d),n.addTester(v(h,n)),n}return(0,u.A)(t,e),(0,i.A)(t,[{key:"getName",value:function(){return"Layer Test Suite"}},{key:"getDescriptionAsHtml",value:function(){return"Test Suite to perform various layer related tests."}},{key:"onLaunchTestSuite",value:function(){var e=v(h,this).testAddEsriDynamicHistoFloodEvents(),t=v(h,this).testAddEsriDynamicWithRasterLayersViaGeocore(),r=v(h,this).testAddEsriDynamicBadUrl(),n=v(h,this).testAddEsriFeatureForestIndustry(),a=v(h,this).testAddEsriFeatureBadUrl(),i=v(h,this).testAddEsriImageWithElevation(),o=v(h,this).testAddEsriImageBadUrl(),s=v(h,this).testAddWMSLayerWithOWSMundialis(),u=v(h,this).testAddWMSLayerWithDatacubeMSI(),c=v(h,this).testAddWMSLayerWithDatacubeRingOfFire(),p=v(h,this).testAddWMSBadUrl(),f=v(h,this).testAddWFSLayerWithWithGeometCurrentConditions(),l=v(h,this).testAddWFSBadUrl(),d=v(h,this).testAddWFSOkayUrlNoCap(),y=v(h,this).testAddGeoJSONWithMetadataPolygons(),g=v(h,this).testAddGeoJSONBadUrl(),A=v(h,this).testAddCSVWithStationList(),E=v(h,this).testAddCSVWithBadUrl(),S=v(h,this).testAddOGCFeatureWithPygeoapi(),L=v(h,this).testAddOGCFeatureWithBadUrl(),w=v(h,this).testAddWKBWithSouthAfrica(),I=v(h,this).testAddWKBWithBadUrl(),_=v(h,this).testAddKMLWithTornado(),T=v(h,this).testAddKMLWithBadUrl(),O=v(h,this).testAddGeotiffLayerWithDatacubeVegetation(),m=v(h,this).testAddGeoTIFFWithBadUrl(),R=v(h,this).testInitialSettingsCascade();return Promise.all([e,t,r,n,a,i,o,s,u,c,p,f,l,d,y,g,A,E,S,L,w,I,_,T,O,m,R])}}])}(c.e);n()}catch(S){n(S)}})}},e=>{var t;t=92403,e(e.s=t)}]);
//# sourceMappingURL=geoview-test-suite.js.map
/*! Package:geoview-drawer: 2.0.1 - "1326e214717d18fd0ba7f8085f99927619ec43d5" - 2025-07-04T15:46:25.292Z */
"use strict";(self.webpackChunkgeoview_core=self.webpackChunkgeoview_core||[]).push([[25],{4471:(e,t,r)=>{r.a(e,async(e,t)=>{try{var n=r(79828),o=r(73674),i=r(29073),a=r(41615),l=r(3046),s=r(80860),c=r(30538),u=r(23384),d=r(72561),g=r(59862),p=r(30966),w=r(7263),h=r(86214),v=(r(99430),e([h]));function f(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(f=function(){return!!e})()}h=(v.then?(await v)():v)[0];var m=function(e){function t(){return(0,n.A)(this,t),e=this,r=t,o=arguments,r=(0,a.A)(r),(0,i.A)(e,f()?Reflect.construct(r,o||[],(0,a.A)(e).constructor):r.apply(e,o));var e,r,o}return(0,s.A)(t,e),(0,o.A)(t,[{key:"schema",value:function(){return p}},{key:"defaultConfig",value:function(){return(0,u.N)(w)}},{key:"defaultTranslations",value:function(){return{en:{drawer:{title:"Draw",stopDrawing:"Stop",stopDrawingTooltip:"Stop Drawing",toggleDrawing:"Toggle Drawing",clear:"Clear",clearTooltip:"Clear the drawings",edit:"Toggle editing",fillColour:"Fill Colour",strokeColour:"Stroke Colour",strokeWidth:"Stroke Width",geometryPicker:"Change geometry type",geometryPickerPanel:"Select a geometry",point:"Point",linestring:"Line",polygon:"Polygon",circle:"Circle",style:"Change Style",toggleMeasurements:"Toggle measurements"}},fr:{drawer:{title:"Dessiner",stopDrawing:"Arrêter",stopDrawingTooltip:"Arrêter le dessin",toggleDrawing:"Basculer",clear:"Effacer",clearTooltip:"Effacer les dessins",edit:"Basculer l'édition",fillColour:"Couleur de remplissage",strokeColour:"Couleur du contour",strokeWidth:"Largeur du contour",geometryPicker:"Changer le type de géométrie",geometryPickerPanel:"Sélectionnez une géométrie",point:"Pointer",linestring:"Ligne",polygon:"Polygone",circle:"Cercle",style:"Changer de style",toggleMeasurements:"Basculer les mesures"}}}}},{key:"getConfig",value:function(){return(e=t,r="getConfig",n=this,o=3,i=(0,l.A)((0,a.A)(1&o?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([]);var e,r,n,o,i}},{key:"onCreateButtonConfigs",value:function(){return g.vF.logInfo("Drawer Plugin - onAdd"),(0,h.P)(this.getConfig())}}])}(d.y);c===window.cgpv.reactUtilities.react&&(window.geoviewPlugins=window.geoviewPlugins||{},window.geoviewPlugins.drawer=m),t()}catch(A){t(A)}})},7263:e=>{e.exports=JSON.parse('{"style":{"fillColor":"#ffcc33","strokeColor":"#000000","strokeWidth":1.3},"activeGeom":"Point","geomTypes":["Point","LineString","Polygon","Circle"]}')},18299:(e,t,r)=>{r.a(e,async(e,n)=>{try{r.d(t,{A:()=>g});var o=r(59988),i=r(15944),a=r(11813),l=r(34425),s=r(90219),c=r(59862),u=r(97282),d=e([i,a,l,s]);function g(){c.vF.logTraceRender("geoview-drawer/src/buttons/draw");var e=window.cgpv,t=e.ui.useTheme,r=e.reactUtilities.react.useMemo,n=t(),d=r(function(){return(0,o.S)(n)},[n]),g=(0,a.t)(),p=(0,l.TT)(),w=(0,l.u6)().toggleDrawing;return(0,u.jsx)(s.IconButton,{id:"draw",tooltip:(0,i.getLocalizedMessage)(g,"drawer.toggleDrawing"),tooltipPlacement:"left",className:p?"highlighted active":"",onClick:function(){w()},sx:d.navButton,children:(0,u.jsx)(s.DrawIcon,{})})}[i,a,l,s]=d.then?(await d)():d,n()}catch(p){n(p)}})},20862:(e,t,r)=>{r.a(e,async(e,n)=>{try{r.d(t,{A:()=>g});var o=r(59988),i=r(15944),a=r(11813),l=r(34425),s=r(90219),c=r(59862),u=r(97282),d=e([i,a,l,s]);function g(){c.vF.logTraceRender("geoview-drawer/src/buttons/clear");var e=window.cgpv,t=e.ui.useTheme,r=e.reactUtilities.react.useMemo,n=t(),d=r(function(){return(0,o.S)(n)},[n]),g=(0,a.t)(),p=(0,l.Ci)(),w=(0,l.u6)().toggleHideMeasurements;return(0,u.jsx)(s.IconButton,{id:"measure",tooltip:(0,i.getLocalizedMessage)(g,"drawer.toggleMeasurements"),tooltipPlacement:"left",onClick:function(){w()},className:p?"":"highlighted active",sx:d.navButton,children:(0,u.jsx)(s.StraightenIcon,{})})}[i,a,l,s]=d.then?(await d)():d,n()}catch(p){n(p)}})},30966:e=>{e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","title":"GeoView Drawer Plugin Config Schema","description":"This Schema validator validates the GeoView Drawer Plugin configuration.","type":"object","properties":{"style":{"fillColor":"string","strokeColor":"string","strokeWidth":"number"},"activeGeom":{"description":"The currently active geometry type.","type":"string","enum":["Point","LineString","Polygon","Circle"]},"geomTypes":{"description":"The list of geometry types that can be drawn.","type":"array","items":{"type":"string","enum":["Point","LineString","Polygon","Circle"]}},"version":{"description":"The schema version used to validate the configuration file. The schema should enumerate the list of versions accepted by this version of the viewer.","type":"string","enum":["1.0"]}},"required":[]}')},36204:(e,t,r)=>{r.d(t,{A:()=>l});var n=r(69687),o=r.n(n),i=r(13341),a=r.n(i)()(o());a.push([e.id,'/* Measurement tooltip styles */\n.drawer-tooltip {\n  position: relative;\n  background: rgba(0, 0, 0, 0.5);\n  border-radius: 4px;\n  color: white;\n  padding: 4px 8px;\n  opacity: 0.7;\n  white-space: nowrap;\n  font-size: 12px;\n  cursor: default;\n  user-select: none;\n}\n\n.drawer-tooltip-measure {\n  opacity: 1;\n  font-weight: bold;\n}\n\n.drawer-tooltip-measure:before {\n  border-top: 6px solid rgba(0, 0, 0, 0.5);\n  border-right: 6px solid transparent;\n  border-left: 6px solid transparent;\n  content: "";\n  position: absolute;\n  bottom: -6px;\n  margin-left: -7px;\n  left: 50%;\n}',"",{version:3,sources:["webpack://./../geoview-drawer/src/measurement-styles.css"],names:[],mappings:"AAAA,+BAA+B;AAC/B;EACE,kBAAkB;EAClB,8BAA8B;EAC9B,kBAAkB;EAClB,YAAY;EACZ,gBAAgB;EAChB,YAAY;EACZ,mBAAmB;EACnB,eAAe;EACf,eAAe;EACf,iBAAiB;AACnB;;AAEA;EACE,UAAU;EACV,iBAAiB;AACnB;;AAEA;EACE,wCAAwC;EACxC,mCAAmC;EACnC,kCAAkC;EAClC,WAAW;EACX,kBAAkB;EAClB,YAAY;EACZ,iBAAiB;EACjB,SAAS;AACX",sourcesContent:['/* Measurement tooltip styles */\r\n.drawer-tooltip {\r\n  position: relative;\r\n  background: rgba(0, 0, 0, 0.5);\r\n  border-radius: 4px;\r\n  color: white;\r\n  padding: 4px 8px;\r\n  opacity: 0.7;\r\n  white-space: nowrap;\r\n  font-size: 12px;\r\n  cursor: default;\r\n  user-select: none;\r\n}\r\n\r\n.drawer-tooltip-measure {\r\n  opacity: 1;\r\n  font-weight: bold;\r\n}\r\n\r\n.drawer-tooltip-measure:before {\r\n  border-top: 6px solid rgba(0, 0, 0, 0.5);\r\n  border-right: 6px solid transparent;\r\n  border-left: 6px solid transparent;\r\n  content: "";\r\n  position: absolute;\r\n  bottom: -6px;\r\n  margin-left: -7px;\r\n  left: 50%;\r\n}'],sourceRoot:""}]);const l=a},48270:(e,t,r)=>{r.a(e,async(e,n)=>{try{r.d(t,{_:()=>d,m:()=>u});var o=r(34425),i=r(11813),a=r(15944),l=r(59862),s=r(97282),c=e([o,i,a]);function u(){var e=window.cgpv.ui.elements.PaletteIcon;return(0,s.jsx)(e,{})}function d(){l.vF.logTraceRender("geoview-drawer/src/buttons/style");var e=window.cgpv,t=e.ui,r=e.reactUtilities.react.useCallback,n=t.elements,c=n.List,u=n.ListItem,d=n.Typography,g=(0,o.KB)(),p=(0,i.t)(),w=(0,o.u6)(),h=w.setFillColor,v=w.setStrokeColor,m=w.setStrokeWidth,f=r(function(e){h(e.target.value)},[h]),A=r(function(e){v(e.target.value)},[v]),y=r(function(e){var t=parseInt(e.target.value,10);Number.isNaN(t)||m(t)},[m]);return(0,s.jsxs)(c,{sx:{p:2},children:[(0,s.jsxs)(u,{sx:{mb:2},children:[(0,s.jsx)(d,{variant:"subtitle2",children:(0,a.getLocalizedMessage)(p,"drawer.fillColour")}),(0,s.jsx)("input",{type:"color",value:g.fillColor,onChange:f})]}),(0,s.jsxs)(u,{sx:{mb:2},children:[(0,s.jsx)(d,{variant:"subtitle2",children:(0,a.getLocalizedMessage)(p,"drawer.strokeColour")}),(0,s.jsx)("input",{type:"color",value:g.strokeColor,onChange:A})]}),(0,s.jsxs)(u,{children:[(0,s.jsx)(d,{variant:"subtitle2",children:(0,a.getLocalizedMessage)(p,"drawer.strokeWidth")}),(0,s.jsx)("input",{type:"number",value:g.strokeWidth,min:"0",max:"10",onChange:y})]})]})}[o,i,a]=c.then?(await c)():c,n()}catch(g){n(g)}})},72433:(e,t,r)=>{r.a(e,async(e,n)=>{try{r.d(t,{A:()=>g});var o=r(59988),i=r(15944),a=r(11813),l=r(34425),s=r(90219),c=r(59862),u=r(97282),d=e([i,a,l,s]);function g(){c.vF.logTraceRender("geoview-drawer/src/buttons/edit");var e=window.cgpv,t=e.ui.useTheme,r=e.reactUtilities.react.useMemo,n=t(),d=r(function(){return(0,o.S)(n)},[n]),g=(0,a.t)(),p=(0,l.Np)(),w=(0,l.u6)().toggleEditing;return(0,u.jsx)(s.IconButton,{id:"clear",tooltip:(0,i.getLocalizedMessage)(g,"drawer.edit"),tooltipPlacement:"left",className:p?"highlighted active":"",onClick:function(){w()},sx:d.navButton,children:p?(0,u.jsx)(s.EditOffIcon,{}):(0,u.jsx)(s.EditIcon,{})})}[i,a,l,s]=d.then?(await d)():d,n()}catch(p){n(p)}})},72561:(e,t,r)=>{r.d(t,{y:()=>p});var n=r(2085),o=r(79828),i=r(73674),a=r(29073),l=r(41615),s=r(80860),c=r(88686),u=r(26645),d=r(59862);function g(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(g=function(){return!!e})()}var p=function(e){function t(){var e,r,n,i;(0,o.A)(this,t);for(var s=arguments.length,u=new Array(s),d=0;d<s;d++)u[d]=arguments[d];return r=this,n=t,i=[].concat(u),n=(0,l.A)(n),e=(0,a.A)(r,g()?Reflect.construct(n,i||[],(0,l.A)(r).constructor):n.apply(r,i)),(0,c.A)(e,"buttonPanels",{}),e}return(0,s.A)(t,e),(0,i.A)(t,[{key:"onCreateButtonConfigs",value:function(){d.vF.logInfo("NavBar Plugin - Default onCreateButtonProps");var e=window.cgpv.ui.elements.MapIcon;return{main:{buttonProps:{id:"someNavBarPluginButton",tooltip:"Some tooltip",tooltipPlacement:"right",children:this.react.createElement(e),visible:!0},panelProps:{title:"Some Title",icon:'<i class="material-icons">map</i>',width:300,status:!1},groupName:"default"}}}},{key:"onAdd",value:function(){var e=this;d.vF.logInfo("NavBar Plugin - Default onAdd");var t=this.onCreateButtonConfigs();Object.entries(t).forEach(function(t){var r,o=(0,n.A)(t,2),i=o[0],a=o[1];(r=a.panelProps?e.mapViewer().navBarApi.createNavbarButtonPanel(a.buttonProps,a.panelProps,a.groupName)||void 0:e.mapViewer().navBarApi.createNavbarButton(a.buttonProps,a.groupName)||void 0)&&(e.buttonPanels[i]=r)})}},{key:"onRemove",value:function(){var e,t=this;Object.keys(this.buttonPanels).length>0&&null!==(e=this.mapViewer())&&void 0!==e&&e.navBarApi&&Object.values(this.buttonPanels).forEach(function(e){t.mapViewer().navBarApi.removeNavbarButtonPanel(e.buttonPanelId)})}}])}(u.G)},80170:(e,t,r)=>{r.a(e,async(e,n)=>{try{r.d(t,{A:()=>u,b:()=>c});var o=r(11813),i=r(34425),a=r(15944),l=r(97282),s=e([o,i,a]);function c(){var e=window.cgpv.ui.elements,t=e.ShapeLineIcon,r=e.PlaceIcon,n=e.ShowChartIcon,o=e.RectangleIcon,a=e.CircleIcon,s=(0,i.RT)();return"Point"===s?(0,l.jsx)(r,{}):"LineString"===s?(0,l.jsx)(n,{}):"Polygon"===s?(0,l.jsx)(o,{}):"Circle"===s?(0,l.jsx)(a,{}):(0,l.jsx)(t,{})}function u(e){var t=window.cgpv,r=t.reactUtilities.react.useCallback,n=t.ui.elements,s=n.IconButton,c=n.List,u=n.ListItem,d=t.ui.elements,g=d.PlaceIcon,p=d.ShowChartIcon,w=d.RectangleIcon,h=d.CircleIcon,v=e.geomTypes,m=(0,o.t)(),f=(0,i.u6)().setActiveGeom,A=r(function(){f("Point")},[f]),y=r(function(){f("LineString")},[f]),C=r(function(){f("Polygon")},[f]),b=r(function(){f("Circle")},[f]);return(0,l.jsxs)(c,{children:[(null==v?void 0:v.includes("Point"))&&(0,l.jsx)(u,{children:(0,l.jsxs)(s,{id:"button-point",tooltip:(0,a.getLocalizedMessage)(m,"drawer.point"),tooltipPlacement:"left",size:"small",onClick:A,children:[(0,l.jsx)(g,{}),(0,a.getLocalizedMessage)(m,"drawer.point")]})}),(null==v?void 0:v.includes("LineString"))&&(0,l.jsx)(u,{children:(0,l.jsxs)(s,{id:"button-linestring",tooltip:(0,a.getLocalizedMessage)(m,"drawer.linestring"),tooltipPlacement:"left",size:"small",onClick:y,children:[(0,l.jsx)(p,{}),(0,a.getLocalizedMessage)(m,"drawer.linestring")]})}),(null==v?void 0:v.includes("Polygon"))&&(0,l.jsx)(u,{children:(0,l.jsxs)(s,{id:"button-polygon",tooltip:(0,a.getLocalizedMessage)(m,"drawer.polygon"),tooltipPlacement:"left",size:"small",onClick:C,children:[(0,l.jsx)(w,{}),(0,a.getLocalizedMessage)(m,"drawer.polygon")]})}),(null==v?void 0:v.includes("Circle"))&&(0,l.jsx)(u,{children:(0,l.jsxs)(s,{id:"button-circle",tooltip:(0,a.getLocalizedMessage)(m,"drawer.circle"),tooltipPlacement:"left",size:"small",onClick:b,children:[(0,l.jsx)(h,{}),(0,a.getLocalizedMessage)(m,"drawer.circle")]})})]})}[o,i,a]=s.then?(await s)():s,n()}catch(d){n(d)}})},81890:(e,t,r)=>{r.a(e,async(e,n)=>{try{r.d(t,{A:()=>g});var o=r(59988),i=r(15944),a=r(11813),l=r(34425),s=r(90219),c=r(59862),u=r(97282),d=e([i,a,l,s]);function g(){c.vF.logTraceRender("geoview-drawer/src/buttons/clear");var e=window.cgpv,t=e.ui.useTheme,r=e.reactUtilities.react.useMemo,n=t(),d=r(function(){return(0,o.S)(n)},[n]),g=(0,a.t)(),p=(0,l.u6)().clearDrawings;return(0,u.jsx)(s.IconButton,{id:"clear",tooltip:(0,i.getLocalizedMessage)(g,"drawer.clearTooltip"),tooltipPlacement:"left",onClick:function(){p()},sx:d.navButton,children:(0,u.jsx)(s.DeleteIcon,{})})}[i,a,l,s]=d.then?(await d)():d,n()}catch(p){n(p)}})},86214:(e,t,r)=>{r.a(e,async(e,n)=>{try{r.d(t,{P:()=>g});var o=r(59862),i=r(18299),a=r(80170),l=r(48270),s=r(81890),c=r(72433),u=r(20862),d=e([i,a,l,s,c,u]);function g(e){var t=window.cgpv,r=t.reactUtilities.react.createElement,n=(null==e?void 0:e.geomTypes)||["Point","LineString","Polygon","Circle"],d=t.ui.elements.CloseIcon,g={};return o.vF.logInfo("Drawer Plugin - Creating draw button ..."),g.draw={buttonProps:{id:"drawer-draw",children:r(i.A),visible:!0},groupName:"drawer"},g.geometryPicker={buttonProps:{id:"drawer-geometry-picker",tooltip:"drawer.geometryPicker",tooltipPlacement:"left",children:r(a.b),visible:!0},groupName:"drawer",panelProps:{title:"drawer.geometryPicker",icon:r(d),content:r(a.A,{geomTypes:n}),width:"flex",status:!1}},g.edit={buttonProps:{id:"drawer-edit",children:r(c.A),visible:!0},groupName:"drawer"},g.style={buttonProps:{id:"drawer-style",tooltip:"drawer.style",tooltipPlacement:"left",children:r(l.m),visible:!0},groupName:"drawer",panelProps:{title:"drawer.style",icon:r(d),content:r(l._),width:"flex",status:!1}},g.measure={buttonProps:{id:"drawer-measure",children:r(u.A),visible:!0},groupName:"drawer"},g.clear={buttonProps:{id:"drawer-clear",children:r(s.A),visible:!0},groupName:"drawer"},g}[i,a,l,s,c,u]=d.then?(await d)():d,n()}catch(p){n(p)}})},99430:(e,t,r)=>{var n=r(68555),o=r.n(n),i=r(40928),a=r.n(i),l=r(36588),s=r.n(l),c=r(50763),u=r.n(c),d=r(71519),g=r.n(d),p=r(3516),w=r.n(p),h=r(36204),v={};v.styleTagTransform=w(),v.setAttributes=u(),v.insert=s().bind(null,"head"),v.domAPI=a(),v.insertStyleElement=g();o()(h.A,v),h.A&&h.A.locals&&h.A.locals}},e=>{var t;t=4471,e(e.s=t)}]);
//# sourceMappingURL=geoview-drawer.js.map
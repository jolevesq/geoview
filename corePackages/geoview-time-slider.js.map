{"version":3,"file":"corePackages/geoview-time-slider.js","mappings":"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","sources":["webpack://geoview-core/../geoview-time-slider/src/index.tsx","webpack://geoview-core/../geoview-time-slider/src/time-slider.tsx","webpack://geoview-core/../geoview-time-slider/src/time-slider-style.ts","webpack://geoview-core/../geoview-time-slider/src/time-slider-panel.tsx"],"sourcesContent":["import React from 'react'; // GV This import is to validate that we're on the right React at the end of the file\nimport { TypeJsonObject, toJsonObject, AnySchemaObject } from 'geoview-core/api/config/types/config-types';\nimport { TypeTabs } from 'geoview-core/ui/tabs/tabs';\nimport { AbstractGVLayer } from 'geoview-core/geo/layer/gv-layers/abstract-gv-layer';\nimport { TimeSliderIcon } from 'geoview-core/ui';\nimport { FooterPlugin } from 'geoview-core/api/plugin/footer-plugin';\nimport { TimeSliderEventProcessor } from 'geoview-core/api/event-processors/event-processor-children/time-slider-event-processor';\n\nimport { TimeSliderPanel } from './time-slider-panel';\nimport schema from '../schema.json';\nimport defaultConfig from '../default-config-time-slider-panel.json';\nimport { ConfigProps } from './time-slider-types';\n\nexport interface SliderFilterProps {\n  title: string;\n  description: string;\n  range: string[];\n  defaultValue: string;\n  minAndMax: number[];\n  field: string;\n  singleHandle: boolean;\n  values: number[];\n  filtering: boolean;\n  delay: number;\n  locked: boolean;\n  reversed: boolean;\n}\n\n/**\n * Time slider plugin\n */\nclass TimeSliderPlugin extends FooterPlugin {\n  /**\n   * Return the schema that is defined for this package\n   *\n   * @returns {AnySchemaObject} returns the schema for this package\n   */\n  override schema(): AnySchemaObject {\n    return schema;\n  }\n\n  /**\n   * Return the default config for this package\n   *\n   * @returns {TypeJsonObject} the default config\n   */\n  override defaultConfig(): TypeJsonObject {\n    return toJsonObject(defaultConfig);\n  }\n\n  /**\n   * Overrides the default translations for the Plugin.\n   * @returns {TypeJsonObject} - The translations object for the particular Plugin.\n   */\n  override defaultTranslations(): TypeJsonObject {\n    return {\n      en: {\n        timeSlider: {\n          title: 'Time Slider',\n          panel: {\n            noLayers: 'No layers with temporal data',\n          },\n          slider: {\n            unlockRight: 'Unlock right handle',\n            unlockLeft: 'Unlock left handle',\n            lockRight: 'Lock right handle',\n            lockLeft: 'Lock left handle',\n            disableFilter: 'Disable Time Filtering',\n            enableFilter: 'Enable Time Filtering',\n            pauseAnimation: 'Pause animation',\n            playAnimation: 'Play animation',\n            back: 'Back',\n            forward: 'Forward',\n            changeDirection: 'Change animation direction',\n            timeDelay: 'Animation delay',\n            stepValue: 'Step value',\n            hour: 'Hour',\n            day: 'Day',\n            week: 'Week',\n            month: 'Month',\n            year: 'Year',\n          },\n        },\n      },\n      fr: {\n        timeSlider: {\n          title: 'Curseur Temporel',\n          panel: {\n            noLayers: 'Pas de couches avec des données temporelles',\n          },\n          slider: {\n            unlockRight: 'Déverrouiller la poignée droite',\n            unlockLeft: 'Déverrouiller la poignée gauche',\n            lockRight: 'Verrouiller la poignée droite',\n            lockLeft: 'Verrouiller la poignée gauche',\n            disableFilter: 'Désactiver le filtrage temporel',\n            enableFilter: 'Activer le filtrage temporel',\n            pauseAnimation: `Pause de l'animation`,\n            playAnimation: `Jouer l'animation`,\n            back: 'Retour',\n            forward: 'En avant',\n            changeDirection: `Changer la direction de l'animation`,\n            timeDelay: `Délai d'animation`,\n            stepValue: 'Valeur du saut',\n            hour: 'Heure',\n            day: 'Jour',\n            week: 'Semaine',\n            month: 'Mois',\n            year: 'Année',\n          },\n        },\n      },\n    } as unknown as TypeJsonObject;\n  }\n\n  /**\n   * Overrides the getConfig in order to return the right type.\n   * @returns {ConfigProps} The Swiper config\n   */\n  override getConfig(): ConfigProps {\n    // Redirect\n    return super.getConfig() as ConfigProps;\n  }\n\n  /**\n   * Overrides the creation of the content properties of this TimeSlider Footer Plugin.\n   * @returns {TypeTabs} The TypeTabs for the TimeSlider Footer Plugin\n   */\n  override onCreateContentProps(): TypeTabs {\n    // TODO: Cleanup - This code doesn't seem to be valid anymore, commented on 2025-06-13\n    // // Set custom time dimension if applicable\n    // this.getConfig().sliders.forEach((obj: SliderProps) => {\n    //   if (obj.temporalDimension) {\n    //     const timeDimension: TimeDimension = {\n    //       field: obj.temporalDimension.field,\n    //       default: obj.temporalDimension.default,\n    //       unitSymbol: obj.temporalDimension.unitSymbol,\n    //       nearestValues: obj.temporalDimension.nearestValues,\n    //       range: DateMgt.createRangeOGC(obj.temporalDimension.range as unknown as string),\n    //       singleHandle: obj.temporalDimension.singleHandle,\n    //       displayPattern: obj.temporalDimension.displayPattern,\n    //       isValid: obj.temporalDimension.isValid,\n    //     };\n\n    //     // TODO: Check concurrency between plugin creation and setting temporal dimensions\n    //     // TO.DOCONT: I doubt that this (and few lines below) is a good place to set the temporal dimension on layers that might be\n    //     // TO.DOCONT: loading their metadata (and setting their own temporal dimension) at the same time as the plugin gets created.\n    //     // TO.DOCONT: Whichever call comes last will be overriding the setTemporalDimension set by the other concurrent task.\n    //     // TO.DOCONT: Fortunately, the time-slider plugin gets initialized 'late' as it's currently part of a footer, so they, most of the time,\n    //     // TO.DOCONT: always overwrite the config from the layer metadata which is probably what we want here.\n    //     // TP.DOCONT: It's risky, because if the Plugin gets created before the layer metadata is fully fetched and read,\n    //     // TO.DOCONT: the later will override the plugin settings (can be tested by adding fake delays).\n    //     // TO.DOCONT: If this Plugin has temporal dimension settings, for various layers, those should be set in synch with the layers\n    //     // TO.DOCONT: using event listeners, not at Plugin creation.\n    //     this.mapViewer().layer.getGeoviewLayer(obj.layerPaths[0])?.setTemporalDimension(timeDimension);\n    //   }\n\n    //   // Set override default value under time dimension if applicable\n    //   if (obj.defaultValue) {\n    //     const layerPath = obj.layerPaths[0];\n    //     const timeDimension = this.mapViewer().layer.getGeoviewLayer(layerPath)?.getTemporalDimension();\n\n    //     if (timeDimension) {\n    //       this.mapViewer()\n    //         .layer.getGeoviewLayer(layerPath)\n    //         ?.setTemporalDimension({\n    //           ...timeDimension,\n    //           default: obj.defaultValue,\n    //         });\n    //     }\n    //   }\n    // });\n\n    return {\n      id: 'time-slider',\n      value: this.value!,\n      label: 'timeSlider.title',\n      icon: <TimeSliderIcon />,\n      content: <TimeSliderPanel mapId={this.pluginProps.mapId} configObj={this.getConfig()} />,\n    };\n  }\n\n  /**\n   * Overrides the addition of the TimeSlider Footer Plugin to make sure to set the time slider configs in the store and apply filters.\n   */\n  override onAdd(): void {\n    // If map layers are all 'loaded' already\n    if (this.mapViewer().mapLayersLoaded) {\n      // Layers are already 'loaded', initialize the time slider plugin\n      this.initTimeSliderPlugin();\n    } else {\n      // Wait for the layers to be 'loaded' so that their 'layerTemporalDimension' information is set ('techhnically, it's 'processed', but putting 'loaded' to better support layers migration)\n      this.mapViewer().onMapLayersLoaded(() => {\n        // Initialize the time slider plugin once all layers are 'loaded'\n        this.initTimeSliderPlugin();\n      });\n    }\n\n    // Call parent\n    super.onAdd();\n  }\n\n  /**\n   * Initializes the Time Slider Plugin once the layers are all 'processed'.\n   */\n  initTimeSliderPlugin(): void {\n    // Now the layerTemporalDimension should be good on the layers\n    const orderedLayerPaths = this.mapViewer().layer.getLayerEntryConfigIds();\n    const initialTimeSliderLayerPaths = this.#filterTimeSliderLayers(orderedLayerPaths);\n    if (initialTimeSliderLayerPaths) {\n      initialTimeSliderLayerPaths.forEach((layerPath) => {\n        // Get the layer\n        const layer = this.mapViewer().layer.getGeoviewLayer(layerPath);\n\n        // If the layer was found and of right type\n        if (layer instanceof AbstractGVLayer) {\n          // Get the config\n          const layerConfig = layer.getLayerConfig();\n\n          // Check and add time slider layer when needed\n          TimeSliderEventProcessor.checkInitTimeSliderLayerAndApplyFilters(this.pluginProps.mapId, layer, layerConfig);\n        }\n      });\n    }\n  }\n\n  /**\n   * Filters an array of legend layers to get usable time slider layer paths\n   *\n   * @param {string[]} layerPaths - Array of layer paths to filter\n   * @returns {string[]} A list of usable layer paths\n   * @private\n   */\n  #filterTimeSliderLayers(layerPaths: string[]): string[] {\n    const filteredLayerPaths = layerPaths.filter((layerPath) => {\n      // Get the layer\n      const layer = this.mapViewer().layer.getGeoviewLayer(layerPath);\n\n      // If of the right type\n      if (layer instanceof AbstractGVLayer) {\n        // Return the temporal dimension for the layer if any\n        return layer.getTemporalDimension();\n      }\n\n      // Skip\n      return undefined;\n    });\n    return filteredLayerPaths;\n  }\n}\n\nexport default TimeSliderPlugin;\n\n// GV This if condition took over 3 days to investigate. It was giving errors on the app.geo.ca website with\n// GV some conflicting reacts being loaded on the page for some obscure reason.\n// Check if we're on the right react\nif (React === window.cgpv.reactUtilities.react) {\n  // Keep a reference to the Time Slider Plugin as part of the geoviewPlugins property stored in the window object\n  window.geoviewPlugins = window.geoviewPlugins || {};\n  window.geoviewPlugins['time-slider'] = TimeSliderPlugin;\n} // Else ignore, don't keep it on the window, wait for the right react load\n","import { Box } from 'geoview-core/ui';\nimport {\n  useTimeSliderLayers,\n  useTimeSliderStoreActions,\n} from 'geoview-core/core/stores/store-interface-and-intial-values/time-slider-state';\nimport { useLayerLegendLayers } from 'geoview-core/core/stores/store-interface-and-intial-values/layer-state';\nimport { LegendEventProcessor } from 'geoview-core/api/event-processors/event-processor-children/legend-event-processor';\nimport { getLocalizedMessage } from 'geoview-core/core/utils/utilities';\nimport { useAppDisplayLanguage } from 'geoview-core/core/stores/store-interface-and-intial-values/app-state';\nimport { logger } from 'geoview-core/core/utils/logger';\n\nimport { DateMgt } from 'geoview-core/core/utils/date-mgt';\nimport { getSxClasses } from './time-slider-style';\nimport { ConfigProps } from './time-slider-types';\n\ninterface TimeSliderProps {\n  config: ConfigProps;\n  layerPath: string;\n}\n\n/**\n * Creates a panel with time sliders\n *\n * @param {TimeSliderProps} props - Time slider properties\n * @returns {JSX.Element} the slider panel\n */\nexport function TimeSlider(props: TimeSliderProps): JSX.Element {\n  // Log\n  logger.logTraceRender('geoview-time-slider/time-slider', props);\n\n  const { cgpv } = window;\n  const { config, layerPath } = props;\n  const { reactUtilities, ui } = cgpv;\n  const { useTheme } = ui;\n  const { useState, useRef, useEffect, useCallback } = reactUtilities.react;\n  const {\n    Grid,\n    Slider,\n    Typography,\n    Checkbox,\n    Tooltip,\n    IconButton,\n    LockIcon,\n    LockOpenIcon,\n    ArrowLeftIcon,\n    PlayArrowIcon,\n    PauseIcon,\n    ArrowRightIcon,\n    SwitchRightIcon,\n    SwitchLeftIcon,\n    FormControl,\n    InputLabel,\n    NativeSelect,\n  } = ui.elements;\n\n  const theme = useTheme();\n  const sxClasses = getSxClasses(theme);\n\n  const [isPlaying, setIsPlaying] = useState<boolean>(false);\n  const playIntervalRef = useRef<number>();\n\n  // References for play button\n  const sliderValueRef = useRef<number>();\n  const sliderDeltaRef = useRef<number>();\n\n  // Get actions and states from store\n  // TODO: evaluate best option to set value by layer path.... trough a getter?\n  const { setTitle, setDefaultValue, setDescription, setValues, setLocked, setReversed, setDelay, setStep, setFiltering } =\n    useTimeSliderStoreActions();\n  const displayLanguage = useAppDisplayLanguage();\n\n  // TODO: check performance as we should technically have one selector by constant\n  const {\n    title,\n    description,\n    defaultValue,\n    discreteValues,\n    step,\n    range,\n    minAndMax,\n    filtering,\n    singleHandle,\n    values,\n    delay,\n    locked,\n    reversed,\n    displayPattern,\n  } = useTimeSliderLayers()[layerPath];\n\n  // Get name from legend layers\n  const legendLayers = useLayerLegendLayers();\n  const name = LegendEventProcessor.findLayerByPath(legendLayers, layerPath)?.layerName;\n\n  const timeStampRange = range.map((entry: string | number | Date) =>\n    typeof entry !== 'number' ? DateMgt.convertToMilliseconds(entry) : entry\n  );\n\n  let timeMarks: number[] = [];\n  if (range.length < 4 && discreteValues) {\n    const interval = (DateMgt.convertToMilliseconds(range[range.length - 1]) - DateMgt.convertToMilliseconds(range[0])) / 4;\n    timeMarks = [minAndMax[0], minAndMax[0] + interval, minAndMax[0] + interval * 2, minAndMax[0] + interval * 3, minAndMax[1]];\n  } else if (range.length < 6 || singleHandle) timeMarks = timeStampRange;\n  else {\n    timeMarks = [\n      minAndMax[0],\n      DateMgt.convertToMilliseconds(range[Math.round(range.length / 4)]),\n      DateMgt.convertToMilliseconds(range[Math.round(range.length / 2)]),\n      DateMgt.convertToMilliseconds(range[Math.round((3 * range.length) / 4)]),\n      minAndMax[1],\n    ];\n  }\n\n  const sliderMarks = [];\n  for (let i = 0; i < timeMarks.length; i++) {\n    sliderMarks.push({\n      value: timeMarks[i],\n      // If timeframe is a single day, use time. If it is a single year, drop year from dates.\n      label:\n        displayPattern[1] !== undefined\n          ? DateMgt.formatDatePattern(timeMarks[i], undefined, displayPattern[1])\n          : DateMgt.formatDatePattern(timeMarks[i], displayPattern[0], displayPattern[1]),\n    });\n  }\n\n  /**\n   * Moves the slider handles based on the specified direction.\n   * @param direction - The direction to move the slider ('back' or 'forward').\n   */\n  const moveSlider = useCallback(\n    (direction: 'back' | 'forward'): void => {\n      const isForward = direction === 'forward';\n      const stepMove = isForward ? 1 : -1;\n\n      // Handle single handle case with no discrete values\n      if (singleHandle && !discreteValues) {\n        const currentIndex = timeStampRange.indexOf(values[0]);\n        const newIndex =\n          // eslint-disable-next-line no-nested-ternary\n          currentIndex === (isForward ? timeStampRange.length - 1 : 0)\n            ? isForward\n              ? 0\n              : timeStampRange.length - 1\n            : currentIndex + stepMove;\n        setValues(layerPath, [timeStampRange[newIndex]]);\n        return;\n      }\n\n      // Handle single handle case with discrete values\n      if (singleHandle) {\n        const interval = step || (minAndMax[1] - minAndMax[0]) / 20;\n        const newPosition = values[0] + interval * stepMove;\n        // eslint-disable-next-line no-nested-ternary\n        setValues(layerPath, [newPosition > minAndMax[1] ? minAndMax[0] : newPosition < minAndMax[0] ? minAndMax[1] : newPosition]);\n        return;\n      }\n\n      // Handle multi-handle case\n      let [leftHandle, rightHandle] = values;\n\n      // If handles are at the extremes, reset the delta\n      if (rightHandle - leftHandle === minAndMax[1] - minAndMax[0]) {\n        sliderDeltaRef.current = (minAndMax[1] - minAndMax[0]) / 10;\n        setValues(\n          layerPath,\n          isForward ? [leftHandle, leftHandle + sliderDeltaRef.current] : [rightHandle - sliderDeltaRef.current, rightHandle]\n        );\n        return;\n      }\n\n      // Calculate the delta if not already set\n      if (!sliderDeltaRef.current) {\n        sliderDeltaRef.current = rightHandle - leftHandle;\n      }\n\n      const delta = sliderDeltaRef.current * stepMove;\n\n      // Handle locked and reversed case\n      if (locked && reversed) {\n        leftHandle += delta;\n        if ((isForward && leftHandle >= rightHandle) || (!isForward && leftHandle < minAndMax[0])) {\n          [leftHandle] = minAndMax;\n        }\n      }\n      // Handle locked case\n      else if (locked) {\n        if (isForward && rightHandle === minAndMax[1]) rightHandle = leftHandle;\n        rightHandle += delta;\n        if (rightHandle > minAndMax[1]) [, rightHandle] = minAndMax;\n        else if (!isForward && rightHandle < leftHandle) rightHandle = leftHandle;\n        if (!isForward && rightHandle === leftHandle) [, rightHandle] = minAndMax;\n      }\n      // Handle unlocked case\n      else if (isForward) {\n        if (leftHandle < sliderValueRef.current! && rightHandle === sliderValueRef.current) leftHandle = sliderValueRef.current;\n        else leftHandle += delta;\n        if (leftHandle >= minAndMax[1]) [leftHandle] = minAndMax;\n        rightHandle = leftHandle + sliderDeltaRef.current;\n        if (rightHandle > minAndMax[1]) [, rightHandle] = minAndMax;\n        if (rightHandle > sliderValueRef.current! && leftHandle < sliderValueRef.current!) rightHandle = sliderValueRef.current as number;\n      } else {\n        if (rightHandle > sliderValueRef.current! && leftHandle === sliderValueRef.current) rightHandle = sliderValueRef.current;\n        else rightHandle += delta;\n        if (rightHandle <= minAndMax[0]) [, rightHandle] = minAndMax;\n        leftHandle = rightHandle - sliderDeltaRef.current;\n        if (leftHandle < minAndMax[0]) [leftHandle] = minAndMax;\n        if (leftHandle < sliderValueRef.current! && rightHandle > sliderValueRef.current!) leftHandle = sliderValueRef.current as number;\n      }\n\n      setValues(layerPath, [leftHandle, rightHandle]);\n    },\n    [discreteValues, layerPath, locked, minAndMax, reversed, setValues, singleHandle, step, timeStampRange, values]\n  );\n\n  const moveBack = useCallback((): void => {\n    moveSlider('back');\n  }, [moveSlider]);\n\n  const moveForward = useCallback((): void => {\n    moveSlider('forward');\n  }, [moveSlider]);\n\n  // #region USE EFFECT\n  useEffect(() => {\n    // Log\n    logger.logTraceUseEffect('TIME-SLIDER - mount');\n\n    // TODO: add mechanism to initialize these values during store onInitialize\n    const sliderConfig = config?.sliders?.find((o: { layerPaths: string[] }) => o.layerPaths.includes(layerPath));\n    if (title === undefined) setTitle(layerPath, sliderConfig?.title || '');\n    if (description === undefined) setDescription(layerPath, sliderConfig?.description || '');\n    if (locked === undefined) setLocked(layerPath, sliderConfig?.locked !== undefined ? sliderConfig?.locked : false);\n    if (reversed === undefined) setReversed(layerPath, sliderConfig?.reversed !== undefined ? sliderConfig?.reversed : false);\n    if (defaultValue === undefined) setDefaultValue(layerPath, sliderConfig?.defaultValue || '');\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  useEffect(() => {\n    // Log\n    logger.logTraceUseEffect('TIME-SLIDER - config layerPath', config, layerPath);\n\n    const sliderConfig = config?.sliders?.find((o: { layerPaths: string[] }) => o.layerPaths.includes(layerPath));\n    if (sliderConfig?.defaultValue) {\n      // update values based on slider's default value\n      const defaultValueIsArray = Array.isArray(sliderConfig?.defaultValue);\n      if (defaultValueIsArray) {\n        setValues(layerPath, [\n          DateMgt.convertToMilliseconds(sliderConfig?.defaultValue[0]),\n          DateMgt.convertToMilliseconds(sliderConfig?.defaultValue[1]),\n        ]);\n      } else if (range.includes(sliderConfig?.defaultValue)) {\n        setValues(layerPath, [DateMgt.convertToMilliseconds(sliderConfig?.defaultValue)]);\n      } else {\n        setValues(layerPath, [DateMgt.convertToMilliseconds(range[0])]);\n      }\n    }\n  }, [config, layerPath, range, setFiltering, setValues]);\n\n  useEffect(() => {\n    // Log\n    logger.logTraceUseEffect('TIME-SLIDER - values filtering', values, filtering);\n\n    // If slider cycle is active, pause before advancing to next increment\n    if (isPlaying) {\n      if (reversed) playIntervalRef.current = window.setTimeout(moveBack, delay);\n      else playIntervalRef.current = window.setTimeout(moveForward, delay);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [values, filtering, reversed, locked]);\n\n  // When slider cycle is activated, advance to first increment without delay\n  useEffect(() => {\n    // Log\n    logger.logTraceUseEffect('TIME-SLIDER - isPlaying', isPlaying);\n\n    if (isPlaying) {\n      if (reversed) moveBack();\n      else moveForward();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isPlaying]);\n  // #endregion\n\n  // #region HANDLE FUNCTIONS\n  const handleBack = useCallback((): void => {\n    sliderValueRef.current = reversed ? values[1] : values[0];\n    moveBack();\n  }, [moveBack, reversed, values]);\n\n  const handleForward = useCallback((): void => {\n    [sliderValueRef.current] = values;\n    moveForward();\n  }, [moveForward, values]);\n\n  const handleLock = useCallback((): void => {\n    clearTimeout(playIntervalRef.current);\n    setLocked(layerPath, !locked);\n  }, [layerPath, locked, setLocked]);\n\n  const handlePlay = useCallback((): void => {\n    clearTimeout(playIntervalRef.current);\n    sliderValueRef.current = reversed ? values[1] : values[0];\n    setIsPlaying(!isPlaying);\n  }, [isPlaying, reversed, values]);\n\n  const handleReverse = useCallback((): void => {\n    clearTimeout(playIntervalRef.current);\n    setReversed(layerPath, !reversed);\n    if (isPlaying) {\n      if (reversed) moveBack();\n      else moveForward();\n    }\n  }, [isPlaying, layerPath, moveBack, moveForward, reversed, setReversed]);\n\n  const handleTimeChange = useCallback(\n    (event: React.ChangeEvent<HTMLSelectElement>): void => {\n      setDelay(layerPath, event.target.value as unknown as number);\n    },\n    [layerPath, setDelay]\n  );\n\n  const handleStepChange = useCallback(\n    (event: React.ChangeEvent<HTMLSelectElement>): void => {\n      setStep(layerPath, Number(event.target.value));\n    },\n    [layerPath, setStep]\n  );\n\n  const handleCheckbox = useCallback(\n    (event: React.ChangeEvent<HTMLInputElement>, newValue: boolean): void => {\n      setFiltering(layerPath, newValue);\n      if (!newValue) {\n        clearInterval(playIntervalRef.current);\n        setIsPlaying(false);\n      }\n    },\n    [layerPath, setFiltering]\n  );\n\n  const handleSliderChange = useCallback(\n    (newValues: number | number[]): void => {\n      // Log\n      logger.logTraceUseCallback('TIME-SLIDER - handleSliderChange', layerPath);\n\n      clearTimeout(playIntervalRef.current);\n      setIsPlaying(false);\n      sliderDeltaRef.current = undefined;\n      setValues(layerPath, newValues as number[]);\n    },\n    [layerPath, setValues]\n  );\n\n  /**\n   * Create labels for values on slider\n   *\n   * @param {number} theValue - The value of the slider handle\n   * @returns {string} A formatted time string or ISO date string\n   */\n  const handleLabelFormat = useCallback(\n    (theValue: number): string => {\n      // Log\n      logger.logTraceUseCallback('TIME-SLIDER - handleLabelFormat', displayPattern);\n\n      // If timeframe is a single day, use time. If it is a single year, drop year from dates.\n      DateMgt.formatDatePattern(values[0], displayPattern[0], displayPattern[1]);\n\n      return DateMgt.formatDatePattern(theValue, displayPattern[0], displayPattern[1]);\n    },\n    [displayPattern, values]\n  );\n  // #endregion\n\n  function returnLockTooltip(): string {\n    if (reversed) {\n      const text = locked\n        ? getLocalizedMessage(displayLanguage, 'timeSlider.slider.unlockRight')\n        : getLocalizedMessage(displayLanguage, 'timeSlider.slider.lockRight');\n      return text;\n    }\n    const text = locked\n      ? getLocalizedMessage(displayLanguage, 'timeSlider.slider.unlockLeft')\n      : getLocalizedMessage(displayLanguage, 'timeSlider.slider.lockLeft');\n    return text;\n  }\n\n  return (\n    <Grid>\n      <Box sx={{ padding: '10px 10px' }}>\n        <Grid container sx={{ ...sxClasses.rightPanelBtnHolder, flexWrap: 'nowrap' }}>\n          <Grid size={{ xs: 9 }}>\n            <Typography component=\"div\" sx={{ ...sxClasses.panelHeaders, paddingLeft: '20px', paddingTop: '10px' }}>\n              {`${title || name}`}\n              {displayPattern[0] === undefined && ` (${DateMgt.formatDate(defaultValue, 'YYYY-MM-DD')})`}\n            </Typography>\n          </Grid>\n          <Grid size={{ xs: 3 }}>\n            <Box sx={{ textAlign: 'right', marginRight: '25px' }}>\n              <Tooltip\n                title={\n                  filtering\n                    ? getLocalizedMessage(displayLanguage, 'timeSlider.slider.disableFilter')\n                    : getLocalizedMessage(displayLanguage, 'timeSlider.slider.enableFilter')\n                }\n                placement=\"top\"\n                enterDelay={1000}\n              >\n                <Checkbox checked={filtering} onChange={handleCheckbox} />\n              </Tooltip>\n            </Box>\n          </Grid>\n        </Grid>\n        <Grid size={{ xs: 12 }}>\n          <Box sx={{ textAlign: 'center', paddingTop: '20px' }}>\n            <Slider\n              key={values[1] ? values[1] + values[0] : values[0]}\n              style={{ width: '80%', color: 'primary' }}\n              min={minAndMax[0]}\n              max={minAndMax[1]}\n              value={values}\n              marks={sliderMarks}\n              step={discreteValues ? step || 0.1 : null}\n              onChangeCommitted={handleSliderChange}\n              onValueLabelFormat={handleLabelFormat}\n            />\n          </Box>\n        </Grid>\n        <Grid size={{ xs: 12 }}>\n          <Box sx={{ textAlign: 'center', paddingTop: '20px' }}>\n            {!singleHandle && (\n              <IconButton\n                className=\"buttonOutline\"\n                aria-label={returnLockTooltip()}\n                tooltip={returnLockTooltip()}\n                tooltipPlacement=\"top\"\n                onClick={handleLock}\n              >\n                {locked ? <LockIcon /> : <LockOpenIcon />}\n              </IconButton>\n            )}\n\n            <IconButton\n              className=\"buttonOutline\"\n              aria-label={getLocalizedMessage(displayLanguage, 'timeSlider.slider.back')}\n              tooltip={getLocalizedMessage(displayLanguage, 'timeSlider.slider.back')}\n              tooltipPlacement=\"top\"\n              disabled={isPlaying || !filtering}\n              onClick={handleBack}\n            >\n              <ArrowLeftIcon />\n            </IconButton>\n\n            <IconButton\n              className=\"buttonOutline\"\n              aria-label={\n                isPlaying\n                  ? getLocalizedMessage(displayLanguage, 'timeSlider.slider.pauseAnimation')\n                  : getLocalizedMessage(displayLanguage, 'timeSlider.slider.playAnimation')\n              }\n              tooltip={\n                isPlaying\n                  ? getLocalizedMessage(displayLanguage, 'timeSlider.slider.pauseAnimation')\n                  : getLocalizedMessage(displayLanguage, 'timeSlider.slider.playAnimation')\n              }\n              tooltipPlacement=\"top\"\n              disabled={!filtering}\n              onClick={handlePlay}\n            >\n              {!isPlaying ? <PlayArrowIcon /> : <PauseIcon />}\n            </IconButton>\n\n            <IconButton\n              className=\"buttonOutline\"\n              aria-label={getLocalizedMessage(displayLanguage, 'timeSlider.slider.forward')}\n              tooltip={getLocalizedMessage(displayLanguage, 'timeSlider.slider.forward')}\n              tooltipPlacement=\"top\"\n              disabled={isPlaying || !filtering}\n              onClick={handleForward}\n            >\n              <ArrowRightIcon />\n            </IconButton>\n\n            <IconButton\n              className=\"buttonOutline\"\n              aria-label={getLocalizedMessage(displayLanguage, 'timeSlider.slider.changeDirection')}\n              tooltip={getLocalizedMessage(displayLanguage, 'timeSlider.slider.changeDirection')}\n              tooltipPlacement=\"top\"\n              onClick={handleReverse}\n            >\n              {reversed ? <SwitchRightIcon /> : <SwitchLeftIcon />}\n            </IconButton>\n\n            <Box component=\"span\" sx={{ paddingLeft: '10px' }}>\n              <FormControl sx={{ width: '100px' }}>\n                <InputLabel variant=\"standard\">{getLocalizedMessage(displayLanguage, 'timeSlider.slider.timeDelay')}</InputLabel>\n                <NativeSelect\n                  defaultValue={delay}\n                  inputProps={{\n                    name: 'timeDelay',\n                    onChange: handleTimeChange,\n                  }}\n                >\n                  <option value={500}>0.5s</option>\n                  <option value={750}>0.75s</option>\n                  <option value={1000}>1.0s</option>\n                  <option value={1500}>1.5s</option>\n                  <option value={2000}>2.0s</option>\n                  <option value={3000}>3.0s</option>\n                  <option value={5000}>5.0s</option>\n                </NativeSelect>\n              </FormControl>\n            </Box>\n\n            {singleHandle && discreteValues && (\n              <Box component=\"span\" sx={{ paddingLeft: '10px' }}>\n                <FormControl sx={{ width: '100px' }}>\n                  <InputLabel variant=\"standard\">{getLocalizedMessage(displayLanguage, 'timeSlider.slider.stepValue')}</InputLabel>\n                  <NativeSelect\n                    defaultValue={step}\n                    inputProps={{\n                      name: 'timeStep',\n                      onChange: handleStepChange,\n                    }}\n                  >\n                    <option value={3600000}>{getLocalizedMessage(displayLanguage, 'timeSlider.slider.hour')}</option>\n                    <option value={86400000}>{getLocalizedMessage(displayLanguage, 'timeSlider.slider.day')}</option>\n                    <option value={604800000}>{getLocalizedMessage(displayLanguage, 'timeSlider.slider.week')}</option>\n                    <option value={2592000000}>{getLocalizedMessage(displayLanguage, 'timeSlider.slider.month')}</option>\n                    <option value={31536000000}>{getLocalizedMessage(displayLanguage, 'timeSlider.slider.year')}</option>\n                  </NativeSelect>\n                </FormControl>\n              </Box>\n            )}\n          </Box>\n        </Grid>\n        {description && (\n          <Grid size={{ xs: 12 }}>\n            <Typography component=\"div\" sx={{ px: '20px', py: '5px' }}>\n              {description}\n            </Typography>\n          </Grid>\n        )}\n      </Box>\n    </Grid>\n  );\n}\n","// ? I doubt we want to define an explicit type for style properties?\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport const getSxClasses = (theme: any): any => ({\n  panelHeaders: {\n    fontSize: theme.palette.geoViewFontSize.lg,\n    fontWeight: '600',\n    marginBottom: '20px',\n  },\n  rightPanelBtnHolder: {\n    marginTop: '20px',\n    marginBottom: '9px',\n    boxShadow: '0px 12px 9px -13px #E0E0E0',\n  },\n});\n","import { TypeWindow } from 'geoview-core/core/types/global-types';\nimport { LayerListEntry, Layout } from 'geoview-core/core/components/common';\nimport {\n  TypeTimeSliderValues,\n  useTimeSliderLayers,\n  useTimeSliderSelectedLayerPath,\n  useTimeSliderStoreActions,\n} from 'geoview-core/core/stores/store-interface-and-intial-values/time-slider-state';\nimport { useMapVisibleLayers } from 'geoview-core/core/stores/store-interface-and-intial-values/map-state';\nimport { useLayerLegendLayers } from 'geoview-core/core/stores/store-interface-and-intial-values/layer-state';\nimport { LegendEventProcessor } from 'geoview-core/api/event-processors/event-processor-children/legend-event-processor';\nimport { Box } from 'geoview-core/ui';\nimport { logger } from 'geoview-core/core/utils/logger';\nimport { TABS } from 'geoview-core/core/utils/constant';\n\nimport { DateMgt } from 'geoview-core/core/utils/date-mgt';\nimport { TimeSlider } from './time-slider';\nimport { ConfigProps } from './time-slider-types';\n\ninterface TypeTimeSliderProps {\n  configObj: ConfigProps;\n  mapId: string;\n}\n\n/**\n * Time slider tab\n *\n * @param {TypeTimeSliderProps} props The properties passed to slider\n * @returns {JSX.Element} the time slider tab\n */\nexport function TimeSliderPanel(props: TypeTimeSliderProps): JSX.Element {\n  const { mapId, configObj } = props;\n  const { cgpv } = window as TypeWindow;\n  const { reactUtilities } = cgpv;\n  const { useCallback, useMemo, useEffect } = reactUtilities.react;\n\n  // get values from store\n  const visibleLayers = useMapVisibleLayers();\n  const timeSliderLayers = useTimeSliderLayers();\n  const selectedLayerPath = useTimeSliderSelectedLayerPath();\n  const { setSelectedLayerPath } = useTimeSliderStoreActions();\n  const legendLayers = useLayerLegendLayers();\n\n  /**\n   * handle Layer list when clicked on each layer.\n   * @param {LayerListEntry} layer layer clicked by the user.\n   */\n  const handleClickLayerList = useCallback(\n    (layer: LayerListEntry) => {\n      // Log\n      logger.logTraceUseCallback('TIME-SLIDER-PANEL - handleLayerList');\n\n      // Set the layer path\n      setSelectedLayerPath(layer.layerPath);\n    },\n    [setSelectedLayerPath]\n  );\n\n  /**\n   * Get dates for current filters\n   * @param {TypeTimeSliderValues} timeSliderLayerInfo - Time slider layer info.\n   */\n  const getFilterInfo = (timeSliderLayerInfo: TypeTimeSliderValues): string | null => {\n    if (timeSliderLayerInfo.filtering) {\n      const { values } = timeSliderLayerInfo;\n\n      // Fill in date pattern and time pattern with default values if the display pattern is empty for some reason\n      const [datePattern, timePattern] = timeSliderLayerInfo.displayPattern;\n\n      return timeSliderLayerInfo.values.length === 1\n        ? DateMgt.formatDatePattern(values[0], 'day', timePattern)\n        : `${DateMgt.formatDatePattern(values[0], datePattern, timePattern)} / ${DateMgt.formatDatePattern(\n            values[1],\n            datePattern,\n            timePattern\n          )}`;\n    }\n\n    return null;\n  };\n\n  // Reacts when the array of layer data updates\n  const memoLayersList = useMemo(() => {\n    // Log\n    logger.logTraceUseMemo('TIME-SLIDER-PANEL - memoLayersList', timeSliderLayers);\n\n    /**\n     * Create layer tooltip\n     * @param {TypeTimeSliderValues} timeSliderLayerInfo Time slider layer info.\n     * @param {string} name Time slider layer name.\n     * @returns\n     */\n    const getLayerTooltip = (timeSliderLayerInfo: TypeTimeSliderValues, name: string): JSX.Element => {\n      return (\n        <Box sx={{ display: 'flex', alignContent: 'center', '& svg ': { width: '0.75em', height: '0.75em' } }}>\n          {name}\n          {timeSliderLayerInfo.filtering && `: ${getFilterInfo(timeSliderLayerInfo)}`}\n        </Box>\n      );\n    };\n\n    // Return the layers\n    return visibleLayers\n      .map((layerPath) => {\n        return { layerPath, timeSliderLayerInfo: timeSliderLayers[layerPath] };\n      })\n      .filter((layer) => layer && layer.timeSliderLayerInfo)\n      .map((layer) => {\n        return {\n          layerName: LegendEventProcessor.findLayerByPath(legendLayers, layer.layerPath)?.layerName,\n          layerPath: layer.layerPath,\n          layerFeatures: getFilterInfo(layer.timeSliderLayerInfo),\n          tooltip: getLayerTooltip(\n            layer.timeSliderLayerInfo,\n            LegendEventProcessor.findLayerByPath(legendLayers, layer.layerPath)?.layerName || ''\n          ),\n          layerStatus: 'loaded',\n          queryStatus: 'processed',\n          layerUniqueId: `${mapId}-${TABS.TIME_SLIDER}-${layer.layerPath}`,\n        } as LayerListEntry;\n      });\n  }, [legendLayers, timeSliderLayers, visibleLayers, mapId]);\n\n  useEffect(() => {\n    // Log\n    logger.logTraceUseEffect('TIME-SLIDER-PANEL - memoLayersList', memoLayersList, selectedLayerPath);\n\n    // If the selected layer path isn't in the list of layers possible, clear it\n    if (selectedLayerPath && !memoLayersList.map((layer: { layerPath: string }) => layer.layerPath).includes(selectedLayerPath)) {\n      // Clear the selected layer path\n      setSelectedLayerPath('');\n    }\n  }, [memoLayersList, selectedLayerPath, setSelectedLayerPath]);\n\n  const handleGuideIsOpen = useCallback(\n    (guideIsOpen: boolean): void => {\n      if (guideIsOpen) {\n        setSelectedLayerPath('');\n      }\n    },\n    [setSelectedLayerPath]\n  );\n\n  /**\n   * Render the right panel content based on selected Layer path of time slider.\n   * NOTE: Here we return null, so that in responsive grid layout, it can be used as flag to render the guide for time slider.\n   * @returns {JSX.Element | null} JSX.Element | null\n   */\n  const renderContent = (): JSX.Element | null => {\n    if (selectedLayerPath && timeSliderLayers && selectedLayerPath in timeSliderLayers) {\n      return <TimeSlider config={configObj} layerPath={selectedLayerPath} key={selectedLayerPath} />;\n    }\n\n    return null;\n  };\n\n  return (\n    <Layout\n      selectedLayerPath={selectedLayerPath}\n      onLayerListClicked={handleClickLayerList}\n      layerList={memoLayersList}\n      onGuideIsOpen={handleGuideIsOpen}\n      guideContentIds={['timeSlider']}\n    >\n      {renderContent()}\n    </Layout>\n  );\n}\n"],"names":["_TimeSliderPlugin_brand","WeakSet","TimeSliderPlugin","_FooterPlugin","_this","_classCallCheck","_len","arguments","length","args","Array","_key","concat","_classPrivateMethodInitSpec","_inherits","_createClass","key","value","schema","toJsonObject","defaultConfig","en","timeSlider","title","panel","noLayers","slider","unlockRight","unlockLeft","lockRight","lockLeft","disableFilter","enableFilter","pauseAnimation","playAnimation","back","forward","changeDirection","timeDelay","stepValue","hour","day","week","month","year","fr","_superPropGet","id","this","label","icon","_jsx","TimeSliderIcon","content","TimeSliderPanel","mapId","pluginProps","configObj","getConfig","_this2","mapViewer","mapLayersLoaded","initTimeSliderPlugin","onMapLayersLoaded","_this3","orderedLayerPaths","layer","getLayerEntryConfigIds","initialTimeSliderLayerPaths","_assertClassBrand","_filterTimeSliderLayers","call","forEach","layerPath","getGeoviewLayer","AbstractGVLayer","layerConfig","getLayerConfig","TimeSliderEventProcessor","checkInitTimeSliderLayerAndApplyFilters","FooterPlugin","layerPaths","_this4","filter","getTemporalDimension","React","window","cgpv","reactUtilities","react","geoviewPlugins","TimeSlider","props","_LegendEventProcessor","logger","logTraceRender","config","ui","useTheme","_reactUtilities$react","useState","useRef","useEffect","useCallback","_ui$elements","elements","Grid","Slider","Typography","Checkbox","Tooltip","IconButton","LockIcon","LockOpenIcon","ArrowLeftIcon","PlayArrowIcon","PauseIcon","ArrowRightIcon","SwitchRightIcon","SwitchLeftIcon","FormControl","InputLabel","NativeSelect","theme","sxClasses","getSxClasses","_useState","_useState2","_slicedToArray","isPlaying","setIsPlaying","playIntervalRef","sliderValueRef","sliderDeltaRef","_useTimeSliderStoreAc","useTimeSliderStoreActions","setTitle","setDefaultValue","setDescription","setValues","setLocked","setReversed","setDelay","setStep","setFiltering","displayLanguage","useAppDisplayLanguage","_useTimeSliderLayers$","useTimeSliderLayers","description","defaultValue","discreteValues","step","range","minAndMax","filtering","singleHandle","values","delay","locked","reversed","displayPattern","legendLayers","useLayerLegendLayers","name","LegendEventProcessor","findLayerByPath","layerName","timeStampRange","map","entry","DateMgt","convertToMilliseconds","timeMarks","interval","Math","round","sliderMarks","i","push","undefined","formatDatePattern","moveSlider","direction","isForward","stepMove","newPosition","_values","leftHandle","rightHandle","current","delta","currentIndex","indexOf","newIndex","moveBack","moveForward","_config$sliders","logTraceUseEffect","sliderConfig","sliders","find","o","includes","_config$sliders2","isArray","setTimeout","handleBack","handleForward","_values2","handleLock","clearTimeout","handlePlay","handleReverse","handleTimeChange","event","target","handleStepChange","Number","handleCheckbox","newValue","clearInterval","handleSliderChange","newValues","logTraceUseCallback","handleLabelFormat","theValue","returnLockTooltip","getLocalizedMessage","children","_jsxs","Box","sx","padding","container","_objectSpread","rightPanelBtnHolder","flexWrap","size","xs","component","panelHeaders","paddingLeft","paddingTop","formatDate","textAlign","marginRight","placement","enterDelay","checked","onChange","style","width","color","min","max","marks","onChangeCommitted","onValueLabelFormat","className","tooltip","tooltipPlacement","onClick","disabled","variant","inputProps","px","py","fontSize","palette","geoViewFontSize","lg","fontWeight","marginBottom","marginTop","boxShadow","useMemo","visibleLayers","useMapVisibleLayers","timeSliderLayers","selectedLayerPath","useTimeSliderSelectedLayerPath","setSelectedLayerPath","handleClickLayerList","getFilterInfo","timeSliderLayerInfo","_timeSliderLayerInfo$","datePattern","timePattern","memoLayersList","logTraceUseMemo","_LegendEventProcessor2","layerFeatures","display","alignContent","height","layerStatus","queryStatus","layerUniqueId","TABS","TIME_SLIDER","handleGuideIsOpen","guideIsOpen","Layout","onLayerListClicked","layerList","onGuideIsOpen","guideContentIds"],"sourceRoot":""}